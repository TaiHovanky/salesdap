(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{251:function(e,t,n){},252:function(e,t,n){},254:function(e,t,n){"use strict";n.r(t);var a=n(2),r=n.n(a),i=n(67),o=n.n(i),c=n(162),s=n.n(c),l=n(21),u=n(347),d=n(331),m=n(348),p=n(324),j=n(349),h=n(36),b=n.n(h),f=n(32),x=n(27),O=n(260),g=n(306),C=n(339),v=n(59),w=n(43),y=n.n(w),S=n(294),E=n(298),T=n(337),D=n(338),F=n(1),k=function(e){var t=e.selectedDocument,n=e.validateAndSetFileSelection,r=e.index,i=e.handleFilePinning,o=e.user,c=Object(a.useRef)(null);return Object(F.jsxs)(F.Fragment,{children:[Object(F.jsxs)(T.a,{variant:"extended","aria-label":"add",sx:{margin:"0.5rem auto 0"},onClick:function(){c&&c.current&&c.current.click()},children:[Object(F.jsx)(S.a,{sx:{mr:1}}),"Select File"]}),Object(F.jsx)("input",{type:"file",ref:c,className:"file-input",onChange:function(e){return n(e,r)},name:"sales_file"}),t&&t.name&&Object(F.jsxs)("div",{className:"selected-file-div",children:[Object(F.jsx)(O.a,{variant:"subtitle1",sx:{marginTop:"1rem"},children:t.name}),0===r&&Object(F.jsx)(D.a,{title:"Pin a list for future comparisons",arrow:!0,children:Object(F.jsx)(C.a,{sx:{margin:"0.5rem"},onClick:function(){return i(t.fileBlob)},disabled:o.pinnedFileName===t.name,children:Object(F.jsx)(E.a,{})})})]})]})},P="UPLOAD_DOCUMENT_SUCCESS",B="SELECT_DOCUMENT",N="CHANGE_COMPARISON_COLUMN",I="PIN_FILE_SUCCESS",A="SET_FILE_SOURCE",R="SET_FILE_STRUCTURE",U="SET_COMPARISON_COLUMNS_ERROR",_="SET_ALL_COLUMNS",L="CHANGE_UNFORMATTED_DATA",M="CHANGE_PARTNER_NAME",H="CHANGE_PARTNER_COMPANY",G="UNFORMATTED_DATA",q="FORMATTED_DATA",z=function(e,t,n,a){return{type:B,payload:e,index:t,name:n,columnChooserGridData:e.length>2?e.slice(0,2):e,fileBlob:a}},W=function(e,t){return{type:N,payload:e,index:t}},V=function(e){return{type:I,payload:e}},Z="SHOW_ERROR",J="HIDE_ERROR",Y="SHOW_SUCCESS",$="HIDE_SUCCESS",K=function(e){return{type:Z,payload:e}},Q=function(){return{type:J}},X=function(e){return{type:Y,payload:e}},ee=function(){return{type:J}},te="SET_IS_LOADING",ne=function(e){return{type:te,payload:e}},ae=["xls","xlsx","csv"],re=function(e){var t=e.split("."),n=t[t.length-1];return ae.includes(n.toLowerCase())},ie=n(92),oe="",ce=function(e){oe=e},se=function(){return oe},le=function(){var e=Object(v.a)(y.a.mark((function e(t){var n,a,r,i;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.arrayBuffer();case 2:if(n=e.sent,a=Object(ie.a)(n),r=a.SheetNames[0],!(i=a&&a.Sheets?a.Sheets[r]:null)){e.next=8;break}return e.abrupt("return",ie.b.sheet_to_json(i));case 8:return e.abrupt("return",[]);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ue=function(){var e=Object(v.a)(y.a.mark((function e(t){var n,a,r,i;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=[],a=[],t.forEach((function(e,t){0===t&&(a=Array.from(Object.keys(e)),n.push(a));var r=a.map((function(t){return e[t]}));n.push(r)})),r=ie.b.aoa_to_sheet(n),i=ie.b.book_new(),ie.b.book_append_sheet(i,r,"Sheet1"),Object(ie.c)(i,"account-mapping.xls");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),de=function(e,t){var n=window.URL.createObjectURL(new Blob([e])),a=document.createElement("a");a.href=n,a.setAttribute("download",t),document.body.appendChild(a),a.click()},me=function(e){return b.a.get("/api/v1/viewpinnedfile",{responseType:"blob",params:{pinnedFileId:e},headers:{Authorization:"Bearer ".concat(se())}})},pe=Object(f.b)((function(e){return{user:e.user}}),(function(e){return{showSuccess:function(t){return e(X(t))},hideSuccess:function(){return e(ee())},showError:function(t){return e(K(t))},hideError:function(){return e(Q())},setIsLoading:function(t){return e(ne(t))},selectDocument:function(t,n,a,r){return e(z(t,n,a,r))},pinFileSuccess:function(t){return e(V(t))}}}))((function(e){var t=e.selectedDocument,n=e.showError,a=e.hideError,r=e.setIsLoading,i=e.selectDocument,o=e.index,c=e.user,s=e.pinFileSuccess,l=e.showSuccess,u=e.hideSuccess,d=function(){var e=Object(v.a)(y.a.mark((function e(t,o){var c,s;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r(!0),c=t&&t.target&&t.target.files?t.target.files[0]:null,!(!(!c||!c.name)&&re(c.name))){e.next=12;break}return a(),e.next=7,le(c);case 7:s=e.sent,i(s,o,c.name,c),r(!1),e.next=13;break;case 12:n("Invalid file type. Only .xls, .xlsx, or .csv files can be processed.");case 13:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return Object(F.jsx)(k,{selectedDocument:t,validateAndSetFileSelection:d,index:o,handleFilePinning:function(e){r(!0);var t=new FormData;e&&e.name&&(t.append("sales_file",e,e.name),t.append("email",c.email)),b.a.post("/api/v1/pinfile",t,{headers:{Authorization:"Bearer ".concat(se())}}).then((function(e){s(e.data),a(),r(!1),l("Successfully pinned file"),setTimeout((function(){u()}),5e3)})).catch((function(){r(!1),n("Failed to pin file"),setTimeout((function(){a()}),7500)}))},user:c})})),je=n(333),he=n(299),be=function(e){var t=e.user,n=e.handlePinnedFileClick;return Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)(O.a,{variant:"subtitle1",children:"Pinned File:"}),Object(F.jsx)(je.a,{onClick:n,icon:Object(F.jsx)(he.a,{}),label:t.pinnedFileName})]})},fe=Object(f.b)((function(e){return{user:e.user}}),(function(e){return{showError:function(t){return e(K(t))},hideError:function(){return e(Q())}}}))((function(e){var t=e.user,n=e.showError,a=(e.hideError,function(){var e=Object(v.a)(y.a.mark((function e(){var a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,me(t.pinnedFileId);case 3:a=e.sent,de(a.data,t.pinnedFileName),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.log("err",e.t0),n("Failed to download pinned file.");case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}());return Object(F.jsx)(be,{user:t,handlePinnedFileClick:a})})),xe=n(340),Oe=n(334),ge=n(341),Ce=n(326),ve=function(e){var t=e.fileSource,n=e.handleFileTypeChange,a=e.index;return Object(F.jsx)(xe.a,{children:Object(F.jsxs)(Oe.a,{"aria-labelledby":"demo-controlled-radio-buttons-group",name:"controlled-radio-buttons-group",row:!0,value:t,onChange:function(e){return n(e,a)},sx:{marginBottom:"1rem"},children:[Object(F.jsx)(ge.a,{value:"upload",control:Object(F.jsx)(Ce.a,{}),label:"Upload a file"}),Object(F.jsx)(ge.a,{value:"pinned",control:Object(F.jsx)(Ce.a,{}),label:"Use your pinned file"})]})})},we=Object(f.b)((function(e){return{user:e.user}}),(function(e){return{showError:function(t){return e(K(t))},hideError:function(){return e(Q())},setIsLoading:function(t){return e(ne(t))},selectDocument:function(t,n,a,r){return e(z(t,n,a,r))},setFileSource:function(t,n){return e(function(e,t){return{type:A,index:e,payload:t}}(t,n))}}}))((function(e){var t=e.showError,n=e.hideError,a=e.setIsLoading,r=e.selectDocument,i=e.setFileSource,o=e.fileSource,c=e.user,s=e.index,l=function(){var e=Object(v.a)(y.a.mark((function e(o,s){var l,u;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i(s,o.target.value),"pinned"!==o.target.value){e.next=23;break}return a(!0),e.prev=3,e.next=6,me(c.pinnedFileId);case 6:return l=e.sent,e.next=9,le(l.data);case 9:u=e.sent,r(u,s,c.pinnedFileId,l.data),n(),a(!1),e.next=21;break;case 15:e.prev=15,e.t0=e.catch(3),console.log("err",e.t0),t("Failed to get pinned file for user."),a(!1),setTimeout((function(){n()}),5e3);case 21:e.next=24;break;case 23:r([],s,"");case 24:case"end":return e.stop()}}),e,null,[[3,15]])})));return function(t,n){return e.apply(this,arguments)}}();return Object(F.jsx)(ve,{handleFileTypeChange:l,fileSource:o,index:s})})),ye=n(328),Se=n(329),Ee=n(323),Te=n(301),De=n(302),Fe=Object(F.jsx)(Te.a,{fontSize:"small"}),ke=Object(F.jsx)(De.a,{fontSize:"small"}),Pe=function(e){var t=e.selectedDocument,n=e.comparisonColumns,a=e.comparisonColumnsError,r=e.handleComparisonColumnsBlur,i=e.handleComparisonColumnFieldChange,o=t&&t.data&&t.data[0]?Array.from(Object.keys(t.data[0])):[];return Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)(ye.a,{multiple:!0,disableCloseOnSelect:!0,options:o,onChange:i,value:n,sx:{width:"100%"},renderOption:function(e,t,n){var a=n.selected;return Object(F.jsxs)("li",Object(l.a)(Object(l.a)({},e),{},{children:[Object(F.jsx)(Se.a,{icon:Fe,checkedIcon:ke,style:{marginRight:8},checked:a}),t]}))},renderInput:function(e){return Object(F.jsx)(Ee.a,Object(l.a)(Object(l.a)({},e),{},{variant:"standard",required:!0,error:!!a.length,onBlur:r}))}}),!!a.length&&Object(F.jsx)(O.a,{variant:"caption",sx:{color:"#d32f2f"},children:a.join("\n")})]})},Be=Object(f.b)(null,(function(e){return{changeComparisonColumn:function(t,n){return e(W(t,n))},setComparisonColumnsError:function(t,n){return e(function(e,t){return{type:U,payload:e,index:t}}(t,n))}}}))((function(e){var t=e.selectedDocument,n=e.comparisonColumns,a=e.changeComparisonColumn,r=e.comparisonColumnsError,i=e.setComparisonColumnsError,o=e.index;return Object(F.jsx)(Pe,{selectedDocument:t,comparisonColumns:n,comparisonColumnsError:r,handleComparisonColumnsBlur:function(){i(n,o)},handleComparisonColumnFieldChange:function(e,t){a(t,o)},index:o})})),Ne=n(310),Ie=n(344),Ae=n(309),Re=n(345),Ue=n(346),_e=n(45),Le=n.n(_e),Me=[{"Account Name":"Pepsi Co.",Website:"pepsi.com","Account Manager":"Thomas Henry",DUNS:123453},{"Account Name":"Tropicana",Website:"tropicana.com","Account Manager":"Jennifer Shaw",DUNS:345234},{"Account Name":"Gatorade",Website:"gatorade.com","Account Manager":"Kim Yi",DUNS:645345}],He=["Pepsi Co.","Tropicana","Gatorade"],Ge=function(e){var t=e.isHelpModalOpen,n=e.handleOpenHelpModal;return Object(F.jsx)(F.Fragment,{children:Object(F.jsxs)(Ie.a,{open:t,onClose:n,children:[Object(F.jsx)(Ae.a,{children:"Formatted vs. Unformatted Data"}),Object(F.jsxs)(Re.a,{dividers:!0,children:[Object(F.jsx)(Ue.a,{children:"Formatted data example:"}),Object(F.jsx)(Le.a,{id:"formattedGridContainer",dataSource:Me,showColumnLines:!0,columnAutoWidth:!0,showBorders:!0,width:"100%",height:"100%"}),Object(F.jsx)(O.a,{variant:"body2",children:'Note that "formatted" here is referring to the presence of defined column names.'}),Object(F.jsx)(Ue.a,{sx:{marginTop:"1.5rem"},children:"Unformatted data example:"}),Object(F.jsx)(Le.a,{id:"unformattedGridContainer",dataSource:He,showColumnLines:!0,columnAutoWidth:!0,showBorders:!0,width:"100%",height:"100%",children:Object(F.jsx)(_e.Column,{caption:"",calculateCellValue:function(e){return e}})}),Object(F.jsx)(O.a,{variant:"body2",children:'Note that "unformatted" here is referring to the lack of defined column names. If you\'re uploading an unformatted file, only copy/paste 1 column that you think would lead to the most precise match when mapped to a column from the other file.'})]})]})})},qe=function(e){var t=e.fileStructure,n=e.handleFileStructureChange,r=e.index,i=Object(a.useState)(!1),o=Object(x.a)(i,2),c=o[0],s=o[1],l=function(){s(!c)};return Object(F.jsxs)(F.Fragment,{children:[Object(F.jsxs)(xe.a,{children:[Object(F.jsxs)(g.a,{children:["Is your data formatted or unformatted? ",Object(F.jsx)(C.a,{onClick:l,children:Object(F.jsx)(Ne.a,{})})]}),Object(F.jsxs)(Oe.a,{row:!0,"aria-labelledby":"demo-controlled-radio-buttons-group",name:"controlled-radio-buttons-group",value:t,onChange:function(e){return n(e,r)},children:[Object(F.jsx)(ge.a,{value:q,control:Object(F.jsx)(Ce.a,{}),label:"Formatted"}),Object(F.jsx)(ge.a,{value:G,control:Object(F.jsx)(Ce.a,{}),label:"Unformatted"})]})]}),Object(F.jsx)(Ge,{isHelpModalOpen:c,handleOpenHelpModal:l})]})},ze=Object(f.b)(null,(function(e){return{setFileStructure:function(t,n){return e(function(e,t){return{type:R,index:e,payload:t}}(t,n))}}}))((function(e){var t=e.setFileStructure,n=e.fileStructure,a=e.index;return Object(F.jsx)(qe,{handleFileStructureChange:function(e,n){t(n,e.target.value)},fileStructure:n,index:a})})),We=function(e){var t=e.unformattedData,n=e.handleUnformattedDataChange;return Object(F.jsx)(Ee.a,{multiline:!0,maxRows:5,variant:"standard",sx:{width:"100%"},helperText:"Unformatted data",value:t,onChange:n})},Ve=Object(f.b)(null,(function(e){return{changeUnformattedData:function(t,n){return e(function(e,t){return{type:L,index:e,payload:t}}(t,n))}}}))((function(e){var t=e.unformattedData,n=e.index,a=e.changeUnformattedData;return Object(F.jsx)(We,{handleUnformattedDataChange:function(e){a(n,e.target.value)},unformattedData:t})})),Ze=function(e){var t=e.partnerName,n=e.changePartnerName;return Object(F.jsx)(F.Fragment,{children:Object(F.jsx)(Ee.a,{helperText:"Partner Sales Rep Name",variant:"standard",sx:{width:"100%"},value:t,onChange:n})})},Je=Object(f.b)((function(e){return{partnerName:e.document.partnerName}}),(function(e){return{changePartnerName:function(t){return e((n=t.target.value,{type:M,payload:n}));var n}}}))((function(e){var t=e.partnerName,n=e.changePartnerName;return Object(F.jsx)(Ze,{partnerName:t,changePartnerName:n})})),Ye=function(e){var t=e.partnerCompany,n=e.changePartnerCompany;return Object(F.jsx)(F.Fragment,{children:Object(F.jsx)(Ee.a,{helperText:"Partner Company",variant:"standard",sx:{width:"100%"},value:t,onChange:n})})},$e=Object(f.b)((function(e){return{partnerCompany:e.document.partnerCompany}}),(function(e){return{changePartnerCompany:function(t){return e((n=t.target.value,{type:H,payload:n}));var n}}}))((function(e){var t=e.partnerCompany,n=e.changePartnerCompany;return Object(F.jsx)(Ye,{partnerCompany:t,changePartnerCompany:n})})),Ke=function(e){var t=e.selectedDocument,n=e.handleColumnClick,a=e.comparisonColumns,r=e.index;return Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)(O.a,{variant:"subtitle1",sx:{margin:"2rem 0 0"}}),Object(F.jsxs)(_e.DataGrid,{id:"gridContainer",dataSource:t.columnChooserGridData,allowColumnReordering:!0,allowColumnResizing:!0,columnAutoWidth:!0,showBorders:!0,children:[t.allColumns?t.allColumns.map((function(e,t){return Object(F.jsx)(_e.Column,{dataField:e,allowSorting:!1,headerCellRender:function(){return function(e,t,n,a){return Object(F.jsxs)("div",{children:[e.column?e.column.dataField:e,Object(F.jsx)(Se.a,{onClick:function(){t(e,a)},checked:n.indexOf(e)>-1})]})}(e,n,a,r)}},"col-".concat(t,"-1"))})):[],Object(F.jsx)(_e.Paging,{defaultPageSize:2}),Object(F.jsx)(_e.Pager,{visible:!0,displayMode:"full",showPageSizeSelector:!1,showInfo:!0,showNavigationButtons:!0})]})]})},Qe=function(e){var t=e.isHelpModalOpen,n=e.handleOpenHelpModal;return Object(F.jsx)(F.Fragment,{children:Object(F.jsxs)(Ie.a,{open:t,onClose:n,children:[Object(F.jsx)(Ae.a,{children:"Choose columns to compare/match with the other file's columns"}),Object(F.jsxs)(Re.a,{dividers:!0,children:[Object(F.jsx)(O.a,{variant:"body2",children:"Columns from file A that will be compared with columns from file B to determine a matching account. Limit: 5 columns. Hint: the more unique a column's value is to a company, the better (DUNS number, company website, etc.)."}),Object(F.jsx)(Ue.a,{sx:{marginTop:"1.5rem"},children:"Using the text input:"}),Object(F.jsx)(O.a,{variant:"body2",children:"Type in a column that you're trying to find. If it appears in the results drop down, click it to select the column. The checkbox next to its label will appear checked. Multiple checkboxes can be selected."}),Object(F.jsx)(Ue.a,{sx:{marginTop:"1.5rem"},children:"Using the data grid:"}),Object(F.jsx)(O.a,{variant:"body2",children:"The grid below shows 2 example rows from the uploaded file. Columns for comparison can also be selected by clicking the column headers."})]})]})})},Xe=function(e){var t=e.isHelpModalOpen,n=e.handleOpenHelpModal;return Object(F.jsx)(F.Fragment,{children:Object(F.jsxs)(Ie.a,{open:t,onClose:n,children:[Object(F.jsx)(Ae.a,{children:"Upload a file from your computer or use a pinned file"}),Object(F.jsxs)(Re.a,{dividers:!0,children:[Object(F.jsx)(Ue.a,{sx:{marginTop:"1.5rem"},children:"Upload a file from your computer:"}),Object(F.jsx)(O.a,{variant:"body2",children:"Click the Select File button and search for a file."}),Object(F.jsx)(Ue.a,{sx:{marginTop:"1.5rem"},children:"Use a pinned file:"}),Object(F.jsx)(O.a,{variant:"body2",children:'In your profile page, you can save a file as a "pinned file". This would be used when you have a file that you will regularly be compared to partners\' files. Typically, it would be the file that contains all of your accounts.'})]})]})})},et=function(e){var t=e.selectedDocument,n=e.comparisonColumns,r=e.comparisonColumnsError,i=e.fileSource,o=e.index,c=e.user,s=e.setAllColumns,l=e.handleColumnClick,u=e.fileStructure,d=e.unformattedData,m=Object(a.useState)(!1),p=Object(x.a)(m,2),j=p[0],h=p[1],b=Object(a.useState)(!1),f=Object(x.a)(b,2),v=f[0],w=f[1];Object(a.useEffect)((function(){t.data&&t.data[0]&&s(Array.from(Object.keys(t.data[0])),o)}),[t.data,s,o]);var y=function(){w(!v)},S=function(){h(!j)};return Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)(O.a,{variant:"h6",sx:{marginTop:"3rem",marginBottom:"1rem"},children:0===o?"MY ACCOUNTS":"PARTNER'S ACCOUNTS"}),Object(F.jsx)(ze,{index:o,fileStructure:u}),u===q?Object(F.jsxs)(F.Fragment,{children:[Object(F.jsxs)(g.a,{sx:{marginTop:"4rem",marginBottom:"0.25rem"},children:["Select a file ",Object(F.jsx)(C.a,{onClick:y,children:Object(F.jsx)(Ne.a,{})})]}),!!c.pinnedFileName&&0===o&&Object(F.jsx)(we,{fileSource:i,index:o}),Object(F.jsx)("div",{className:"file-selection",children:"upload"===i?Object(F.jsx)(pe,{selectedDocument:t,index:o}):Object(F.jsx)(fe,{})}),Object(F.jsxs)(g.a,{sx:{marginTop:"4.5rem",marginBottom:"0.25rem"},children:["Use autocomplete field or data grid to pick columns ",Object(F.jsx)(C.a,{onClick:S,children:Object(F.jsx)(Ne.a,{})})]}),Object(F.jsx)(Be,{selectedDocument:t,comparisonColumns:n,comparisonColumnsError:r,index:o}),Object(F.jsx)("div",{style:{width:"100%"},children:Object(F.jsx)(Ke,{selectedDocument:t,handleColumnClick:l,comparisonColumns:n,index:o})})]}):Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)(g.a,{sx:{marginTop:"4.5rem",marginBottom:"0.25rem"},children:"Copy and Paste unformatted data"}),Object(F.jsx)(Ve,{unformattedData:d,index:o})]}),1===o&&Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)(g.a,{sx:{marginTop:u===q?"3.5rem":"4rem",marginBottom:"0.5rem"},children:"Enter partner info"}),Object(F.jsx)(Je,{}),Object(F.jsx)($e,{})]}),Object(F.jsx)(Qe,{isHelpModalOpen:j,handleOpenHelpModal:S}),Object(F.jsx)(Xe,{isHelpModalOpen:v,handleOpenHelpModal:y})]})},tt=Object(f.b)((function(e){return{user:e.user}}))((function(e){var t=e.user,n=e.selectedDocument,a=e.comparisonColumns,r=e.comparisonColumnsError,i=e.fileSource,o=e.index,c=e.handleColumnClick,s=e.setAllColumns,l=e.fileStructure,u=e.unformattedData;return Object(F.jsx)(et,{selectedDocument:n,comparisonColumns:a,comparisonColumnsError:r,fileSource:i,user:t,index:o,handleColumnClick:c,setAllColumns:s,fileStructure:l,unformattedData:u})})),nt=n(9),at=n(19),rt=function(e,t,n){return t===q?e.data.length&&e.data.length>10?e.data.slice(0,10):e.data:n.length&&n.length>10?n.split("\n").slice(0,10):n.split("\n")},it=function(e,t,n){var a=[];return e===q?a=a.concat(Object(at.a)(t)):e===G&&a.push("Unformatted Data ".concat(n)),a},ot=function(e){var t=e.isPreviewModalOpen,n=e.handleClosePreview,r=e.document,i=Object(a.useState)([]),o=Object(x.a)(i,2),c=o[0],s=o[1],u=r.selectedDocument1,d=r.selectedDocument2,m=r.comparisonColumns1,p=r.comparisonColumns2,j=r.fileStructure1,h=r.fileStructure2,b=r.unformattedData1,f=r.unformattedData2;return Object(a.useEffect)((function(){var e=rt(u,j,b),t=rt(d,h,f),n=[];n=it(j,m,1),n=[].concat(Object(at.a)(n),Object(at.a)(it(h,p,2)));for(var a=[],r=function(r){var i=n.reduce((function(n,a,i){return j===q&&m.indexOf(a)>-1&&i<m.length?Object(l.a)(Object(l.a)({},n),{},Object(nt.a)({},a,e[r][a]||null)):j===G&&0===i?Object(l.a)(Object(l.a)({},n),{},{"Unformatted Data 1":e[r]||null}):h===q&&p.indexOf(a)>-1&&(j===q&&i>=m.length||j===G&&i>0)?Object(l.a)(Object(l.a)({},n),{},Object(nt.a)({},a,t[r][a]||null)):h===G?Object(l.a)(Object(l.a)({},n),{},{"Unformatted Data 2":t[r]||null}):Object(l.a)({},n)}),{});a.push(i)},i=0;i<5;i++)r(i);s(a)}),[u,j,b,d,h,f,m,p]),Object(F.jsxs)(Ie.a,{open:t,onClose:n,children:[Object(F.jsx)(Ae.a,{children:"Results Preview"}),Object(F.jsxs)(Re.a,{dividers:!0,children:[Object(F.jsx)(Ue.a,{sx:{marginBottom:"1rem"},children:"Here's what your results will look like based on the columns you've chosen:"}),Object(F.jsx)(Le.a,{id:"formattedGridContainer",dataSource:c,showColumnLines:!0,columnAutoWidth:!0,showBorders:!0,width:"100%",height:"100%"})]})]})},ct=Object(f.b)((function(e){return{document:e.document}}))((function(e){var t=e.isPreviewModalOpen,n=e.handleClosePreview,a=e.document;return Object(F.jsx)(ot,{isPreviewModalOpen:t,handleClosePreview:n,document:a})})),st=n(335),lt=n(311),ut=n(312),dt=n(313),mt="UPDATE_USER",pt=function(e){return{type:mt,payload:e}},jt="FREE",ht="PREMIUM",bt={firstname:"",lastname:"",email:"",company:"",pinnedFileName:"",pinnedFileId:"",activeSubscription:!1,subscriptionType:"",freeComparisons:0},ft=function(e,t,n,a){if(e===q){if(!t||!t.data||!t.data.length)return!1;if(!n||!n.length)return!1}else if(e===G&&(!a||!a.length))return!1;return!0},xt=function(e){return e[0].toUpperCase()+e.substring(1)},Ot=function(e,t){return t===jt&&e>=3},gt=n(168),Ct=n(15),vt=n(77),wt=["className"],yt=Object(Ct.a)((function(e){var t=e.className,n=Object(gt.a)(e,wt);return Object(F.jsx)(D.a,Object(l.a)(Object(l.a)({},n),{},{classes:{popper:t}}))}))((function(e){var t=e.theme;return Object(nt.a)({},"& .".concat(vt.a.tooltip),{fontSize:t.typography.pxToRem(18)})})),St=function(e){var t=e.document,n=e.setAllColumns,r=e.handleColumnClick,i=e.handleUploadAndCompare,o=e.userFreeComparisons,c=e.userSubscriptionType,s=Object(a.useState)(!1),l=Object(x.a)(s,2),u=l[0],d=l[1],m=t.selectedDocument1,p=t.selectedDocument2,j=t.comparisonColumns1,h=t.comparisonColumns2,b=t.comparisonColumns1Error,f=t.comparisonColumns2Error,O=t.fileSource1,g=t.fileSource2,C=t.fileStructure1,v=t.fileStructure2,w=t.unformattedData1,y=t.unformattedData2,S=function(e,t,n,a,r,i,o,c,s,l){var u=ft(e,o,n,r),d=ft(t,c,a,i);if(e===q&&t===q&&n.length!==a.length)return!1;var m=!Ot(s,l);return u&&d&&m}(C,v,j,h,w,y,m,p,o,c);return Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)(st.a,{container:!0,spacing:2,direction:"row",justifyContent:"center",alignItems:"start",children:Object(F.jsxs)(st.a,{item:!0,container:!0,xs:8,p:0,sx:{height:"100%"},direction:"column",justifyContent:"start",alignItems:"center",children:[Object(F.jsx)(tt,{comparisonColumns:j,comparisonColumnsError:b,selectedDocument:m,fileSource:O,index:0,setAllColumns:n,handleColumnClick:r,fileStructure:C,unformattedData:w}),Object(F.jsx)(lt.a,{sx:{marginTop:"3rem",width:"100%",borderColor:"#1976D2"},variant:"middle"}),Object(F.jsx)(tt,{comparisonColumns:h,comparisonColumnsError:f,selectedDocument:p,fileSource:g,index:1,setAllColumns:n,handleColumnClick:r,fileStructure:v,unformattedData:y})]})}),Object(F.jsx)(st.a,{container:!0,justifyContent:"space-around",alignItems:"center",sx:{marginBottom:"4.5rem"},children:Object(F.jsxs)(st.a,{item:!0,container:!0,xs:4,direction:"column",justifyContent:"center",alignItems:"center",children:[Object(F.jsxs)(T.a,{variant:"extended","aria-label":"add",sx:{marginTop:"2rem",marginBottom:"1.5rem"},onClick:function(){d(!0)},children:[Object(F.jsx)(ut.a,{sx:{mr:1}}),"Preview Results"]}),Object(F.jsx)(yt,{arrow:!0,open:c!==ht&&o>=3,title:"You've used the ".concat(3," free comparisons.\n            For an unlimited amount of comparisons, upgrade your subscription in your profile page."),children:Object(F.jsxs)(T.a,{variant:"extended",color:"primary","aria-label":"add",disabled:!S,onClick:i,children:[Object(F.jsx)(dt.a,{sx:{mr:1}}),"Upload and Compare"]})})]})}),u&&Object(F.jsx)(ct,{isPreviewModalOpen:u,handleClosePreview:function(){d(!1)}})]})},Et="CHANGE_STEP",Tt=function(e){return{type:Et,payload:e}},Dt=function(e,t){var n=[],a=e.indexOf(t);return-1===a?n=[].concat(Object(at.a)(e),[t]):(n=Object(at.a)(e)).splice(a,1),n},Ft=function(e,t){-1===e.indexOf(t)&&e.push(t)},kt=function(e,t){var n=e.indexOf(t);n>-1&&e.splice(n,1)},Pt=Object(f.b)((function(e){return{activeStep:e.stepProgress.step,document:e.document,user:e.user}}),(function(e){return{showError:function(t){return e(K(t))},hideError:function(){return e(Q())},uploadDocumentSuccess:function(t){return e({type:P,payload:t})},setIsLoading:function(t){return e(ne(t))},changeStep:function(t){return e(Tt(t))},setAllColumns:function(t,n){return e(function(e,t){return{type:_,payload:e,index:t}}(t,n))},changeComparisonColumn:function(t,n){return e(W(t,n))},updateUser:function(t){return e(pt(t))}}}))((function(e){var t=e.activeStep,n=e.document,a=e.showError,r=e.hideError,i=e.uploadDocumentSuccess,o=e.setIsLoading,c=e.changeStep,s=e.setAllColumns,u=e.changeComparisonColumn,d=e.user,m=e.updateUser;return Object(F.jsx)(St,{document:n,setAllColumns:s,handleColumnClick:function(e,t){var a=n.comparisonColumns1,r=n.comparisonColumns2,i=[];i=Dt(0===t?a:r,e),u(i,t)},handleUploadAndCompare:function(){var e=n.selectedDocument1,s=n.selectedDocument2,u=n.comparisonColumns1,p=n.comparisonColumns2,j=n.fileStructure1,h=n.fileStructure2,f=n.unformattedData1,x=n.unformattedData2;o(!0);var O=new FormData;if(e&&e.name){var g=new Blob([JSON.stringify(e.data)],{type:"application/json"});O.append("sales_file1",g,e.name)}if(s&&s.name){var C=new Blob([JSON.stringify(s.data)],{type:"application/json"});O.append("sales_file2",C,s.name)}O.append("comparisonColumns1",u.join()),O.append("comparisonColumns2",p.join()),O.append("fileStructure1",j),O.append("fileStructure2",h),O.append("unformattedData1",f),O.append("unformattedData2",x),O.append("userSubscriptionType",d.subscriptionType),O.append("userFreeComparisons","".concat(d.freeComparisons)),O.append("userEmail",d.email),b.a.post("/api/v1/uploadfile",O,{headers:{Authorization:"Bearer ".concat(se())}}).then((function(e){r(),i(e.data),d.subscriptionType===jt&&m(Object(l.a)(Object(l.a)({},d),{},{freeComparisons:d.freeComparisons+1})),o(!1),c(t+=1)})).catch((function(e){console.log("err",e),o(!1),a("File upload and comparison failed."),setTimeout((function(){r()}),5e3)}))},userFreeComparisons:d.freeComparisons,userSubscriptionType:d.subscriptionType})})),Bt=n(336),Nt=function(e){var t=e.duplicatesData,n=e.comparisonColumns1,r=e.comparisonColumns2,i=e.fileStructure1,o=e.fileStructure2,c=e.partnerName,s=e.partnerCompany,l=e.user,u=Object(a.useRef)(null),d=function(){u.current.instance.showColumnChooser()};return Object(F.jsx)(st.a,{container:!0,justifyContent:"center",alignItems:"center",sx:{height:"100%",margin:"3rem 0 4.5rem 0",padding:"0 1rem"},children:Object(F.jsx)(st.a,{item:!0,container:!0,xs:12,md:12,p:0,sx:{height:"100%",width:"100%"},direction:"column",justifyContent:"start",alignItems:"center",children:Object(F.jsxs)(Le.a,{id:"gridContainer",dataSource:t,customizeColumns:function(e){var t=function(e){if(e&&e.firstname&&e.lastname){var t=xt(e.firstname),n=xt(e.lastname);return"".concat(t," ").concat(n)}return""}(l),a=function(e){return e?e.split(" ").map((function(e){return xt(e)})).join(" "):""}(s),u=function(e){return e?xt(e):""}(c);e.push({caption:"My accounts".concat(t?" (".concat(t,")"):""),isBand:!0,cssClass:"my-accounts"}),e.push({caption:"".concat(a?"".concat(a):"Partner"," accounts").concat(u?" (".concat(u,")"):""),isBand:!0,cssClass:"their-accounts"});var d=[];d=it(i,n,1),d=[].concat(Object(at.a)(d),Object(at.a)(it(o,r,2)));for(var m=i===q?n.length:1,p=2;p<e.length-1;p++)d[p-2]===e[p].caption&&p<m+2?(e[p].ownerBand=e.length-2,e[p].cssClass="my-accounts"):d[p-2]===e[p].caption&&(e[p].ownerBand=e.length-1,e[p].cssClass="their-accounts")},showColumnLines:!0,allowColumnReordering:!0,allowColumnResizing:!0,columnAutoWidth:!0,showBorders:!0,width:"100%",height:"100%",ref:u,children:[Object(F.jsx)(_e.ColumnChooser,{mode:"select",title:"Edit View",enabled:!0,allowSearch:!0,height:500,width:350}),Object(F.jsx)(_e.Column,{dataField:"accuracy",groupIndex:0,name:"Accuracy Level",calculateGroupValue:function(e){switch(e.accuracy){case 1:return"aaa;Low";case 2:return"bbb;Medium";case 3:return"ccc;High"}},groupCellRender:function(e){var t=e.column,n=e.value.split(";")[1];return Object(F.jsx)("div",{children:t.caption+": "+n})},showInColumnChooser:!1,sortOrder:"desc",visible:!1}),t&&t[0]&&Array.from(Object.keys(t[0])).map((function(e,t){return Object(F.jsx)(_e.Column,{dataField:e,caption:e.replace("--2",""),visible:0!==t,showInColumnChooser:"accuracy"!==e},t)})),Object(F.jsx)(_e.Paging,{defaultPageSize:25}),Object(F.jsx)(_e.Pager,{visible:!0,displayMode:"full",showPageSizeSelector:!1,showInfo:!0,showNavigationButtons:!0}),Object(F.jsxs)(_e.Toolbar,{children:[Object(F.jsx)(_e.Item,{location:"center",locateInMenu:"never",render:function(){return Object(F.jsx)("div",{className:"toolbar-label",children:Object(F.jsxs)("b",{children:[t.length," Matches"]})})}}),Object(F.jsx)(_e.Item,{name:"columnChooserButton",component:function(){return Object(F.jsx)(Bt.a,{variant:"outlined",onClick:d,children:"edit view"})}})]})]})})})},It=Object(f.b)((function(e){return{duplicatesData:e.document.duplicatesData,comparisonColumns1:e.document.comparisonColumns1,comparisonColumns2:e.document.comparisonColumns2,fileStructure1:e.document.fileStructure1,fileStructure2:e.document.fileStructure2,partnerName:e.document.partnerName,partnerCompany:e.document.partnerCompany,user:e.user}}))((function(e){var t=e.duplicatesData,n=e.comparisonColumns1,a=e.comparisonColumns2,r=e.fileStructure1,i=e.fileStructure2,o=e.partnerName,c=e.partnerCompany,s=e.user;return Object(F.jsx)(Nt,{duplicatesData:t,comparisonColumns1:n,comparisonColumns2:a,fileStructure1:r,fileStructure2:i,partnerName:o,partnerCompany:c,user:s})})),At=n(314),Rt=n(315),Ut=function(e){var t=e.duplicatesData,n=e.template,r=e.handleTemplateChange,i=e.handleCopyEmailTemplate,o=Object(a.useRef)(null);return Object(F.jsx)(st.a,{container:!0,spacing:2,justifyContent:"center",alignItems:"center",sx:{height:"100%",width:"100%",marginTop:"3.5rem"},children:Object(F.jsxs)(st.a,{item:!0,container:!0,xs:8,sx:{height:"100%",width:"100%"},direction:"column",justifyContent:"start",alignItems:"center",children:[Object(F.jsx)(Ee.a,{id:"email-template-multiline",label:"Modify and then Copy/Paste this email template",multiline:!0,ref:o,rows:9,defaultValue:n,variant:"filled",sx:{width:"100%"},onChange:r}),Object(F.jsxs)(T.a,{variant:"extended","aria-label":"add",sx:{marginTop:"2.5rem"},onClick:i,children:[Object(F.jsx)(At.a,{sx:{mr:1}}),"Copy Template"]}),Object(F.jsxs)(T.a,{variant:"extended","aria-label":"add",sx:{marginTop:"2.5rem"},onClick:function(){ue(t)},children:[Object(F.jsx)(Rt.a,{sx:{mr:1}}),"Download Results"]})]})})},_t="UPDATE_EMAIL_TEMPLATE",Lt=Object(f.b)((function(e){return{duplicatesData:e.document.duplicatesData,template:e.emailTemplate.template}}),(function(e){return{updateEmailTemplate:function(t){return e({type:_t,payload:t})},showSuccess:function(t){return e(X(t))},hideSuccess:function(){return e(ee())},showError:function(t){return e(K(t))},hideError:function(){return e(Q())}}}))((function(e){var t=e.duplicatesData,n=e.template,a=e.updateEmailTemplate,r=e.showSuccess,i=e.hideSuccess,o=e.showError,c=e.hideError,s=function(){var e=Object(v.a)(y.a.mark((function e(){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,navigator.clipboard.writeText(n);case 3:c(),r("Copied email template"),setTimeout((function(){i()}),5e3),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),o("Failed to copy email template"),setTimeout((function(){c()}),5e3);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();return Object(F.jsx)(Ut,{duplicatesData:t,template:n,handleTemplateChange:function(e){a(e.target.value)},handleCopyEmailTemplate:s})})),Mt=n(342),Ht=function(e){var t=e.steps,n=e.activeStep,a=e.handleBack,r=e.handleNext;return Object(F.jsxs)(Mt.a,{sx:{position:"fixed",bottom:0,left:0,right:0,zIndex:1510,display:"flex",flexDirection:"row",padding:"0.75rem"},elevation:3,children:[Object(F.jsx)(Bt.a,{disabled:0===n,onClick:a,sx:{mr:1},children:"Back"}),Object(F.jsx)(u.a,{sx:{flex:"1 1 auto"}}),Object(F.jsx)(Bt.a,{disabled:n===t.length-1,onClick:r,children:"Next"})]})},Gt=Object(f.b)((function(e){return{activeStep:e.stepProgress.step}}),(function(e){return{changeStep:function(t){return e(Tt(t))}}}))((function(e){var t=e.steps,n=e.activeStep,a=e.changeStep;return Object(F.jsx)(Ht,{activeStep:n,steps:t,handleNext:function(){a(n+=1)},handleBack:function(){a(n-=1)}})})),qt=["Upload document","View results","Email customers"],zt=function(e){var t=e.activeStep,n=e.changeStep;e.user;return Object(F.jsxs)(F.Fragment,{children:[Object(F.jsxs)(u.a,{sx:{width:"100%",height:"100%",marginTop:"3.5vh"},children:[Object(F.jsx)(d.a,{nonLinear:!0,activeStep:t,sx:{marginLeft:"25%",marginRight:"25%"},children:qt.map((function(e,t){return Object(F.jsx)(m.a,Object(l.a)(Object(l.a)({},{}),{},{children:Object(F.jsx)(p.a,Object(l.a)(Object(l.a)({onClick:function(){return n(t)}},{}),{},{children:e}))}),e)}))}),0===t&&Object(F.jsx)(r.a.Fragment,{children:Object(F.jsx)(j.a,{sx:{height:"100%",paddingBottom:"2rem"},children:Object(F.jsx)(Pt,{})})}),1===t&&Object(F.jsx)(r.a.Fragment,{children:Object(F.jsx)(j.a,{sx:{height:"100%",width:"100%",maxWidth:"100%"},maxWidth:!1,children:Object(F.jsx)(It,{})})}),2===t&&Object(F.jsx)(r.a.Fragment,{children:Object(F.jsx)(j.a,{sx:{height:"100%",width:"100%"},children:Object(F.jsx)(Lt,{})})})]}),Object(F.jsx)(Gt,{steps:qt})]})},Wt=Object(f.b)((function(e){return{activeStep:e.stepProgress.step,user:e.user}}),(function(e){return{changeStep:function(t){return e(Tt(t))}}}))((function(e){var t=e.activeStep,n=e.changeStep,a=e.user;return Object(F.jsx)(zt,{activeStep:t,changeStep:n,user:a})})),Vt=n(52),Zt=n(68),Jt=n(316),Yt=function(){return Object(F.jsxs)(T.a,{variant:"extended",color:"primary",type:"submit",children:[Object(F.jsx)(Jt.a,{sx:{mr:1}}),"Checkout"]})},$t="FREE",Kt="PREMIUM",Qt=function(e){var t=e.onSubmit,n=Object(Zt.a)({initialValues:{email:"",password:"",confirmPassword:"",firstName:"",lastName:"",company:"",subscriptionType:$t},validate:function(e){var t={};return e.password?e.password.length<8&&(t.password="Must be 8 characters or more"):t.password="Required",e.confirmPassword?e.confirmPassword!==e.password&&(t.confirmPassword="Must match password"):t.confirmPassword="Required",e.email?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(e.email)||(t.email="Invalid email address"):t.email="Required",t},onSubmit:t}),a=n.values,r=n.errors,i=n.touched,o=n.handleBlur,c=n.handleChange,s=n.handleSubmit,l=n.setFieldValue,d=!!r.email||!!r.password||!!r.confirmPassword||!a.email||!a.password||!a.confirmPassword;return Object(F.jsx)(F.Fragment,{children:Object(F.jsx)(u.a,{sx:{width:"100%",marginTop:"6.5vh"},children:Object(F.jsx)(st.a,{container:!0,spacing:2,justifyContent:"center",sx:{height:"100%"},children:Object(F.jsxs)(st.a,{item:!0,container:!0,xs:6,p:0,sx:{height:"100%"},direction:"column",alignItems:"center",children:[Object(F.jsx)(O.a,{variant:"h5",sx:{marginBottom:"2rem"},children:"Register"}),Object(F.jsxs)("form",{style:{width:"100%"},onSubmit:s,children:[Object(F.jsx)(Ee.a,{required:!0,id:"standard-basic",label:"Email",name:"email",variant:"standard",sx:{width:"100%",marginBottom:"1.5rem"},error:i.email&&!!r.email,helperText:i.email&&r.email?r.email:null,onBlur:o,onChange:c,value:a.email}),Object(F.jsx)(Ee.a,{required:!0,id:"standard-basic",label:"Password",name:"password",variant:"standard",type:"password",sx:{width:"100%",marginBottom:"1.5rem"},error:i.password&&!!r.password,helperText:i.password&&r.password?r.password:null,onBlur:o,onChange:c,value:a.password}),Object(F.jsx)(Ee.a,{required:!0,id:"standard-basic",label:"Confirm Password",name:"confirmPassword",variant:"standard",type:"password",sx:{width:"100%",marginBottom:"1.5rem"},error:i.confirmPassword&&!!r.confirmPassword,helperText:i.confirmPassword&&r.confirmPassword?r.confirmPassword:null,onBlur:o,onChange:c,value:a.confirmPassword}),Object(F.jsx)(Ee.a,{id:"standard-basic",label:"First Name",name:"firstName",variant:"standard",sx:{width:"100%",marginBottom:"1.5rem"},onBlur:o,onChange:c,value:a.firstName}),Object(F.jsx)(Ee.a,{id:"standard-basic",label:"Last Name",name:"lastName",variant:"standard",sx:{width:"100%",marginBottom:"1.5rem"},onBlur:o,onChange:c,value:a.lastName}),Object(F.jsx)(Ee.a,{id:"standard-basic",label:"Company",name:"company",variant:"standard",sx:{width:"100%",marginBottom:"3rem"},onBlur:o,onChange:c,value:a.company}),Object(F.jsxs)(xe.a,{sx:{marginBottom:"2rem"},children:[Object(F.jsx)(g.a,{sx:{marginBottom:"1rem"},children:"What type of subscription do you want?"}),Object(F.jsxs)(Oe.a,{"aria-labelledby":"demo-controlled-radio-buttons-group",name:"subscription-radio-buttons-group",value:a.subscriptionType,onChange:function(e,t){return l("subscriptionType",t)},children:[Object(F.jsx)(ge.a,{value:$t,control:Object(F.jsx)(Ce.a,{checked:a.subscriptionType===$t}),label:"Free: Sign up now to be able to compare 10 lists",name:"free"}),Object(F.jsx)(ge.a,{value:Kt,control:Object(F.jsx)(Ce.a,{checked:a.subscriptionType===Kt}),label:"Premium: You can compare an unlimited amount of lists per month",name:"premium"})]})]}),Object(F.jsx)(st.a,{container:!0,spacing:2,justifyContent:"center",alignItems:"center",children:Object(F.jsx)(st.a,{item:!0,container:!0,xs:10,p:0,direction:"column",justifyContent:"center",alignItems:"center",children:a.subscriptionType===Kt?Object(F.jsx)(F.Fragment,{children:Object(F.jsx)(Yt,{})}):Object(F.jsx)(T.a,{variant:"extended","aria-label":"add",sx:{marginLeft:"auto",marginRight:"auto"},type:"submit",disabled:d,children:"sign up"})})})]}),Object(F.jsxs)(O.a,{sx:{marginTop:"2rem",marginBottom:"3rem"},children:["Already have an account? ",Object(F.jsx)(Vt.b,{className:"auth-page-link",to:"/",children:"Sign in"})]})]})})})})},Xt=n(44),en=Object(f.b)(null,(function(e){return{showError:function(t){return e(K(t))},hideError:function(){return e(Q())},setIsLoading:function(t){return e(ne(t))}}}))((function(e){var t=e.setIsLoading,n=e.showError,a=e.hideError,r=Object(Xt.g)(),i=function(e,r){console.log("err",e),t(!1),n(r),setTimeout((function(){a()}),5e3)};return Object(F.jsx)(Qt,{onSubmit:function(e){t(!0);var n=new FormData;n.append("email",e.email),n.append("password",e.password),n.append("firstname",e.firstName),n.append("lastname",e.lastName),n.append("company",e.company),n.append("subscriptionType",e.subscriptionType);b.a.post("/api/v1/register",n,{headers:{"Content-Type":"multipart/form-data"}}).then((function(){var t;e.subscriptionType===ht&&(t=e.email,b.a.post("/api/v1/create-checkout-session",{customerEmail:t}).then((function(e){e&&e.data&&(window.location.href=e.data.url)})).catch((function(e){return i(e,"There was a problem with accessing the payments page")})))})).then((function(){a(),t(!1),e.subscriptionType===jt&&r.push("/profile")})).catch((function(e){return i(e,"Registration failed")}))}})})),tn=n(350),nn=n(351),an=n(317),rn=function(e){var t=e.onClose,n=e.onSubmit,a=Object(Zt.a)({initialValues:{email:""},validate:function(e){var t={};return/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(e.email)||(t.email="Invalid email address"),t},onSubmit:n}),r=a.values,i=a.errors,o=a.touched,c=a.handleBlur,s=a.handleChange,l=a.handleSubmit;return Object(F.jsxs)(u.a,{sx:{width:"100%",height:"100%",padding:"0 0 3rem 0"},children:[Object(F.jsx)(tn.a,{sx:{position:"relative",marginBottom:"3rem"},children:Object(F.jsx)(nn.a,{children:Object(F.jsx)(C.a,{edge:"end",color:"inherit",onClick:t,"aria-label":"close",children:Object(F.jsx)(an.a,{})})})}),Object(F.jsx)(st.a,{container:!0,spacing:2,justifyContent:"center",alignItems:"center",sx:{height:"100%",width:"100%"},children:Object(F.jsx)(st.a,{item:!0,container:!0,xs:10,p:0,sx:{height:"100%"},direction:"column",justifyContent:"center",alignItems:"center",children:Object(F.jsxs)("form",{onSubmit:l,children:[Object(F.jsx)(O.a,{variant:"h5",sx:{marginBottom:"2rem"},children:"Join the waitlist for Salesdap"}),Object(F.jsx)(Ee.a,{label:"email address",variant:"standard",name:"email",sx:{width:"100%"},error:o.email&&!!i.email,helperText:i.email?i.email:null,onBlur:c,onChange:s,value:r.email}),Object(F.jsx)(T.a,{variant:"extended","aria-label":"add",sx:{marginTop:"2.5rem"},type:"submit",children:"submit"})]})})})]})},on=Object(f.b)(null,(function(e){return{showError:function(t){return e(K(t))},hideError:function(){return e(Q())},showSuccess:function(t){return e(X(t))},hideSuccess:function(){return e(ee())},setIsLoading:function(t){return e(ne(t))}}}))((function(e){var t=e.onClose,n=e.showError,a=e.hideError,r=e.showSuccess,i=e.hideSuccess,o=e.setIsLoading;return Object(F.jsx)(rn,{onSubmit:function(e){o(!0);var c=new FormData;c.append("email",e.email);b.a.post("/api/v1/email",c,{headers:{"Content-Type":"multipart/form-data"}}).then((function(){a(),o(!1),t(),r("Successfully registered to waitlist!"),setTimeout((function(){i()}),5e3)})).catch((function(e){console.log("err",e),o(!1),n("Waitlist registration failed. Please try again."),setTimeout((function(){a()}),5e3)}))},onClose:t})})),cn=function(e){var t=e.onSubmit,n=Object(a.useState)(!0),r=Object(x.a)(n,2),i=r[0],o=r[1],c=function(){o(!1)},s=Object(Zt.a)({initialValues:{email:"",password:""},validate:function(e){var t={};return e.password||(t.password="Required"),e.email?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(e.email)||(t.email="Invalid email address"):t.email="Required",t},onSubmit:t}),l=s.values,d=s.errors,m=s.touched,p=s.handleBlur,j=s.handleChange,h=s.handleSubmit,b=!!d.email||!!d.password||!l.email||!l.password;return Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)(u.a,{sx:{width:"100%",marginTop:"6.5vh"},children:Object(F.jsx)(st.a,{container:!0,spacing:2,justifyContent:"center",sx:{height:"100%"},children:Object(F.jsxs)(st.a,{item:!0,container:!0,xs:6,p:0,sx:{height:"100%"},direction:"column",alignItems:"center",children:[Object(F.jsx)(O.a,{variant:"h5",sx:{marginBottom:"2rem"},children:"Login"}),Object(F.jsxs)("form",{onSubmit:h,style:{width:"100%"},children:[Object(F.jsx)(Ee.a,{required:!0,id:"standard-basic",label:"Email",name:"email",variant:"standard",sx:{width:"100%",marginBottom:"1.5rem"},error:m.email&&!!d.email,helperText:m.email&&d.email?d.email:null,onBlur:p,onChange:j,value:l.email}),Object(F.jsx)(Ee.a,{required:!0,id:"standard-basic",label:"Password",name:"password",variant:"standard",type:"password",sx:{width:"100%"},error:m.password&&!!d.password,helperText:m.password&&d.password?d.password:null,onBlur:p,onChange:j,value:l.password}),Object(F.jsx)(st.a,{container:!0,spacing:2,justifyContent:"center",alignItems:"center",children:Object(F.jsx)(st.a,{item:!0,container:!0,xs:6,p:0,direction:"column",justifyContent:"center",alignItems:"center",children:Object(F.jsx)(T.a,{variant:"extended","aria-label":"add",sx:{marginTop:"2.5rem",marginLeft:"auto",marginRight:"auto"},type:"submit",disabled:b,children:"Submit"})})})]}),Object(F.jsxs)(O.a,{sx:{marginTop:"2rem"},children:["Don't have an account?  ",Object(F.jsx)(Vt.b,{className:"auth-page-link",to:"/register",children:"Sign up now!"})]}),Object(F.jsxs)(O.a,{sx:{marginTop:"0.5rem",marginBottom:"3rem"},children:["Forgot your password?  ",Object(F.jsx)(Vt.b,{className:"auth-page-link",to:"/forgot-password",children:"Reset your password"})]})]})})}),Object(F.jsx)(Ie.a,{open:i,onClose:c,children:Object(F.jsx)(on,{onClose:c})})]})};b.a.defaults.withCredentials=!0;var sn=Object(f.b)(null,(function(e){return{showError:function(t){return e(K(t))},hideError:function(){return e(Q())},setIsLoading:function(t){return e(ne(t))},updateUser:function(t){return e(pt(t))}}}))((function(e){var t=e.showError,n=e.hideError,r=e.setIsLoading,i=e.updateUser,o=Object(Xt.g)(),c=function(e){var t=e.data,a=t.token,c=t.email;ce(a),n(),r(!1),e.data&&c&&(i(e.data),o.push("/home"))},s=function(e){console.log("err",e),r(!1),t("Wrong email or password")};Object(a.useEffect)((function(){r(!0),b.a.post("/api/v1/refresh_token",null,{withCredentials:!0}).then(c).catch(s)}),[]);return Object(F.jsx)(cn,{onSubmit:function(e){r(!0);var t=new FormData;t.append("email",e.email),t.append("password",e.password);b.a.post("/api/v1/login",t,{headers:{"Content-Type":"multipart/form-data"},withCredentials:!0}).then(c).catch(s)}})})),ln=n(318),un=function(e){var t=e.user,n=e.onSubmit,a=Object(Zt.a)({initialValues:{firstName:t.firstname,lastName:t.lastname,email:t.email,company:t.company},validate:function(e){var t={};return e.email?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(e.email)||(t.email="Invalid email address"):t.email="Required",t},onSubmit:n}),r=a.values,i=a.errors,o=a.touched,c=a.handleBlur,s=a.handleChange,l=a.handleSubmit;return Object(F.jsxs)("form",{style:{width:"90%"},onSubmit:function(e){return l(e)},children:[Object(F.jsx)(Ee.a,{id:"standard-basic",label:"First Name",name:"firstName",variant:"standard",sx:{width:"100%",marginBottom:"1.5rem"},onChange:s,value:r.firstName}),Object(F.jsx)(Ee.a,{id:"standard-basic",label:"Last Name",name:"lastName",variant:"standard",sx:{width:"100%",marginBottom:"1.5rem"},onChange:s,value:r.lastName}),Object(F.jsx)(Ee.a,{id:"standard-basic",label:"Email",name:"email",variant:"standard",sx:{width:"100%",marginBottom:"1.5rem"},error:o.email&&!!i.email,helperText:o.email&&i.email?i.email:null,onBlur:c,onChange:s,value:r.email}),Object(F.jsx)(Ee.a,{id:"standard-basic",label:"Company",name:"company",variant:"standard",sx:{width:"100%",marginBottom:"1.5rem"},onChange:s,value:r.company}),Object(F.jsx)(Bt.a,{type:"submit",variant:"contained",sx:{marginBottom:"2.5rem"},children:"Save Changes"})]})},dn=Object(f.b)((function(e){return{user:e.user}}),(function(e){return{showError:function(t){return e(K(t))},hideError:function(){return e(Q())},setIsLoading:function(t){return e(ne(t))},updateUser:function(t){return e(pt(t))}}}))((function(e){var t=e.user,n=e.setIsLoading,a=e.showError,r=e.hideError,i=e.updateUser;return Object(F.jsx)(un,{user:t,onSubmit:function(e){n(!0);var t=new FormData;t.append("email",e.email),t.append("firstname",e.firstName),t.append("lastname",e.lastName),t.append("company",e.company);var o={headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer ".concat(se())}};return b.a.post("/api/v1/edit-profile",t,o).then((function(e){i(e.data),r(),n(!1)})).catch((function(e){return function(e,t){console.log("err",e),n(!1),a(t),setTimeout((function(){r()}),7500)}(e,"Profile update failed")}))}})})),mn=function(e){var t=e.user,n=e.validateFileSelection,r=e.handlePinnedFileClick,i=e.handleManageSubscriptionClick,o=e.handleCreateCheckoutSession,c=Object(a.useRef)(null),s=Object(a.useState)(!1),l=Object(x.a)(s,2),d=l[0],m=l[1],p=Object(a.useState)(!1),j=Object(x.a)(p,2),h=j[0],b=j[1];return Object(a.useEffect)((function(){t&&!0===t.activeSubscription&&b(!0)}),[t,d]),Object(F.jsx)(F.Fragment,{children:Object(F.jsx)(u.a,{sx:{width:"100%",marginTop:"3.5vh"},children:Object(F.jsx)(st.a,{container:!0,spacing:2,justifyContent:"center",alignItems:"center",sx:{height:"100%"},children:Object(F.jsx)(st.a,{item:!0,container:!0,xs:8,p:0,sx:{height:"100%"},direction:"column",justifyContent:"start",alignItems:"center",children:Object(F.jsxs)(Mt.a,{elevation:3,sx:{width:"100%",padding:"3rem 0 3rem 3rem",margin:"3rem auto 3rem auto"},children:[Object(F.jsxs)(O.a,{variant:"h5",sx:{marginBottom:"2rem"},children:["Profile ",Object(F.jsx)(C.a,{onClick:function(){m(!d)},children:Object(F.jsx)(ln.a,{})})]}),d?Object(F.jsx)(dn,{}):Object(F.jsxs)(F.Fragment,{children:[Object(F.jsxs)(O.a,{variant:"subtitle1",sx:{marginBottom:"2rem"},children:["Name: ",t.firstname," ",t.lastname]}),Object(F.jsxs)(O.a,{variant:"subtitle1",sx:{marginBottom:"2rem"},children:["Email: ",t.email]}),Object(F.jsxs)(O.a,{variant:"subtitle1",sx:{marginBottom:"2rem"},children:["Company: ",t.company]})]}),Object(F.jsxs)(O.a,{variant:"subtitle1",sx:{marginBottom:"2rem"},children:["Subscription Type: ",t.subscriptionType]}),Object(F.jsxs)(O.a,{variant:"subtitle1",sx:{marginBottom:"2rem"},children:["Paid Subscription: ",t.activeSubscription?"Yes":"No"]}),Object(F.jsx)(O.a,{variant:"subtitle1",children:"Pinned File:"}),Object(F.jsx)(je.a,{onClick:r,icon:Object(F.jsx)(he.a,{}),label:t.pinnedFileName}),Object(F.jsxs)(st.a,{item:!0,container:!0,xs:6,p:0,direction:"column",justifyContent:"start",alignItems:"start",children:[Object(F.jsx)(yt,{arrow:!0,placement:"top-start",open:!t.pinnedFileId,title:"Upload and 'pin' a list that you will regularly be comparing to partner account lists",children:Object(F.jsxs)(T.a,{variant:"extended","aria-label":"add",sx:{marginTop:"2.5rem",minWidth:"208px"},onClick:function(){c&&c.current&&c.current.click()},children:[Object(F.jsx)(dt.a,{sx:{mr:1}}),"Select Pinned File"]})}),Object(F.jsx)("input",{type:"file",ref:c,className:"file-input",onChange:n,name:"sales_file"}),h?Object(F.jsxs)(T.a,{variant:"extended","aria-label":"add",sx:{marginTop:"2.5rem",minWidth:"208px"},onClick:i,children:[Object(F.jsx)(Jt.a,{sx:{mr:1}}),"Manage Subscription"]}):Object(F.jsxs)(T.a,{variant:"extended","aria-label":"add",sx:{marginTop:"2.5rem",minWidth:"208px"},onClick:function(){return o(t.email)},children:[Object(F.jsx)(Jt.a,{sx:{mr:1}}),"Upgrade Subscription"]})]})]})})})})})},pn=Object(f.b)((function(e){return{user:e.user}}),(function(e){return{showError:function(t){return e(K(t))},hideError:function(){return e(Q())},setIsLoading:function(t){return e(ne(t))},pinFileSuccess:function(t){return e(V(t))},updateUser:function(t){return e(pt(t))}}}))((function(e){var t=e.user,n=e.setIsLoading,r=e.showError,i=e.hideError,o=e.pinFileSuccess,c=e.updateUser;Object(a.useEffect)((function(){var e=function(){var e=Object(v.a)(y.a.mark((function e(){var a,r;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&t.email){e.next=9;break}if(n(!0),a=new URLSearchParams(window.location.search),!(r=a.get("session_id"))){e.next=7;break}return e.next=7,m(r);case 7:return e.next=9,p();case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[]);var s=function(){var e=Object(v.a)(y.a.mark((function e(){var a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n(!0),e.next=4,me(t.pinnedFileId);case 4:a=e.sent,n(!1),de(a.data,t.pinnedFileName),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),u(e.t0,"Failed to download pinned file");case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),l=function(e){n(!0);var a=new FormData;e&&e.name&&(a.append("sales_file",e,e.name),a.append("email",t.email)),b.a.post("/api/v1/pinfile",a,{headers:{Authorization:"Bearer ".concat(se())}}).then((function(e){o(e.data),i(),n(!1)})).catch((function(e){return u(e,"Failed to pin file")}))},u=function(e,t){console.log("err",e),n(!1),r(t),setTimeout((function(){i()}),7500)},d=function(e){var t=e.data,a=t.token,r=t.email;ce(a),i(),n(!1),e.data&&r&&c(e.data)},m=function(e){return b.a.post("/api/v1/order-success",{sessionId:e}).catch((function(){r("Problem with user registration")}))},p=function(){return b.a.post("/api/v1/refresh_token",null,{withCredentials:!0}).then(d).catch((function(e){return u(e,"failed to load profile")}))};return Object(F.jsx)(mn,{user:t,validateFileSelection:function(e){var t=e&&e.target&&e.target.files?e.target.files[0]:null;!(!t||!t.name)&&re(t.name)?(i(),l(t)):r("Invalid file type. Only pin .xls, .xlsx, or .csv")},handlePinnedFileClick:s,handleManageSubscriptionClick:function(){n(!0),b.a.post("/api/v1/create-portal-session",{email:t.email,isComingFromProfilePage:!0}).then((function(e){n(!1),i(),e&&e.data&&(window.location.href=e.data.url)})).catch((function(e){return u(e,"There was a problem with connecting with the subscription portal")}))},handleCreateCheckoutSession:function(e){return b.a.post("/api/v1/create-checkout-session",{customerEmail:e,isComingFromProfilePage:!0}).then((function(e){i(),n(!1),e&&e.data&&(window.location.href=e.data.url)})).catch((function(e){return u(e,"Failed to create payment session")}))}})})),jn=function(e){var t=e.onSubmit,n=Object(Zt.a)({initialValues:{email:"",password:"",confirmPassword:""},validate:function(e){var t={};return e.email||(t.email="Required"),e.password?e.password.length<8&&(t.password="Must be 8 characters or more"):t.password="Required",e.confirmPassword?e.confirmPassword!==e.password&&(t.confirmPassword="Must match password"):t.confirmPassword="Required",t},onSubmit:t}),a=n.values,r=n.errors,i=n.touched,o=n.handleBlur,c=n.handleChange,s=n.handleSubmit,l=!!r.email||!!r.password||!!r.confirmPassword||!a.email||!a.password||!a.confirmPassword;return Object(F.jsx)(F.Fragment,{children:Object(F.jsx)(u.a,{sx:{width:"100%",marginTop:"6.5vh"},children:Object(F.jsx)(st.a,{container:!0,spacing:2,justifyContent:"center",sx:{height:"100%"},children:Object(F.jsxs)(st.a,{item:!0,container:!0,xs:6,p:0,sx:{height:"100%"},direction:"column",alignItems:"center",children:[Object(F.jsx)(O.a,{variant:"h5",sx:{marginBottom:"2rem"},children:"Reset your password"}),Object(F.jsxs)("form",{onSubmit:s,style:{width:"100%"},children:[Object(F.jsx)(Ee.a,{required:!0,id:"standard-basic",label:"Email",name:"email",variant:"standard",sx:{width:"100%",marginBottom:"1.5rem"},error:i.email&&!!r.email,helperText:i.email&&r.email?r.email:null,onBlur:o,onChange:c,value:a.email}),Object(F.jsx)(Ee.a,{required:!0,id:"standard-basic",label:"Password",name:"password",variant:"standard",type:"password",sx:{width:"100%",marginBottom:"1.5rem"},error:i.password&&!!r.password,helperText:i.password&&r.password?r.password:null,onBlur:o,onChange:c,value:a.password}),Object(F.jsx)(Ee.a,{required:!0,id:"standard-basic",label:"Confirm Password",name:"confirmPassword",variant:"standard",type:"password",sx:{width:"100%"},error:i.confirmPassword&&!!r.confirmPassword,helperText:i.confirmPassword&&r.confirmPassword?r.confirmPassword:null,onBlur:o,onChange:c,value:a.confirmPassword}),Object(F.jsx)(st.a,{container:!0,spacing:2,justifyContent:"center",alignItems:"center",children:Object(F.jsx)(st.a,{item:!0,container:!0,xs:8,p:0,direction:"column",justifyContent:"center",alignItems:"center",children:Object(F.jsx)(T.a,{variant:"extended","aria-label":"add",sx:{margin:"2.5rem auto 3rem auto"},type:"submit",disabled:l,children:"Reset Password"})})})]})]})})})})},hn=Object(f.b)(null,(function(e){return{showError:function(t){return e(K(t))},hideError:function(){return e(Q())},setIsLoading:function(t){return e(ne(t))}}}))((function(e){var t=e.setIsLoading,n=e.showError,r=e.hideError,i=Object(Xt.g)(),o=Object(Xt.i)();Object(a.useEffect)((function(){b.a.post("/api/v1/resetpassword",{token:o.token}).catch((function(e){i.push("/")}))}),[o,i]);return Object(F.jsx)(jn,{onSubmit:function(e){var a=new FormData;a.append("email",e.email),a.append("password",e.password);t(!0),b.a.post("/api/v1/updatepassword",a,{headers:{"Content-Type":"multipart/form-data"}}).then((function(){r(),t(!1),i.push("/")})).catch((function(e){console.log("err",e),t(!1),n("Password reset failed. Please try again."),setTimeout((function(){r()}),5e3)}))}})})),bn=function(e){var t=e.onSubmit,n=Object(Zt.a)({initialValues:{email:""},validate:function(e){var t={};return e.email||(t.email="Required"),t},onSubmit:t}),a=n.values,r=n.errors,i=n.touched,o=n.handleBlur,c=n.handleChange,s=n.handleSubmit,l=!!r.email||!a.email;return Object(F.jsx)(F.Fragment,{children:Object(F.jsx)(u.a,{sx:{width:"100%",marginTop:"6.5vh"},children:Object(F.jsx)(st.a,{container:!0,spacing:2,justifyContent:"center",sx:{height:"100%"},children:Object(F.jsxs)(st.a,{item:!0,container:!0,xs:6,p:0,sx:{height:"100%"},direction:"column",alignItems:"center",children:[Object(F.jsx)(O.a,{variant:"h5",sx:{marginBottom:"2rem"},children:"Forgot my password"}),Object(F.jsx)(O.a,{variant:"subtitle1",sx:{marginBottom:"1.5rem",width:"80%"},children:"Enter your email, and then you'll receive a verification code at that address. Use that code to reset your password."}),Object(F.jsxs)("form",{onSubmit:s,style:{width:"100%"},children:[Object(F.jsx)(Ee.a,{required:!0,id:"standard-basic",label:"Email",name:"email",variant:"standard",sx:{width:"100%"},error:i.email&&!!r.email,helperText:r.email?r.email:null,onBlur:o,onChange:c,value:a.email}),Object(F.jsx)(st.a,{container:!0,spacing:2,justifyContent:"center",alignItems:"center",children:Object(F.jsx)(st.a,{item:!0,container:!0,xs:12,p:0,direction:"column",justifyContent:"center",alignItems:"center",children:Object(F.jsx)(T.a,{variant:"extended","aria-label":"add",sx:{margin:"2.5rem auto 3rem auto"},type:"submit",disabled:l,children:"Send Password Reset Email"})})})]})]})})})})},fn=Object(f.b)(null,(function(e){return{showError:function(t){return e(K(t))},hideError:function(){return e(Q())},setIsLoading:function(t){return e(ne(t))}}}))((function(e){var t=e.setIsLoading,n=e.showError,a=e.hideError;return Object(F.jsx)(bn,{onSubmit:function(e){var r=new FormData;r.append("email",e.email);t(!0),b.a.post("/api/v1/forgotpassword",r,{headers:{"Content-Type":"multipart/form-data"}}).then((function(){t(!1),a()})).catch((function(e){console.log("err",e),t(!1),n("Wrong email or password")}))}})})),xn=function(e){var t=Object(Xt.h)(),n=e.user;return n&&n.email?Object(F.jsx)(Xt.b,Object(l.a)({},e)):Object(F.jsx)(Xt.a,{to:{pathname:"/",state:{from:t}}})},On=n(174),gn=n(332),Cn=n(319),vn=n(320),wn=function(e){var t=e.user,n=e.handleLogout,r=e.hideError,i=a.useState(null),o=Object(x.a)(i,2),c=o[0],s=o[1],l=Object(Xt.g)(),d=function(){r(),s(null)},m=function(){r(),l.push("/home")};return Object(F.jsx)(u.a,{sx:{flexGrow:1},children:Object(F.jsx)(tn.a,{position:"static",children:Object(F.jsxs)(nn.a,{children:[Object(F.jsx)(C.a,{size:"large",edge:"start",color:"inherit","aria-label":"menu",sx:{mr:2},onClick:m,children:Object(F.jsx)(Cn.a,{})}),Object(F.jsx)(Bt.a,{variant:"text",onClick:m,children:Object(F.jsx)(O.a,{variant:"h6",sx:{flexGrow:1,color:"white"},children:"Salesdap"})}),t&&t.email&&Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)(C.a,{size:"large","aria-label":"account of current user","aria-controls":"menu-appbar","aria-haspopup":"true",onClick:function(e){s(e.currentTarget)},color:"inherit",sx:{marginLeft:"auto"},children:Object(F.jsx)(vn.a,{})}),Object(F.jsxs)(On.a,{id:"menu-appbar",anchorEl:c,anchorOrigin:{vertical:"top",horizontal:"right"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:Boolean(c),onClose:d,children:[Object(F.jsx)(gn.a,{onClick:d,children:Object(F.jsx)(Vt.b,{style:{color:"black",textDecoration:"none"},to:"/profile",children:"Profile"})}),Object(F.jsx)(gn.a,{onClick:d,children:Object(F.jsx)(Vt.b,{style:{color:"black",textDecoration:"none"},to:"/contact-us",children:"Contact Us"})}),Object(F.jsx)(gn.a,{onClick:function(){d(),n()},children:"Logout"})]})]})]})})})},yn=Object(f.b)(null,(function(e){return{showError:function(t){return e(K(t))},hideError:function(){return e(Q())},updateUser:function(t){return e(pt(t))}}}))((function(e){var t=e.user,n=e.hideError,a=e.updateUser,r=Object(Xt.g)();return Object(F.jsx)(wn,{user:t,handleLogout:function(){b.a.post("/api/v1/logout").then((function(){n(),a(Object(l.a)({},bt)),ce(""),r.push("/")})).catch((function(e){K("Failed to logout"),setTimeout((function(){n()}),5e3)}))},hideError:n})})),Sn=n(327),En=n(343),Tn=n(352),Dn=n(321),Fn=function(e){var t=e.handleManageSubscriptionClick,n=Object(Xt.g)();return Object(F.jsx)("section",{children:Object(F.jsx)(u.a,{sx:{width:"100%",marginTop:"6.5vh"},children:Object(F.jsx)(st.a,{container:!0,spacing:2,justifyContent:"center",sx:{height:"100%"},children:Object(F.jsxs)(st.a,{item:!0,container:!0,xs:6,p:0,sx:{height:"100%"},direction:"column",alignItems:"center",children:[Object(F.jsxs)("div",{className:"product Box-root",children:[Object(F.jsx)(Dn.a,{}),Object(F.jsx)("div",{className:"description Box-root",style:{display:"inline-block",marginBottom:"3.5rem"},children:Object(F.jsx)(O.a,{variant:"h4",children:"Subscribed to Salesdap!"})})]}),Object(F.jsx)(T.a,{variant:"extended",id:"checkout-and-portal-button",onClick:t,children:"Manage your subscription"}),Object(F.jsx)(T.a,{variant:"extended",color:"primary",id:"login-button",sx:{marginTop:"1.5rem"},onClick:function(){n.push("/")},children:"Get Started"})]})})})})},kn=Object(f.b)(null,(function(e){return{showError:function(t){return e(K(t))},hideError:function(){return e(Q())},setIsLoading:function(t){return e(ne(t))}}}))((function(e){var t=e.showError,n=e.hideError,r=e.setIsLoading,i=new URLSearchParams(window.location.search).get("session_id");Object(a.useEffect)((function(){r(!0),b.a.post("/api/v1/order-success",{sessionId:i}).then((function(){r(!1),n()})).catch((function(){r(!1),t("Problem with user registration")}))}),[]);return Object(F.jsx)(Fn,{handleManageSubscriptionClick:function(){r(!0),b.a.post("/api/v1/create-portal-session",{sessionId:i}).then((function(e){r(!1),n(),e&&e.data&&(window.location.href=e.data.url)})).catch((function(e){r(!1),console.log("err subscription",e),t("There was a problem with connecting with the subscription portal."),setTimeout((function(){n()}),1e4)}))}})})),Pn=function(){return Object(F.jsx)(F.Fragment,{children:Object(F.jsx)(u.a,{sx:{width:"100%",marginTop:"3.5vh"},children:Object(F.jsx)(st.a,{container:!0,spacing:2,justifyContent:"center",alignItems:"center",sx:{height:"100%"},children:Object(F.jsx)(st.a,{item:!0,container:!0,xs:8,p:0,sx:{height:"100%"},direction:"column",justifyContent:"start",alignItems:"center",children:Object(F.jsxs)(Mt.a,{elevation:3,sx:{width:"100%",padding:"3rem 0 3rem 3rem",margin:"3rem auto 3rem auto"},children:[Object(F.jsx)(O.a,{variant:"h5",children:"Contact Us"}),Object(F.jsx)(O.a,{variant:"body2",children:"For assistance with issues, send an email to salesdaphelp@gmail.com"})]})})})})})},Bn=function(e){var t=e.alert,n=e.loading,a=e.user,r=e.handleAlertClose;return Object(F.jsx)(Vt.a,{children:Object(F.jsxs)("main",{children:[Object(F.jsx)(yn,{user:a}),Object(F.jsxs)(Xt.d,{children:[Object(F.jsx)(xn,{exact:!0,path:"/home",component:Wt,user:a}),Object(F.jsx)(Xt.b,{exact:!0,path:"/",component:sn}),Object(F.jsx)(Xt.b,{exact:!0,path:"/register",component:en}),Object(F.jsx)(Xt.b,{path:"/pay",component:Yt}),Object(F.jsx)(Xt.b,{path:"/success",component:kn}),Object(F.jsx)(Xt.b,{path:"/profile",component:pn}),Object(F.jsx)(Xt.b,{exact:!0,path:"/forgot-password",component:fn}),Object(F.jsx)(Xt.b,{path:"/reset-password/:token",component:hn}),Object(F.jsx)(Xt.b,{exact:!0,path:"/contact-us",component:Pn})]}),t.isOpen&&Object(F.jsx)(Sn.a,{variant:"standard",severity:t.alertType||"error",onClose:r,sx:{position:"fixed",bottom:"-2%",left:"50%",transform:"translate(-50%, -50%)",zIndex:1570,borderRadius:"10px",width:"fit-content",maxWidth:"33%",flexWrap:"nowrap"},children:t.message}),Object(F.jsx)(En.a,{open:n,sx:{zIndex:1550},children:Object(F.jsx)(Tn.a,{color:"inherit"})})]})})},Nn=Object(f.b)((function(e){return{alert:e.alert,loading:e.loading.isLoading,user:e.user}}),(function(e){return{hideError:function(){return e(Q())},hideSuccess:function(){return e(ee())}}}))((function(e){var t=e.alert,n=e.loading,a=e.user,r=e.hideError,i=e.hideSuccess;return Object(F.jsx)(Bn,{alert:t,loading:n,user:a,handleAlertClose:function(){"error"===t.alertType?r():"success"===t.alertType&&i()}})})),In=n(112),An={duplicatesData:[],selectedDocument1:{data:[],name:"",allColumns:[],columnChooserGridData:[],fileBlob:null},selectedDocument2:{data:[],name:"",allColumns:[],columnChooserGridData:[],fileBlob:null},comparisonColumns1:[],comparisonColumns2:[],fileSource1:"upload",fileSource2:"upload",comparisonColumns1Error:[],comparisonColumns2Error:[],fileStructure1:q,fileStructure2:q,unformattedData1:"",unformattedData2:"",partnerName:"",partnerCompany:""},Rn="The number of selected columns for each file needs to match.",Un="Limit of ".concat(5," columns exceeded."),_n="At least 1 column is required",Ln={step:0},Mn={template:"[insert name],\n\nThanks for sending over your account list.\n\nAttached you\u2019ll find a list that maps both our account teams to one another. \n\nRegards,\n\n[insert your signature]\n"},Hn={isOpen:!1,alertType:"",message:""},Gn={isLoading:!1},qn=Object(In.b)({stepProgress:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ln,t=arguments.length>1?arguments[1]:void 0;return t.type===Et?Object(l.a)(Object(l.a)({},e),{},{step:t.payload}):e},document:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:An,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case N:var n=t.payload,a=t.index,r=Object(at.a)(e.comparisonColumns1Error),i=Object(at.a)(e.comparisonColumns2Error);return 0===a&&e.comparisonColumns2.length&&n.length!==e.comparisonColumns2.length||1===a&&e.comparisonColumns1.length&&n.length!==e.comparisonColumns1.length?(Ft(r,Rn),Ft(i,Rn)):(0===a&&n.length===e.comparisonColumns2.length||1===a&&n.length===e.comparisonColumns1.length)&&(kt(r,Rn),kt(i,Rn)),0===a?(n.length>5?Ft(r,Un):kt(r,Un),0===n.length?Ft(r,_n):kt(r,_n)):1===a&&(n.length>5?Ft(i,Un):kt(i,Un),0===n.length?Ft(i,_n):kt(i,_n)),0===t.index?Object(l.a)(Object(l.a)({},e),{},{comparisonColumns1:t.payload,comparisonColumns1Error:r,comparisonColumns2Error:i}):Object(l.a)(Object(l.a)({},e),{},{comparisonColumns2:t.payload,comparisonColumns1Error:r,comparisonColumns2Error:i});case U:var o=0===t.index?Object(at.a)(e.comparisonColumns1Error):Object(at.a)(e.comparisonColumns2Error);return 0===t.payload.length&&Ft(o,_n),0===t.index?Object(l.a)(Object(l.a)({},e),{},{comparisonColumns1Error:o}):Object(l.a)(Object(l.a)({},e),{},{comparisonColumns2Error:o});case B:return 0===t.index?Object(l.a)(Object(l.a)({},e),{},{comparisonColumns1:[],selectedDocument1:{data:t.payload,name:t.name,columnChooserGridData:t.columnChooserGridData,allColumns:[],fileBlob:t.fileBlob}}):Object(l.a)(Object(l.a)({},e),{},{comparisonColumns2:[],selectedDocument2:{data:t.payload,name:t.name,columnChooserGridData:t.columnChooserGridData,allColumns:[],fileBlob:t.fileBlob}});case _:return 0===t.index?Object(l.a)(Object(l.a)({},e),{},{selectedDocument1:Object(l.a)(Object(l.a)({},e.selectedDocument1),{},{allColumns:t.payload})}):Object(l.a)(Object(l.a)({},e),{},{selectedDocument2:Object(l.a)(Object(l.a)({},e.selectedDocument2),{},{allColumns:t.payload})});case A:return 0===t.index?Object(l.a)(Object(l.a)({},e),{},{fileSource1:t.payload}):Object(l.a)(Object(l.a)({},e),{},{fileSource2:t.payload});case R:return 0===t.index?t.payload===q?Object(l.a)(Object(l.a)({},e),{},{fileStructure1:t.payload,unformattedData1:""}):Object(l.a)(Object(l.a)({},e),{},{fileStructure1:t.payload,comparisonColumns1:[],selectedDocument1:Object(l.a)({},An.selectedDocument1)}):t.payload===q?Object(l.a)(Object(l.a)({},e),{},{fileStructure2:t.payload,unformattedData2:""}):Object(l.a)(Object(l.a)({},e),{},{fileStructure2:t.payload,comparisonColumns2:[],selectedDocument2:Object(l.a)({},An.selectedDocument2)});case L:return 0===t.index?Object(l.a)(Object(l.a)({},e),{},{unformattedData1:t.payload}):Object(l.a)(Object(l.a)({},e),{},{unformattedData2:t.payload});case P:return Object(l.a)(Object(l.a)({},e),{},{duplicatesData:t.payload});case M:return Object(l.a)(Object(l.a)({},e),{},{partnerName:t.payload});case H:return Object(l.a)(Object(l.a)({},e),{},{partnerCompany:t.payload});default:return e}},user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:bt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case mt:return Object(l.a)(Object(l.a)({},e),{},{email:t.payload.email||e.email,firstname:t.payload.firstname||e.firstname,lastname:t.payload.lastname||e.lastname,company:t.payload.company||e.company,pinnedFileName:t.payload.pinned_filename||e.pinnedFileName,pinnedFileId:t.payload.pinned_file_id||e.pinnedFileId,activeSubscription:t.payload.active_subscription||e.activeSubscription,subscriptionType:t.payload.subscription_type||e.subscriptionType,freeComparisons:t.payload.free_comparisons||e.freeComparisons});case I:return Object(l.a)(Object(l.a)({},e),{},{pinnedFileName:t.payload.pinned_filename,pinnedFileId:t.payload.pinned_file_id});default:return e}},emailTemplate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Mn,t=arguments.length>1?arguments[1]:void 0;return t.type===_t?Object(l.a)(Object(l.a)({},e),{},{template:t.payload}):e},alert:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Hn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Z:return Object(l.a)(Object(l.a)({},e),{},{isOpen:!0,alertType:"error",message:t.payload});case J:case Et:return Object(l.a)(Object(l.a)({},e),{},{isOpen:!1,alertType:"",message:""});case Y:return Object(l.a)(Object(l.a)({},e),{},{isOpen:!0,alertType:"success",message:t.payload});case $:return Object(l.a)(Object(l.a)({},e),{},{isOpen:!1,alertType:"",message:""});default:return e}},loading:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Gn,t=arguments.length>1?arguments[1]:void 0;return t.type===te?Object(l.a)(Object(l.a)({},e),{},{isLoading:t.payload}):e}}),zn=(n(250),n(251),n(252),Object(In.c)(qn,Object(In.a)(s.a)));o.a.render(Object(F.jsx)(f.a,{store:zn,children:Object(F.jsx)(Nn,{})}),document.getElementById("root"))}},[[254,1,2]]]);
//# sourceMappingURL=main.263cb8dd.chunk.js.map