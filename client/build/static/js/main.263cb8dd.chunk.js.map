{"version":3,"sources":["components/file-selection-field/index.tsx","state/actions/document/index.ts","state/actions/alert/index.ts","state/actions/loading/index.ts","utils/validate-file-type.ts","utils/access-token.utils.ts","utils/spreadsheet.utils.ts","containers/file-selection-field/index.tsx","components/pinned-file-chip/index.tsx","containers/pinned-file-chip/index.tsx","components/file-source-radio/index.tsx","containers/file-source-radio/index.tsx","components/comparison-column-autocomplete/index.tsx","containers/comparison-column-autocomplete/index.tsx","components/file-structure-help-modal/index.tsx","components/file-structure-radio/index.tsx","containers/file-structure-radio/index.tsx","components/unformatted-data-textfield/index.tsx","containers/unformatted-data-textfield-container/index.tsx","components/partner-name-textfield/index.tsx","containers/partner-name-textfield/index.tsx","components/partner-company-textfield/index.tsx","containers/partner-company-textfield/index.tsx","components/file-data-preview-table/index.tsx","components/choose-column-help-modal/index.tsx","components/file-source-help-modal/index.tsx","components/upload-document-column/index.tsx","containers/upload-document-column/index.tsx","utils/results-preview.utils.ts","components/results-preview-modal/index.tsx","containers/results-preview-modal/index.tsx","state/actions/user/index.ts","state/reducers/user/index.ts","utils/duplicates-table.utils.ts","components/info-tooltip/index.tsx","components/upload-document-form/index.tsx","state/actions/step-progress/index.ts","utils/update-comparison-columns.ts","containers/upload-document-form/index.tsx","components/duplicates-table/index.tsx","containers/duplicates-table/index.tsx","components/email-template/index.tsx","state/actions/email-template/index.ts","containers/email-template/index.tsx","components/stepper-footer/index.tsx","containers/stepper-footer/index.tsx","pages/home/index.tsx","containers/home/index.tsx","pages/payment/index.tsx","pages/register/index.tsx","containers/register/index.tsx","pages/email-capture/index.tsx","containers/email-capture/index.tsx","pages/login/index.tsx","containers/login/index.tsx","components/edit-profile-form/index.tsx","containers/edit-profile-form/index.tsx","pages/profile/index.tsx","containers/profile/index.tsx","pages/password-reset/index.tsx","containers/password-reset/index.tsx","pages/forgot-password/index.tsx","containers/forgot-password/index.tsx","components/private-route/index.tsx","components/nav-bar/index.tsx","containers/nav-bar/index.tsx","pages/payment-success/index.tsx","containers/payment-success/index.tsx","pages/contact-us/index.tsx","components/routes/index.tsx","containers/routes/index.tsx","state/reducers/document/index.ts","state/reducers/step-progress/index.ts","state/reducers/email-template/index.ts","state/reducers/alert/index.ts","state/reducers/loading/index.ts","state/reducers/index.ts","index.tsx"],"names":["FileSelectionField","selectedDocument","validateAndSetFileSelection","index","handleFilePinning","user","inputFileRef","useRef","Fab","variant","sx","margin","onClick","current","click","AttachFile","mr","type","ref","className","onChange","event","name","Typography","marginTop","Tooltip","title","arrow","IconButton","fileBlob","disabled","pinnedFileName","PushPin","UPLOAD_DOCUMENT_SUCCESS","SELECT_DOCUMENT","CHANGE_COMPARISON_COLUMN","PIN_FILE_SUCCESS","SET_FILE_SOURCE","SET_FILE_STRUCTURE","SET_COMPARISON_COLUMNS_ERROR","SET_ALL_COLUMNS","CHANGE_UNFORMATTED_DATA","CHANGE_PARTNER_NAME","CHANGE_PARTNER_COMPANY","UNFORMATTED_DATA","FORMATTED_DATA","selectDocument","document","eventFile","payload","columnChooserGridData","length","slice","changeComparisonColumn","value","pinFileSuccess","fileMetadata","SHOW_ERROR","HIDE_ERROR","SHOW_SUCCESS","HIDE_SUCCESS","showError","errorMessage","hideError","showSuccess","successMessage","hideSuccess","SET_IS_LOADING","setIsLoading","isLoading","acceptedFileTypes","checkIsValidFileType","fileName","fileNameArray","split","fileExtension","includes","toLowerCase","accessToken","setAccessToken","s","getAccessToken","createJSONFromSpreadsheet","a","arrayBuffer","data","workbook","read","sheetName","SheetNames","worksheet","Sheets","utils","sheet_to_json","downloadSpreadsheetFromJSON","worksheetData","columns","forEach","row","Array","from","Object","keys","push","rowArr","map","rowProp","aoa_to_sheet","book_new","book_append_sheet","writeFile","createFileLink","url","window","URL","createObjectURL","Blob","link","createElement","href","setAttribute","body","appendChild","getPinnedFile","pinnedFileId","axios","get","responseType","params","headers","Authorization","connect","state","dispatch","message","wsDataObj","filename","target","files","file","formData","FormData","append","email","post","then","res","setTimeout","catch","PinnedFileChip","handlePinnedFileClick","Chip","icon","Attachment","label","pinnedFileData","console","log","FileSourceRadio","fileSource","handleFileTypeChange","FormControl","RadioGroup","marginBottom","FormControlLabel","control","Radio","setFileSource","pinnedFileBlob","CheckBoxOutlineBlank","fontSize","checkedIcon","CheckBox","ComparisonColumnAutocomplete","comparisonColumns","comparisonColumnsError","handleComparisonColumnsBlur","handleComparisonColumnFieldChange","autocompleteOptions","Autocomplete","multiple","disableCloseOnSelect","options","width","renderOption","props","option","selected","Checkbox","style","marginRight","checked","renderInput","TextField","required","error","onBlur","color","join","newValue","setComparisonColumnsError","_","formattedData","Website","DUNS","unformattedData","FileStructureHelpModal","isHelpModalOpen","handleOpenHelpModal","Dialog","open","onClose","DialogTitle","DialogContent","dividers","DialogContentText","id","dataSource","showColumnLines","columnAutoWidth","showBorders","height","caption","calculateCellValue","FileStructureRadio","fileStructure","handleFileStructureChange","useState","setIsHelpModalOpen","FormLabel","Help","setFileStructure","UnformattedDataTextField","handleUnformattedDataChange","multiline","maxRows","helperText","changeUnformattedData","PartnerNameTextfield","partnerName","changePartnerName","PartnerCompanyTextfield","partnerCompany","changePartnerCompany","FileDataPreviewTable","handleColumnClick","allowColumnReordering","allowColumnResizing","allColumns","colProps","colIdx","dataField","allowSorting","headerCellRender","column","indexOf","renderGridCell","defaultPageSize","visible","displayMode","showPageSizeSelector","showInfo","showNavigationButtons","ChooseColumnHelpModal","FileSourceHelpModal","UploadDocumentColumn","setAllColumns","isChooseColumnHelpModalOpen","setIsChooseColumnHelpModalOpen","isSelectFileSourceHelpModalOpen","setIsSelectFileSourceHelpModalOpen","useEffect","handleOpenFileSourceHelpModal","handleOpenChooseColumnHelpModal","createDocumentSampleRows","updateColumnsForDocument","documentNumber","concat","ResultsPreviewModal","isPreviewModalOpen","handleClosePreview","resultsData","setResultsData","selectedDocument1","selectedDocument2","comparisonColumns1","comparisonColumns2","fileStructure1","fileStructure2","unformattedData1","unformattedData2","doc1SampleData","doc2SampleData","updatedResultsData","i","reduce","rowObj","col","UPDATE_USER","updateUser","FREE","PREMIUM","initialState","firstname","lastname","company","activeSubscription","subscriptionType","freeComparisons","checkOnePersonsAccountData","capitalizeFirstLetterOfWord","word","toUpperCase","substring","isUserOutOfFreeComparisons","userFreeComparisons","userSubscriptionType","InfoTooltip","styled","classes","popper","theme","tooltipClasses","tooltip","typography","pxToRem","UploadDocumentForm","handleUploadAndCompare","setIsPreviewModalOpen","comparisonColumns1Error","comparisonColumns2Error","fileSource1","fileSource2","isSubmitBtnEnabled","isUserAccountDataValid","isPartnerAccountDataValid","userCanMakeComparisons","isSubmitButtonEnabled","Grid","container","spacing","direction","justifyContent","alignItems","item","xs","p","Divider","borderColor","Preview","Upload","CHANGE_STEP","changeStep","newStep","updateComparisonColumns","updatedCol","indexOfCol","splice","addMessageToErrorList","errorList","removeMessageFromErrorList","errMsgIndex","activeStep","stepProgress","step","uploadDocumentSuccess","docBlob1","JSON","stringify","docBlob2","err","DuplicatesTable","duplicatesData","dataGridRef","handleColumnChooserOpen","instance","showColumnChooser","padding","md","customizeColumns","capitalizedUserName","capitalizedFirstName","capitalizedLastName","createCapitalizedUserName","capitalizedPartnerCompany","createCapitalizedPartnerCompany","capitalizedPartnerName","createCapitalizedPartnerName","isBand","cssClass","userAccountColumnCount","ownerBand","mode","enabled","allowSearch","groupIndex","calculateGroupValue","rowData","accuracy","groupCellRender","displayValue","showInColumnChooser","sortOrder","colName","colIndex","replace","location","locateInMenu","render","component","Button","EmailTemplate","template","handleTemplateChange","handleCopyEmailTemplate","textAreaRef","rows","defaultValue","ContentCopy","Download","UPDATE_EMAIL_TEMPLATE","emailTemplate","updateEmailTemplate","successMsg","navigator","clipboard","writeText","StepperFooter","steps","handleBack","handleNext","Paper","position","bottom","left","right","zIndex","display","flexDirection","elevation","Box","flex","Home","Stepper","nonLinear","marginLeft","Step","StepButton","Fragment","Container","paddingBottom","maxWidth","Payment","Register","onSubmit","formik","useFormik","initialValues","password","confirmPassword","firstName","lastName","validate","values","errors","test","touched","handleBlur","handleChange","handleSubmit","setFieldValue","isSubmitButtonDisabled","to","history","useHistory","handleRegistrationFailure","customerEmail","EmailCapture","AppBar","Toolbar","edge","Close","Login","isEmailCaptureModalOpen","setIsEmailCaptureModalOpen","handleClose","defaults","withCredentials","handleLoginSuccess","token","handleLoginFailure","EditProfileForm","vals","config","handleProfileActionFailure","Profile","validateFileSelection","handleManageSubscriptionClick","handleCreateCheckoutSession","isEditing","setIsEditing","hasActiveSubscription","setHasActiveSubscription","Edit","placement","minWidth","checkSubscriptionAndRefreshAuth","query","URLSearchParams","search","sessionId","updateCustomerSubscriptionInfo","refreshUserAuthStatus","handleProfileLoginSuccess","isComingFromProfilePage","PasswordReset","useParams","ForgotPassword","PrivateRoute","useLocation","pathname","NavBar","handleLogout","React","anchorEl","setAnchorEl","handleHomeClick","flexGrow","size","Handshake","currentTarget","AccountCircle","Menu","anchorOrigin","vertical","horizontal","keepMounted","transformOrigin","Boolean","MenuItem","textDecoration","SuccessDisplay","CheckCircle","ContactUs","Routes","alert","loading","handleAlertClose","exact","path","HomeContainer","LoginContainer","RegisterContainer","SuccessDisplayContainer","ProfileContainer","ForgotPasswordContainer","PasswordResetContainer","isOpen","Alert","severity","alertType","transform","borderRadius","flexWrap","Backdrop","CircularProgress","MISMATCHED_COLUMNS_ERR","TOO_MANY_COLUMNS_ERR","REQUIRED_ERR","rootReducer","combineReducers","action","errorMsg1","errorMsg2","errorMsg","pinned_filename","pinned_file_id","active_subscription","subscription_type","free_comparisons","store","createStore","applyMiddleware","logger","ReactDOM","getElementById"],"mappings":"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","file":"static/js/main.263cb8dd.chunk.js","sourcesContent":["import React, { useRef } from 'react';\r\nimport { AttachFile, PushPin } from '@mui/icons-material';\r\nimport {\r\n  Fab,\r\n  IconButton,\r\n  Tooltip,\r\n  Typography,\r\n} from '@mui/material';\r\nimport { UserState } from '../../state/reducers/user';\r\n\r\ninterface Props {\r\n  validateAndSetFileSelection: any;\r\n  selectedDocument: any;\r\n  index: number;\r\n  handleFilePinning: any;\r\n  user: UserState;\r\n}\r\n\r\nconst FileSelectionField = ({\r\n  selectedDocument,\r\n  validateAndSetFileSelection,\r\n  index,\r\n  handleFilePinning,\r\n  user\r\n}: Props) => {\r\n  const inputFileRef: any = useRef( null );\r\n  \r\n  /**\r\n   * Triggers the clicking of the hidden input (type=file) button\r\n   */\r\n   const handleFileSelectionBtnClick = () => {\r\n    /*Collecting node-element and performing click*/\r\n    if (inputFileRef&& inputFileRef.current) {\r\n      inputFileRef.current.click();\r\n    }\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <Fab\r\n        variant=\"extended\"\r\n        aria-label=\"add\"\r\n        sx={{ margin: '0.5rem auto 0' }}\r\n        onClick={handleFileSelectionBtnClick}\r\n      >\r\n        <AttachFile sx={{ mr: 1 }} />\r\n        Select File\r\n      </Fab>\r\n      <input\r\n        type=\"file\"\r\n        ref={inputFileRef}\r\n        className=\"file-input\"\r\n        onChange={(event: any) => validateAndSetFileSelection(event, index)}\r\n        name=\"sales_file\"\r\n      />\r\n      {selectedDocument && selectedDocument.name &&\r\n        <div className=\"selected-file-div\">\r\n          <Typography variant=\"subtitle1\" sx={{ marginTop: '1rem' }}>\r\n            {selectedDocument.name}\r\n          </Typography>\r\n          {index === 0 && (\r\n            <Tooltip title=\"Pin a list for future comparisons\" arrow>\r\n              <IconButton\r\n                sx={{ margin: '0.5rem' }}\r\n                onClick={() => handleFilePinning(selectedDocument.fileBlob)}\r\n                disabled={user.pinnedFileName === selectedDocument.name}\r\n              >\r\n                <PushPin />\r\n              </IconButton>\r\n            </Tooltip>\r\n          )}\r\n        </div>\r\n      }\r\n    </>\r\n  )\r\n}\r\n\r\nexport default FileSelectionField;","export const UPLOAD_DOCUMENT_SUCCESS = 'UPLOAD_DOCUMENT_SUCCESS';\r\nexport const SELECT_DOCUMENT = 'SELECT_DOCUMENT';\r\nexport const CHANGE_COMPARISON_COLUMN = 'CHANGE_COMPARISON_COLUMN';\r\nexport const CHANGE_RESULT_COLUMNS = 'CHANGE_RESULT_COLUMNS';\r\nexport const PIN_FILE_SUCCESS = 'PIN_FILE_SUCCESS';\r\nexport const SET_FILE_SOURCE = 'SET_FILE_SOURCE';\r\nexport const SET_FILE_STRUCTURE = 'SET_FILE_STRUCTURE';\r\nexport const SET_COMPARISON_COLUMNS_ERROR = 'SET_COMPARISON_COLUMNS_ERROR';\r\nexport const SET_ALL_COLUMNS = 'SET_ALL_COLUMNS';\r\nexport const CHANGE_UNFORMATTED_DATA = 'CHANGE_UNFORMATTED_DATA';\r\nexport const CHANGE_PARTNER_NAME = 'CHANGE_PARTNER_NAME';\r\nexport const CHANGE_PARTNER_COMPANY = 'CHANGE_PARTNER_COMPANY';\r\n\r\n// Constants for file structure\r\nexport const UNFORMATTED_DATA = 'UNFORMATTED_DATA';\r\nexport const FORMATTED_DATA = 'FORMATTED_DATA';\r\n\r\nexport const uploadDocumentSuccess = (duplicatesData: any) => ({\r\n  type: UPLOAD_DOCUMENT_SUCCESS,\r\n  payload: duplicatesData\r\n});\r\n\r\nexport const selectDocument = (\r\n  document: any,\r\n  index: number,\r\n  name: string,\r\n  eventFile: any\r\n) => {\r\n  return {\r\n    type: SELECT_DOCUMENT,\r\n    payload: document,\r\n    index,\r\n    name,\r\n    columnChooserGridData: document.length > 2 ?\r\n      document.slice(0, 2) :\r\n      document,\r\n    fileBlob: eventFile\r\n  };\r\n}\r\n\r\nexport const changeComparisonColumn = (value: Array<string>, index: number) => ({\r\n  type: CHANGE_COMPARISON_COLUMN,\r\n  payload: value,\r\n  index\r\n});\r\n\r\nexport const pinFileSuccess = (fileMetadata: any) => ({\r\n  type: PIN_FILE_SUCCESS,\r\n  payload: fileMetadata\r\n});\r\n\r\nexport const setFileSource = (index: number, value: string) => ({\r\n  type: SET_FILE_SOURCE,\r\n  index,\r\n  payload: value\r\n});\r\n\r\nexport const setFileStructure = (index: number, value: string) => ({\r\n  type: SET_FILE_STRUCTURE,\r\n  index,\r\n  payload: value\r\n});\r\n\r\nexport const changeUnformattedData = (index: number, value: string) => ({\r\n  type: CHANGE_UNFORMATTED_DATA,\r\n  index,\r\n  payload: value\r\n});\r\n\r\nexport const setComparisonColumnsError = (value: Array<string>, index: number) => {\r\n  return {\r\n    type: SET_COMPARISON_COLUMNS_ERROR,\r\n    payload: value,\r\n    index\r\n  }\r\n}\r\n\r\nexport const setAllColumns = (columns: Array<string>, index: number) => ({\r\n  type: SET_ALL_COLUMNS,\r\n  payload: columns,\r\n  index\r\n});\r\n\r\nexport const changePartnerName = (value: string) => ({\r\n  type: CHANGE_PARTNER_NAME,\r\n  payload: value\r\n});\r\n\r\nexport const changePartnerCompany = (value: string) => ({\r\n  type: CHANGE_PARTNER_COMPANY,\r\n  payload: value\r\n});","export const SHOW_ERROR = 'SHOW_ERROR';\r\nexport const HIDE_ERROR = 'HIDE_ERROR';\r\nexport const SHOW_SUCCESS = 'SHOW_SUCCESS';\r\nexport const HIDE_SUCCESS = 'HIDE_SUCCESS';\r\n\r\nexport const showError = (errorMessage: string) => ({\r\n  type: SHOW_ERROR,\r\n  payload: errorMessage\r\n});\r\n\r\nexport const hideError = () => ({\r\n  type: HIDE_ERROR\r\n});\r\n\r\nexport const showSuccess = (successMessage: string) => ({\r\n  type: SHOW_SUCCESS,\r\n  payload: successMessage\r\n});\r\n\r\nexport const hideSuccess = () => ({\r\n  type: HIDE_ERROR\r\n});","export const SET_IS_LOADING = 'SET_IS_LOADING';\r\n\r\nexport const setIsLoading = (isLoading: boolean) => ({\r\n  type: SET_IS_LOADING,\r\n  payload: isLoading\r\n});","const acceptedFileTypes = ['xls', 'xlsx', 'csv'];\r\n\r\nexport const checkIsValidFileType = (fileName: string): boolean => {\r\n  const fileNameArray: Array<string> = fileName.split('.');\r\n  const fileExtension: string = fileNameArray[fileNameArray.length - 1];\r\n  return acceptedFileTypes.includes(fileExtension.toLowerCase());\r\n}","let accessToken = '';\r\n\r\nexport const setAccessToken = (s: string) => {\r\n  accessToken = s;\r\n};\r\n\r\nexport const getAccessToken = () => {\r\n  return accessToken;\r\n};","import { WorkSheet, WorkBook, utils, read, writeFile } from 'xlsx';\r\nimport axios from 'axios';\r\nimport { getAccessToken } from './access-token.utils';\r\n\r\nexport const createJSONFromSpreadsheet = async (document: any) => {\r\n  const data = await document.arrayBuffer();\r\n  const workbook = read(data);\r\n  const sheetName: string = workbook.SheetNames[0];\r\n  const worksheet: WorkSheet | null = workbook && workbook.Sheets ?\r\n    workbook.Sheets[sheetName as any] : null;\r\n\r\n  if (worksheet) {\r\n    return utils.sheet_to_json(worksheet);\r\n  }\r\n  return [];\r\n}\r\n\r\nexport const downloadSpreadsheetFromJSON = async (data: Array<any>) => {\r\n  const worksheetData: Array<Array<any>> = [];\r\n  let columns: Array<string> = [];\r\n  data.forEach((row: any, index: number) => {\r\n    if (index === 0) {\r\n      columns = Array.from(Object.keys(row));\r\n      worksheetData.push(columns);\r\n    }\r\n    const rowArr = columns.map((rowProp: string) => row[rowProp]);\r\n    worksheetData.push(rowArr);\r\n  });\r\n  const worksheet: WorkSheet = utils.aoa_to_sheet(worksheetData);\r\n  const workbook: WorkBook = utils.book_new();\r\n  utils.book_append_sheet(workbook, worksheet, 'Sheet1');\r\n  writeFile(workbook, 'account-mapping.xls');\r\n}\r\n\r\nexport const createFileLink = (data: any, pinnedFileName: string) => {\r\n  const url = window.URL.createObjectURL(new Blob([data]));\r\n  const link = document.createElement('a');\r\n  link.href = url;\r\n  link.setAttribute('download', pinnedFileName);\r\n  document.body.appendChild(link);\r\n  link.click();\r\n}\r\n\r\nexport const getPinnedFile = (pinnedFileId: string) => {\r\n  return axios.get('/api/v1/viewpinnedfile',\r\n    {\r\n      responseType: 'blob',\r\n      params: { pinnedFileId },\r\n      headers: {\r\n        Authorization: `Bearer ${getAccessToken()}` //the token is a variable which holds the token\r\n      }\r\n    }\r\n  );\r\n}","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport FileSelectionField from '../../components/file-selection-field';\r\nimport { pinFileSuccess, selectDocument } from '../../state/actions/document';\r\nimport { showError, hideError, showSuccess, hideSuccess } from '../../state/actions/alert';\r\nimport { setIsLoading } from '../../state/actions/loading';\r\nimport { checkIsValidFileType } from '../../utils/validate-file-type';\r\nimport { createJSONFromSpreadsheet } from '../../utils/spreadsheet.utils';\r\nimport { getAccessToken } from '../../utils/access-token.utils';\r\nimport axios from 'axios';\r\nimport { UserState } from '../../state/reducers/user';\r\n\r\ninterface Props {\r\n  selectedDocument: any;\r\n  showError: any;\r\n  hideError: any;\r\n  setIsLoading: any;\r\n  selectDocument: any;\r\n  index: number;\r\n  user: UserState;\r\n  pinFileSuccess: any;\r\n  showSuccess: any;\r\n  hideSuccess: any;\r\n}\r\n\r\nconst FileSelectionFieldContainer = ({\r\n  selectedDocument,\r\n  showError,\r\n  hideError,\r\n  setIsLoading,\r\n  selectDocument,\r\n  index,\r\n  user,\r\n  pinFileSuccess,\r\n  showSuccess,\r\n  hideSuccess\r\n}: Props) => {\r\n\r\n  /**\r\n   * When the user selects a document, validate the file type\r\n   * @param event \r\n   */\r\n   const validateAndSetFileSelection = async (event: any, index: number) => {\r\n    setIsLoading(true);\r\n    const document: any = event && event.target && event.target.files ?\r\n      event.target.files[0] :\r\n      null;\r\n    const isValidDocType: boolean = document && document.name ?\r\n      checkIsValidFileType(document.name) : false;\r\n\r\n    if (isValidDocType) {\r\n      hideError();\r\n      const wsDataObj: Array<any> = await createJSONFromSpreadsheet(document);\r\n      selectDocument(wsDataObj, index, document.name, document);\r\n      setIsLoading(false);\r\n    } else {\r\n      showError('Invalid file type. Only .xls, .xlsx, or .csv files can be processed.');\r\n    }\r\n  };\r\n\r\n  const handleFilePinning = (file: any) => {\r\n    setIsLoading(true);\r\n    const formData = new FormData();\r\n    if (\r\n      file &&\r\n      file.name\r\n    ) {\r\n      formData.append(\r\n        'sales_file',\r\n        file,\r\n        file.name\r\n      );\r\n      formData.append(\r\n        'email',\r\n        user.email\r\n      );\r\n    }\r\n    axios.post('/api/v1/pinfile', formData, {\r\n      headers: {\r\n        Authorization: `Bearer ${getAccessToken()}`\r\n      }\r\n    })\r\n      .then((res: any) => {\r\n        pinFileSuccess(res.data);\r\n        hideError();\r\n        setIsLoading(false);\r\n        showSuccess('Successfully pinned file');\r\n        setTimeout(() => {\r\n          hideSuccess();\r\n        }, 5000);\r\n      })\r\n      .catch(() => {\r\n        setIsLoading(false);\r\n        showError('Failed to pin file');\r\n        setTimeout(() => {\r\n          hideError();\r\n        }, 7500)\r\n      });\r\n  }\r\n\r\n  return (\r\n    <FileSelectionField\r\n      selectedDocument={selectedDocument}\r\n      validateAndSetFileSelection={validateAndSetFileSelection}\r\n      index={index}\r\n      handleFilePinning={handleFilePinning}\r\n      user={user}\r\n    />\r\n  );\r\n}\r\n\r\nconst mapStateToProps = (state: any) => ({\r\n  user: state.user\r\n});\r\n\r\nconst mapDispatchToProps = (dispatch: any) => ({\r\n  showSuccess: (message: string) => dispatch(showSuccess(message)),\r\n  hideSuccess: () => dispatch(hideSuccess()),\r\n  showError: (message: string) => dispatch(showError(message)),\r\n  hideError: () => dispatch(hideError()),\r\n  setIsLoading: (isLoading: boolean) => dispatch(setIsLoading(isLoading)),\r\n  selectDocument: (wsDataObj: any, index: number, filename: string, document: any) => dispatch(selectDocument(wsDataObj, index, filename, document)),\r\n  pinFileSuccess: (fileMetadata: any) => dispatch(pinFileSuccess(fileMetadata)),\r\n});\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(FileSelectionFieldContainer);","import React from 'react';\r\nimport {\r\n  Typography,\r\n  Chip,\r\n} from '@mui/material';\r\nimport { Attachment } from '@mui/icons-material';\r\nimport { UserState } from '../../state/reducers/user';\r\n\r\ninterface Props {\r\n  user: UserState;\r\n  handlePinnedFileClick: any;\r\n}\r\n\r\nconst PinnedFileChip = ({ user, handlePinnedFileClick }: Props) => {\r\n  return (\r\n    <>\r\n      <Typography variant=\"subtitle1\">Pinned File:</Typography>\r\n      <Chip onClick={handlePinnedFileClick} icon={<Attachment />} label={user.pinnedFileName} />\r\n    </>\r\n  );\r\n}\r\n\r\nexport default PinnedFileChip;","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport PinnedFileChip from '../../components/pinned-file-chip';\r\nimport { hideError, showError } from '../../state/actions/alert';\r\nimport { UserState } from '../../state/reducers/user';\r\nimport { createFileLink, getPinnedFile } from '../../utils/spreadsheet.utils';\r\n\r\ninterface Props {\r\n  user: UserState;\r\n  showError: any;\r\n  hideError: any;\r\n}\r\n\r\nconst PinnedFileChipContainer = ({ user, showError, hideError }: Props) => {\r\n  const handlePinnedFileClick = async () => {\r\n    try {\r\n      const pinnedFileData = await getPinnedFile(user.pinnedFileId);\r\n      createFileLink(pinnedFileData.data, user.pinnedFileName);\r\n    } catch (err: any) {\r\n      console.log('err', err);\r\n      showError('Failed to download pinned file.');\r\n    }\r\n  };\r\n\r\n  return (\r\n    <PinnedFileChip user={user} handlePinnedFileClick={handlePinnedFileClick} />\r\n  );\r\n}\r\n\r\nconst mapStateToProps = (state: any) => ({\r\n  user: state.user,\r\n});\r\n\r\nconst mapDispatchToProps = (dispatch: any) => ({\r\n  showError: (message: string) => dispatch(showError(message)),\r\n  hideError: () => dispatch(hideError()),\r\n});\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(PinnedFileChipContainer);","import React from 'react';\r\nimport {\r\n  FormControlLabel,\r\n  FormControl,\r\n  Radio,\r\n  RadioGroup\r\n} from '@mui/material';\r\n\r\ninterface Props {\r\n  fileSource: string;\r\n  handleFileTypeChange: any;\r\n  index: number;\r\n}\r\n\r\nconst FileSourceRadio = ({ fileSource, handleFileTypeChange, index }: Props) => {\r\n  return (\r\n    <FormControl>\r\n      <RadioGroup\r\n        aria-labelledby=\"demo-controlled-radio-buttons-group\"\r\n        name=\"controlled-radio-buttons-group\"\r\n        row\r\n        value={fileSource}\r\n        onChange={(event: any) => handleFileTypeChange(event, index)}\r\n        sx={{ marginBottom: '1rem' }}\r\n      >\r\n        <FormControlLabel value=\"upload\" control={<Radio />} label=\"Upload a file\" />\r\n        <FormControlLabel value=\"pinned\" control={<Radio />} label=\"Use your pinned file\" />\r\n      </RadioGroup>\r\n    </FormControl>\r\n  );\r\n}\r\n\r\nexport default FileSourceRadio;","import React from 'react';\r\nimport FileSourceRadio from '../../components/file-source-radio';\r\nimport { connect } from 'react-redux';\r\nimport { selectDocument, setFileSource } from '../../state/actions/document';\r\nimport { showError, hideError } from '../../state/actions/alert';\r\nimport { setIsLoading } from '../../state/actions/loading';\r\nimport { createJSONFromSpreadsheet, getPinnedFile } from '../../utils/spreadsheet.utils';\r\nimport { UserState } from '../../state/reducers/user';\r\n\r\ninterface Props {\r\n  showError: any;\r\n  hideError: any;\r\n  setIsLoading: any;\r\n  selectDocument: any;\r\n  setFileSource: any;\r\n  fileSource: string;\r\n  user: UserState;\r\n  index: number;\r\n}\r\n\r\nconst FileSourceRadioContainer = ({\r\n  showError,\r\n  hideError,\r\n  setIsLoading,\r\n  selectDocument,\r\n  setFileSource,\r\n  fileSource,\r\n  user,\r\n  index\r\n}: Props) => {\r\n\r\n  const handleFileTypeChange = async (event: any, index: number) => {\r\n    setFileSource(index, event.target.value);\r\n    if (event.target.value === 'pinned') {\r\n      setIsLoading(true);\r\n      try {\r\n        const pinnedFileBlob = await getPinnedFile(user.pinnedFileId);\r\n        const wsDataObj: Array<any> = await createJSONFromSpreadsheet(pinnedFileBlob.data);\r\n        selectDocument(wsDataObj, index, user.pinnedFileId, pinnedFileBlob.data);\r\n        hideError();\r\n        setIsLoading(false);\r\n      } catch (err: any) {\r\n        console.log('err', err);\r\n        showError('Failed to get pinned file for user.');\r\n        setIsLoading(false);\r\n        setTimeout(() => {\r\n          hideError();\r\n        }, 5000);\r\n      }\r\n    } else {\r\n      selectDocument([], index, '');\r\n    }\r\n  }\r\n\r\n  return (\r\n    <FileSourceRadio\r\n      handleFileTypeChange={handleFileTypeChange}\r\n      fileSource={fileSource}\r\n      index={index}\r\n    />\r\n  );\r\n}\r\n\r\nconst mapStateToProps = (state: any) => ({\r\n  user: state.user\r\n})\r\n\r\nconst mapDispatchToProps = (dispatch: any) => ({\r\n  showError: (message: string) => dispatch(showError(message)),\r\n  hideError: () => dispatch(hideError()),\r\n  setIsLoading: (isLoading: boolean) => dispatch(setIsLoading(isLoading)),\r\n  selectDocument: (wsDataObj: any, index: number, filename: string, fileBlob: any) => dispatch(selectDocument(wsDataObj, index, filename, fileBlob)),\r\n  setFileSource: (index: number, event: any) => dispatch(setFileSource(index, event))\r\n});\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(FileSourceRadioContainer);","import React from 'react';\r\nimport { TextField, Autocomplete, Typography, Checkbox } from '@mui/material';\r\nimport { CheckBoxOutlineBlank, CheckBox } from '@mui/icons-material';\r\n\r\ninterface Props {\r\n  selectedDocument: any;\r\n  comparisonColumns: Array<string>;\r\n  comparisonColumnsError: Array<string>;\r\n  handleComparisonColumnsBlur: any;\r\n  handleComparisonColumnFieldChange: any;\r\n  index: number;\r\n}\r\n\r\nconst icon = <CheckBoxOutlineBlank fontSize=\"small\" />;\r\nconst checkedIcon = <CheckBox fontSize=\"small\" />;\r\n\r\nconst ComparisonColumnAutocomplete = ({\r\n  selectedDocument,\r\n  comparisonColumns,\r\n  comparisonColumnsError,\r\n  handleComparisonColumnsBlur,\r\n  handleComparisonColumnFieldChange,\r\n}: Props) => {\r\n  const autocompleteOptions: Array<string> = selectedDocument && selectedDocument.data && selectedDocument.data[0] ?\r\n    Array.from(Object.keys(selectedDocument.data[0])) :\r\n    [];\r\n\r\n  return (\r\n    <>\r\n      <Autocomplete\r\n        multiple={true}\r\n        disableCloseOnSelect={true}\r\n        options={autocompleteOptions}\r\n        onChange={handleComparisonColumnFieldChange}\r\n        value={comparisonColumns}\r\n        sx={{ width: '100%' }}\r\n        renderOption={(props, option, { selected }) => (\r\n          <li {...props}>\r\n            <Checkbox\r\n              icon={icon}\r\n              checkedIcon={checkedIcon}\r\n              style={{ marginRight: 8 }}\r\n              checked={selected}\r\n            />\r\n            {option}\r\n          </li>\r\n        )}\r\n        renderInput={(params: any) => (<TextField\r\n          {...params}\r\n          variant=\"standard\"\r\n          required={true}\r\n          error={!!comparisonColumnsError.length}\r\n          onBlur={handleComparisonColumnsBlur}\r\n        />)}\r\n      />\r\n      {!!comparisonColumnsError.length && <Typography variant=\"caption\" sx={{ color: '#d32f2f' }}>{comparisonColumnsError.join('\\n')}</Typography>}\r\n    </>\r\n  );\r\n}\r\n\r\nexport default ComparisonColumnAutocomplete;","import React from 'react';\r\nimport ComparisonColumnAutocomplete from '../../components/comparison-column-autocomplete';\r\nimport { connect } from 'react-redux';\r\nimport { changeComparisonColumn, setComparisonColumnsError } from '../../state/actions/document';\r\n\r\ninterface Props {\r\n  selectedDocument: any;\r\n  comparisonColumns: Array<string>;\r\n  changeComparisonColumn: any;\r\n  comparisonColumnsError: Array<string>;\r\n  setComparisonColumnsError: any;\r\n  index: number;\r\n}\r\n\r\nconst ComparisonColumnAutocompleteContainer = ({\r\n  selectedDocument,\r\n  comparisonColumns,\r\n  changeComparisonColumn,\r\n  comparisonColumnsError,\r\n  setComparisonColumnsError,\r\n  index\r\n}: Props) => {\r\n  const handleComparisonColumnFieldChange = (_: any, newValue: Array<string>) => {\r\n    changeComparisonColumn(newValue, index);\r\n    // setComparisonColumnsError(newValue, index)\r\n  };\r\n\r\n  const handleComparisonColumnsBlur = () => {\r\n    setComparisonColumnsError(comparisonColumns, index)\r\n  };\r\n\r\n  return (\r\n    <ComparisonColumnAutocomplete\r\n      selectedDocument={selectedDocument}\r\n      comparisonColumns={comparisonColumns}\r\n      comparisonColumnsError={comparisonColumnsError}\r\n      handleComparisonColumnsBlur={handleComparisonColumnsBlur}\r\n      handleComparisonColumnFieldChange={handleComparisonColumnFieldChange}\r\n      index={index}\r\n    />\r\n  );\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch: any) => ({\r\n  changeComparisonColumn: (newValue: Array<string>, index: number) => dispatch(changeComparisonColumn(newValue, index)),\r\n  setComparisonColumnsError: (newValue: Array<string>, index: number) => dispatch(setComparisonColumnsError(newValue, index))\r\n});\r\n\r\nexport default connect(null, mapDispatchToProps)(ComparisonColumnAutocompleteContainer);","import React from 'react';\r\nimport {\r\n  Dialog,\r\n  DialogTitle,\r\n  DialogContent,\r\n  DialogContentText,\r\n  Typography\r\n} from '@mui/material';\r\nimport DataGrid, { Column } from 'devextreme-react/data-grid';\r\n\r\nconst formattedData = [\r\n  { 'Account Name': 'Pepsi Co.', Website: 'pepsi.com', 'Account Manager': 'Thomas Henry', DUNS: 123453 },\r\n  { 'Account Name': 'Tropicana', Website: 'tropicana.com', 'Account Manager': 'Jennifer Shaw', DUNS: 345234 },\r\n  { 'Account Name': 'Gatorade', Website: 'gatorade.com', 'Account Manager': 'Kim Yi', DUNS: 645345 }\r\n];\r\n\r\nconst unformattedData = [\r\n  'Pepsi Co.',\r\n  'Tropicana',\r\n  'Gatorade'\r\n];\r\n\r\ninterface Props {\r\n  isHelpModalOpen: boolean;\r\n  handleOpenHelpModal: any;\r\n}\r\n\r\nconst FileStructureHelpModal = ({ isHelpModalOpen, handleOpenHelpModal }: Props) => {\r\n  return (\r\n    <>\r\n      <Dialog\r\n        open={isHelpModalOpen}\r\n        onClose={handleOpenHelpModal}\r\n      >\r\n        <DialogTitle>Formatted vs. Unformatted Data</DialogTitle>\r\n        <DialogContent dividers={true}>\r\n        <DialogContentText>Formatted data example:</DialogContentText>\r\n        <DataGrid\r\n          id=\"formattedGridContainer\"\r\n          dataSource={formattedData}\r\n          showColumnLines={true}\r\n          columnAutoWidth={true}\r\n          showBorders={true}\r\n          width=\"100%\"\r\n          height=\"100%\"\r\n        />\r\n        <Typography variant=\"body2\">Note that \"formatted\" here is referring to the presence of defined column\r\n        names.</Typography>\r\n        <DialogContentText sx={{ marginTop: '1.5rem' }}>Unformatted data example:</DialogContentText>\r\n        <DataGrid \r\n          id=\"unformattedGridContainer\"\r\n          dataSource={unformattedData}\r\n          showColumnLines={true}\r\n          columnAutoWidth={true}\r\n          showBorders={true}\r\n          width=\"100%\"\r\n          height=\"100%\"\r\n        >\r\n          <Column caption=\"\" calculateCellValue={(data: any) => data} />\r\n        </DataGrid>\r\n        <Typography variant=\"body2\">Note that \"unformatted\" here is referring to the lack of defined column\r\n        names. If you're uploading an unformatted file, only copy/paste 1 column that you think would lead to the most\r\n        precise match when mapped to a column from the other file.</Typography>\r\n        </DialogContent>\r\n      </Dialog>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default FileStructureHelpModal;","import React, { useState } from 'react';\r\nimport {\r\n  FormControlLabel,\r\n  FormControl,\r\n  Radio,\r\n  RadioGroup,\r\n  FormLabel,\r\n  IconButton\r\n} from '@mui/material';\r\nimport { Help } from '@mui/icons-material';\r\nimport FileStructureHelpModal from '../file-structure-help-modal';\r\nimport { FORMATTED_DATA, UNFORMATTED_DATA } from '../../state/actions/document';\r\n\r\ninterface Props {\r\n  fileStructure: string;\r\n  handleFileStructureChange: any;\r\n  index: number;\r\n}\r\n\r\nconst FileStructureRadio = ({ fileStructure, handleFileStructureChange, index }: Props) => {\r\n  const [isHelpModalOpen, setIsHelpModalOpen] = useState(false);\r\n\r\n  const handleOpenHelpModal = () => {\r\n    setIsHelpModalOpen(!isHelpModalOpen);\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <FormControl>\r\n        <FormLabel>Is your data formatted or unformatted? <IconButton onClick={handleOpenHelpModal}><Help /></IconButton></FormLabel>\r\n        <RadioGroup\r\n          row\r\n          aria-labelledby=\"demo-controlled-radio-buttons-group\"\r\n          name=\"controlled-radio-buttons-group\"\r\n          value={fileStructure}\r\n          onChange={(event: any) => handleFileStructureChange(event, index)}\r\n        >\r\n          <FormControlLabel value={FORMATTED_DATA} control={<Radio />} label=\"Formatted\" />\r\n          <FormControlLabel value={UNFORMATTED_DATA} control={<Radio />} label=\"Unformatted\" />\r\n        </RadioGroup>\r\n      </FormControl>\r\n      <FileStructureHelpModal isHelpModalOpen={isHelpModalOpen} handleOpenHelpModal={handleOpenHelpModal} />\r\n    </>\r\n  );\r\n}\r\n\r\nexport default FileStructureRadio;","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport FileStructureRadio from '../../components/file-structure-radio';\r\nimport { setFileStructure } from '../../state/actions/document';\r\n\r\ninterface Props {\r\n  fileStructure: string;\r\n  setFileStructure: any;\r\n  index: number;\r\n}\r\n\r\nconst FileStructureRadioContainer = ({\r\n  setFileStructure,\r\n  fileStructure,\r\n  index\r\n}: Props) => {\r\n  const handleFileStructureChange = (event: any, index: number) => {\r\n    setFileStructure(index, event.target.value);\r\n  }\r\n\r\n  return (\r\n    <FileStructureRadio\r\n      handleFileStructureChange={handleFileStructureChange}\r\n      fileStructure={fileStructure}\r\n      index={index}\r\n    />\r\n  );\r\n}\r\n\r\n// const mapStateToProps = (state: any) => ({\r\n//   fileStructure1: state.document.fileStructure1,\r\n//   fileStructure2: state.document.fileStructure2,\r\n// });\r\n\r\nconst mapDispatchToProps = (dispatch: any) => ({\r\n  setFileStructure: (index: number, event: any) => dispatch(setFileStructure(index, event))\r\n});\r\n\r\nexport default connect(null, mapDispatchToProps)(FileStructureRadioContainer);","import React from 'react';\r\nimport { TextField } from '@mui/material';\r\n\r\ninterface Props {\r\n  unformattedData: string;\r\n  handleUnformattedDataChange: any;\r\n}\r\n\r\nconst UnformattedDataTextField = ({\r\n  unformattedData,\r\n  handleUnformattedDataChange\r\n}: Props) => {\r\n  return (\r\n    <TextField\r\n      multiline\r\n      maxRows={5}\r\n      variant=\"standard\"\r\n      sx={{ width: '100%' }}\r\n      helperText=\"Unformatted data\"\r\n      value={unformattedData}\r\n      onChange={handleUnformattedDataChange}\r\n    />\r\n  );\r\n}\r\n\r\nexport default UnformattedDataTextField;","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport UnformattedDataTextField from '../../components/unformatted-data-textfield';\r\nimport { changeUnformattedData } from '../../state/actions/document';\r\n\r\ninterface Props {\r\n  unformattedData: string;\r\n  index: number;\r\n  changeUnformattedData: any;\r\n}\r\n\r\nconst UnformattedDataTextFieldContainer = ({\r\n  unformattedData,\r\n  index,\r\n  changeUnformattedData\r\n}: Props) => {\r\n  const handleUnformattedDataChange = (event: any) => {\r\n    changeUnformattedData(index, event.target.value);\r\n  }\r\n\r\n  return (\r\n    <UnformattedDataTextField\r\n      handleUnformattedDataChange={handleUnformattedDataChange}\r\n      unformattedData={unformattedData}\r\n    />\r\n  );\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch: any) => ({\r\n  changeUnformattedData: (index: number, value: string) => dispatch(changeUnformattedData(index, value))\r\n});\r\n\r\nexport default connect(null, mapDispatchToProps)(UnformattedDataTextFieldContainer)","import React from 'react';\r\nimport { TextField } from '@mui/material';\r\n\r\ninterface Props {\r\n  partnerName: string;\r\n  changePartnerName: any;\r\n}\r\n\r\nconst PartnerNameTextfield = ({\r\n  partnerName,\r\n  changePartnerName\r\n}: Props) => {\r\n  return (\r\n    <>\r\n      <TextField\r\n        helperText=\"Partner Sales Rep Name\"\r\n        variant=\"standard\"\r\n        sx={{ width: '100%' }}\r\n        value={partnerName}\r\n        onChange={changePartnerName}\r\n      />\r\n    </>\r\n  );\r\n}\r\n\r\nexport default PartnerNameTextfield;","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport PartnerNameTextfield from '../../components/partner-name-textfield';\r\nimport { changePartnerName } from '../../state/actions/document';\r\n\r\ninterface Props {\r\n  partnerName: string;\r\n  changePartnerName: any;\r\n}\r\n\r\nconst PartnerNameTextFieldContainer = ({\r\n  partnerName,\r\n  changePartnerName\r\n}: Props) => {\r\n  return (\r\n    <PartnerNameTextfield partnerName={partnerName} changePartnerName={changePartnerName} />\r\n  );\r\n}\r\n\r\nconst mapStateToProps = (state: any) => ({\r\n  partnerName: state.document.partnerName\r\n});\r\n\r\nconst mapDispatchToProps = (dispatch: any) => ({\r\n  changePartnerName: (event: any) => dispatch(changePartnerName(event.target.value))\r\n});\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(PartnerNameTextFieldContainer);","import React from 'react';\r\nimport { TextField } from '@mui/material';\r\n\r\ninterface Props {\r\n  partnerCompany: string;\r\n  changePartnerCompany: any;\r\n}\r\n\r\nconst PartnerCompanyTextfield = ({\r\n  partnerCompany,\r\n  changePartnerCompany\r\n}: Props) => {\r\n  return (\r\n    <>\r\n      <TextField\r\n        helperText=\"Partner Company\"\r\n        variant=\"standard\"\r\n        sx={{ width: '100%' }}\r\n        value={partnerCompany}\r\n        onChange={changePartnerCompany}\r\n      />\r\n    </>\r\n  );\r\n}\r\n\r\nexport default PartnerCompanyTextfield;","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport PartnerCompanyTextfield from '../../components/partner-company-textfield';\r\nimport { changePartnerCompany } from '../../state/actions/document';\r\n\r\ninterface Props {\r\n  partnerCompany: string;\r\n  changePartnerCompany: any;\r\n}\r\n\r\nconst PartnerCompanyTextFieldContainer = ({\r\n  partnerCompany,\r\n  changePartnerCompany\r\n}: Props) => {\r\n  return (\r\n    <PartnerCompanyTextfield partnerCompany={partnerCompany} changePartnerCompany={changePartnerCompany} />\r\n  );\r\n}\r\n\r\nconst mapStateToProps = (state: any) => ({\r\n  partnerCompany: state.document.partnerCompany\r\n});\r\n\r\nconst mapDispatchToProps = (dispatch: any) => ({\r\n  changePartnerCompany: (event: any) => dispatch(changePartnerCompany(event.target.value))\r\n});\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(PartnerCompanyTextFieldContainer);","import React from 'react';\r\nimport { Typography, Checkbox } from '@mui/material';\r\nimport { Column, DataGrid, Pager, Paging } from 'devextreme-react/data-grid';\r\nimport { SelectedDocument } from '../../state/reducers/document';\r\n\r\ninterface Props {\r\n  selectedDocument: SelectedDocument;\r\n  handleColumnClick: any;\r\n  comparisonColumns: Array<string>;\r\n  index: number;\r\n}\r\n\r\nconst renderGridCell = (\r\n  data: any,\r\n  handleColumnClick: any,\r\n  comparisonColumns: Array<string>,\r\n  index: number\r\n) => {\r\n  return (\r\n    <div>\r\n      {data.column? data.column.dataField : data}\r\n      <Checkbox\r\n        onClick={() => {\r\n          handleColumnClick(data, index)\r\n        }}\r\n        checked={comparisonColumns.indexOf(data) > -1}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n\r\nconst FileDataPreviewTable = ({\r\n  selectedDocument,\r\n  handleColumnClick,\r\n  comparisonColumns,\r\n  index\r\n}: Props) => {\r\n  return (\r\n    <>\r\n      <Typography variant=\"subtitle1\" sx={{ margin: '2rem 0 0'}}>\r\n      </Typography>\r\n      <DataGrid\r\n        id=\"gridContainer\"\r\n        dataSource={selectedDocument.columnChooserGridData}\r\n        allowColumnReordering={true}\r\n        allowColumnResizing={true}\r\n        columnAutoWidth={true}\r\n        showBorders={true}\r\n      >\r\n        {selectedDocument.allColumns ? selectedDocument.allColumns.map((colProps: any, colIdx: number) => {\r\n          return (\r\n            <Column\r\n              dataField={colProps}\r\n              allowSorting={false}\r\n              key={`col-${colIdx}-1`}\r\n              headerCellRender={() => renderGridCell(colProps, handleColumnClick, comparisonColumns, index)}\r\n            />\r\n          );\r\n        }) : []}\r\n        <Paging defaultPageSize={2} />\r\n        <Pager\r\n          visible={true}\r\n          displayMode={\"full\"}\r\n          showPageSizeSelector={false}\r\n          showInfo={true}\r\n          showNavigationButtons={true}\r\n        />\r\n      </DataGrid>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default FileDataPreviewTable;","import React from 'react';\r\nimport {\r\n  Dialog,\r\n  DialogTitle,\r\n  DialogContent,\r\n  DialogContentText,\r\n  Typography\r\n} from '@mui/material';\r\n\r\ninterface Props {\r\n  isHelpModalOpen: boolean;\r\n  handleOpenHelpModal: any;\r\n}\r\n\r\nconst ChooseColumnHelpModal = ({ isHelpModalOpen, handleOpenHelpModal }: Props) => {\r\n  return (\r\n    <>\r\n      <Dialog\r\n        open={isHelpModalOpen}\r\n        onClose={handleOpenHelpModal}\r\n      >\r\n        <DialogTitle>Choose columns to compare/match with the other file's columns</DialogTitle>\r\n        <DialogContent dividers={true}>\r\n        <Typography variant=\"body2\">Columns from file A that will be compared with columns\r\n          from file B to determine a matching account. Limit: 5 columns. Hint: the more unique a column's value is\r\n          to a company, the better (DUNS number, company website, etc.).</Typography>\r\n        <DialogContentText sx={{ marginTop: '1.5rem' }}>Using the text input:</DialogContentText>\r\n        <Typography variant=\"body2\">Type in a column that you're trying to find. If it appears in the\r\n          results drop down, click it to select the column. The checkbox next to its label will appear checked.\r\n          Multiple checkboxes can be selected.</Typography>\r\n        <DialogContentText sx={{ marginTop: '1.5rem' }}>Using the data grid:</DialogContentText>\r\n        <Typography variant=\"body2\">The grid below shows 2 example rows from the uploaded file. Columns for\r\n          comparison can also be selected by clicking the column headers.</Typography>\r\n        </DialogContent>\r\n      </Dialog>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default ChooseColumnHelpModal;","import React from 'react';\r\nimport {\r\n  Dialog,\r\n  DialogTitle,\r\n  DialogContent,\r\n  DialogContentText,\r\n  Typography\r\n} from '@mui/material';\r\n\r\ninterface Props {\r\n  isHelpModalOpen: boolean;\r\n  handleOpenHelpModal: any;\r\n}\r\n\r\nconst FileSourceHelpModal = ({ isHelpModalOpen, handleOpenHelpModal }: Props) => {\r\n  return (\r\n    <>\r\n      <Dialog\r\n        open={isHelpModalOpen}\r\n        onClose={handleOpenHelpModal}\r\n      >\r\n        <DialogTitle>Upload a file from your computer or use a pinned file</DialogTitle>\r\n        <DialogContent dividers={true}>\r\n        <DialogContentText sx={{ marginTop: '1.5rem' }}>Upload a file from your computer:</DialogContentText>\r\n        <Typography variant=\"body2\">Click the Select File button and search for a file.</Typography>\r\n        <DialogContentText sx={{ marginTop: '1.5rem' }}>Use a pinned file:</DialogContentText>\r\n        <Typography variant=\"body2\">In your profile page, you can save a file as a \"pinned file\". This would be used when you\r\n          have a file that you will regularly be compared to partners' files. Typically, it would be the file that contains all of\r\n          your accounts.</Typography>\r\n        </DialogContent>\r\n      </Dialog>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default FileSourceHelpModal;","import React, { useEffect, useState } from 'react';\r\nimport { FormLabel, IconButton, Typography } from '@mui/material';\r\nimport { UserState } from '../../state/reducers/user';\r\nimport FileSelectionFieldContainer from '../../containers/file-selection-field';\r\nimport PinnedFileChipContainer from '../../containers/pinned-file-chip';\r\nimport FileSourceRadioContainer from '../../containers/file-source-radio';\r\nimport ComparisonColumnAutocompleteContainer from '../../containers/comparison-column-autocomplete';\r\nimport FileStructureRadioContainer from '../../containers/file-structure-radio';\r\nimport UnformattedDataTextfieldContainer from '../../containers/unformatted-data-textfield-container';\r\nimport { FORMATTED_DATA } from '../../state/actions/document';\r\nimport PartnerNameTextfieldContainer from '../../containers/partner-name-textfield';\r\nimport PartnerCompanyTextfieldContainer from '../../containers/partner-company-textfield';\r\nimport FileDataPreviewTable from '../file-data-preview-table';\r\nimport { SelectedDocument } from '../../state/reducers/document';\r\nimport { Help } from '@mui/icons-material';\r\nimport ChooseColumnHelpModal from '../choose-column-help-modal';\r\nimport FileSourceHelpModal from '../file-source-help-modal';\r\n\r\ninterface UploadDocumentColumnProps {\r\n  selectedDocument: SelectedDocument;\r\n  comparisonColumns: Array<string>;\r\n  comparisonColumnsError: Array<string>;\r\n  fileSource: string;\r\n  index: number;\r\n  user: UserState;\r\n  setAllColumns: any;\r\n  handleColumnClick: any;\r\n  fileStructure: any;\r\n  unformattedData: string;\r\n}\r\n\r\nconst UploadDocumentColumn = ({\r\n  selectedDocument,\r\n  comparisonColumns,\r\n  comparisonColumnsError,\r\n  fileSource,\r\n  index,\r\n  user,\r\n  setAllColumns,\r\n  handleColumnClick,\r\n  fileStructure,\r\n  unformattedData\r\n}: UploadDocumentColumnProps) => {\r\n  const [isChooseColumnHelpModalOpen, setIsChooseColumnHelpModalOpen] = useState(false);\r\n  const [isSelectFileSourceHelpModalOpen, setIsSelectFileSourceHelpModalOpen] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (selectedDocument.data && selectedDocument.data[0]) {\r\n      setAllColumns(Array.from(Object.keys(selectedDocument.data[0])), index);\r\n    }\r\n  }, [selectedDocument.data, setAllColumns, index]);\r\n\r\n  const handleOpenFileSourceHelpModal = () => {\r\n    setIsSelectFileSourceHelpModalOpen(!isSelectFileSourceHelpModalOpen);\r\n  }\r\n\r\n  const handleOpenChooseColumnHelpModal = () => {\r\n    setIsChooseColumnHelpModalOpen(!isChooseColumnHelpModalOpen);\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <Typography variant='h6' sx={{ marginTop: '3rem', marginBottom: '1rem' }}>\r\n        {index === 0 ? 'MY ACCOUNTS' : 'PARTNER\\'S ACCOUNTS'}\r\n      </Typography>\r\n      <FileStructureRadioContainer\r\n        index={index}\r\n        fileStructure={fileStructure}\r\n      />\r\n      {fileStructure === FORMATTED_DATA ?\r\n        <>\r\n          <FormLabel sx={{ marginTop: '4rem', marginBottom: '0.25rem' }}>Select a file <IconButton onClick={handleOpenFileSourceHelpModal}><Help /></IconButton></FormLabel>\r\n          {!!user.pinnedFileName && index === 0 && <FileSourceRadioContainer\r\n            fileSource={fileSource}\r\n            index={index}\r\n          />}\r\n          <div className=\"file-selection\">\r\n            {fileSource === 'upload' ?\r\n              <FileSelectionFieldContainer selectedDocument={selectedDocument} index={index} /> :\r\n              <PinnedFileChipContainer />\r\n            }\r\n          </div>\r\n          <FormLabel sx={{ marginTop: '4.5rem', marginBottom: '0.25rem' }}>Use autocomplete field or data grid to pick columns <IconButton onClick={handleOpenChooseColumnHelpModal}><Help /></IconButton></FormLabel>\r\n          <ComparisonColumnAutocompleteContainer\r\n            selectedDocument={selectedDocument}\r\n            comparisonColumns={comparisonColumns}\r\n            comparisonColumnsError={comparisonColumnsError}\r\n            index={index}\r\n          />\r\n          <div style={{ width: '100%'}}>\r\n            <FileDataPreviewTable\r\n              selectedDocument={selectedDocument}\r\n              handleColumnClick={handleColumnClick}\r\n              comparisonColumns={comparisonColumns}\r\n              index={index}\r\n            />\r\n          </div>\r\n        </>:\r\n        <>\r\n          <FormLabel sx={{ marginTop: '4.5rem', marginBottom: '0.25rem' }}>Copy and Paste unformatted data</FormLabel>\r\n          <UnformattedDataTextfieldContainer\r\n            unformattedData={unformattedData}\r\n            index={index}\r\n          />\r\n        </>\r\n      }\r\n      {index === 1 && <>\r\n        <FormLabel sx={{ marginTop: fileStructure === FORMATTED_DATA ? '3.5rem' : '4rem', marginBottom: '0.5rem' }}>Enter partner info</FormLabel>\r\n        <PartnerNameTextfieldContainer />\r\n        <PartnerCompanyTextfieldContainer />\r\n      </>}\r\n      <ChooseColumnHelpModal isHelpModalOpen={isChooseColumnHelpModalOpen} handleOpenHelpModal={handleOpenChooseColumnHelpModal} />\r\n      <FileSourceHelpModal isHelpModalOpen={isSelectFileSourceHelpModalOpen} handleOpenHelpModal={handleOpenFileSourceHelpModal} />\r\n    </>\r\n  );\r\n}\r\n\r\nexport default UploadDocumentColumn;","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { UserState } from '../../state/reducers/user';\r\nimport UploadDocumentColumn from '../../components/upload-document-column';\r\n\r\ninterface Props {\r\n  user: UserState;\r\n  selectedDocument: any;\r\n  comparisonColumns: Array<string>;\r\n  comparisonColumnsError: Array<string>;\r\n  fileSource: string;\r\n  index: number;\r\n  handleColumnClick: any;\r\n  setAllColumns: any;\r\n  fileStructure: string;\r\n  unformattedData: string;\r\n}\r\n\r\nconst UploadDocumentColumnContainer = ({\r\n  user,\r\n  selectedDocument,\r\n  comparisonColumns,\r\n  comparisonColumnsError,\r\n  fileSource,\r\n  index,\r\n  handleColumnClick,\r\n  setAllColumns,\r\n  fileStructure,\r\n  unformattedData\r\n}: Props) => {\r\n  return (\r\n    <UploadDocumentColumn\r\n      selectedDocument={selectedDocument}\r\n      comparisonColumns={comparisonColumns}\r\n      comparisonColumnsError={comparisonColumnsError}\r\n      fileSource={fileSource}\r\n      user={user}\r\n      index={index}\r\n      handleColumnClick={handleColumnClick}\r\n      setAllColumns={setAllColumns}\r\n      fileStructure={fileStructure}\r\n      unformattedData={unformattedData}\r\n    />\r\n  );\r\n}\r\n\r\nconst mapStateToProps = (state: any) => ({\r\n  user: state.user\r\n});\r\n\r\nexport default connect(mapStateToProps)(UploadDocumentColumnContainer);","import { FORMATTED_DATA, UNFORMATTED_DATA } from '../state/actions/document';\r\nimport { SelectedDocument } from '../state/reducers/document';\r\n\r\nexport const createDocumentSampleRows = (\r\n  selectedDocument: SelectedDocument,\r\n  fileStructure: string,\r\n  unformattedData: string\r\n) => {\r\n  let docSampleData: Array<any>;\r\n  if (fileStructure === FORMATTED_DATA) {\r\n    if (selectedDocument.data.length && selectedDocument.data.length > 10) {\r\n      docSampleData = selectedDocument.data.slice(0, 10);\r\n    } else {\r\n      docSampleData =  selectedDocument.data;\r\n    }\r\n  } else {\r\n    if (unformattedData.length && unformattedData.length > 10) {\r\n      docSampleData = unformattedData.split('\\n').slice(0, 10);\r\n    } else {\r\n      docSampleData =  unformattedData.split('\\n');\r\n    }\r\n  }\r\n  return docSampleData;\r\n}\r\n\r\nexport const updateColumnsForDocument = (\r\n  fileStructure: string,\r\n  comparisonColumns: Array<string>,\r\n  documentNumber: number\r\n) => {\r\n  let columns: Array<string> = [];\r\n  if (fileStructure === FORMATTED_DATA) {\r\n    columns = columns.concat([...comparisonColumns]);\r\n  } else if (fileStructure === UNFORMATTED_DATA) {\r\n    columns.push(`Unformatted Data ${documentNumber}`);\r\n  }\r\n  return columns;\r\n}\r\n","import React, { useEffect, useState } from 'react';\r\nimport { Dialog, DialogContent, DialogContentText, DialogTitle } from '@mui/material';\r\nimport DataGrid from 'devextreme-react/data-grid';\r\nimport { DocumentState } from '../../state/reducers/document';\r\nimport { createDocumentSampleRows, updateColumnsForDocument } from '../../utils/results-preview.utils';\r\nimport { FORMATTED_DATA, UNFORMATTED_DATA } from '../../state/actions/document';\r\n\r\ninterface Props {\r\n  isPreviewModalOpen: boolean;\r\n  handleClosePreview: any;\r\n  document: DocumentState;\r\n}\r\n\r\nconst ResultsPreviewModal = ({\r\n  isPreviewModalOpen,\r\n  handleClosePreview,\r\n  document\r\n}: Props) => {\r\n  const [resultsData, setResultsData] = useState<Array<any>>([]);\r\n  const {\r\n    selectedDocument1,\r\n    selectedDocument2,\r\n    comparisonColumns1,\r\n    comparisonColumns2,\r\n    fileStructure1,\r\n    fileStructure2,\r\n    unformattedData1,\r\n    unformattedData2\r\n  } = document;\r\n\r\n  useEffect(() => {\r\n    const doc1SampleData: Array<any> = createDocumentSampleRows(selectedDocument1, fileStructure1, unformattedData1);\r\n    const doc2SampleData: Array<any> = createDocumentSampleRows(selectedDocument2, fileStructure2, unformattedData2);\r\n\r\n    let columns: Array<any> = [];\r\n    columns = updateColumnsForDocument(fileStructure1, comparisonColumns1, 1);\r\n    columns = [...columns, ...updateColumnsForDocument(fileStructure2, comparisonColumns2, 2)];\r\n\r\n    const updatedResultsData = [];\r\n    for (let i = 0; i < 5; i++) {\r\n      \r\n      const row = columns.reduce((rowObj: any, col: string, index: number) => {\r\n        if (\r\n          fileStructure1 === FORMATTED_DATA &&\r\n          comparisonColumns1.indexOf(col) > -1 &&\r\n          index < comparisonColumns1.length\r\n        ) {\r\n          return { ...rowObj, [col]: doc1SampleData[i][col] || null };\r\n        } else if (fileStructure1 === UNFORMATTED_DATA && index === 0) {\r\n          return { ...rowObj, 'Unformatted Data 1': doc1SampleData[i] || null }\r\n        } else if (\r\n          fileStructure2 === FORMATTED_DATA &&\r\n          comparisonColumns2.indexOf(col) > -1 &&\r\n          ((fileStructure1 === FORMATTED_DATA && index >= comparisonColumns1.length) ||\r\n          (fileStructure1 === UNFORMATTED_DATA && index > 0))\r\n        ) {\r\n          return { ...rowObj, [col]: doc2SampleData[i][col] || null };\r\n        } else if (fileStructure2 === UNFORMATTED_DATA) {\r\n          return { ...rowObj, 'Unformatted Data 2': doc2SampleData[i] || null }\r\n        }\r\n        return { ...rowObj };\r\n      }, {});\r\n      updatedResultsData.push(row);\r\n    }\r\n\r\n    setResultsData(updatedResultsData);\r\n  }, [selectedDocument1, fileStructure1, unformattedData1, selectedDocument2, fileStructure2, unformattedData2, comparisonColumns1, comparisonColumns2])\r\n\r\n  return (\r\n    <Dialog\r\n      open={isPreviewModalOpen}\r\n      onClose={handleClosePreview}\r\n    >\r\n      <DialogTitle>Results Preview</DialogTitle>\r\n      <DialogContent dividers={true}>\r\n        <DialogContentText sx={{ marginBottom: '1rem' }}>Here's what your results will look like based on the columns you've chosen:</DialogContentText>\r\n        <DataGrid\r\n          id=\"formattedGridContainer\"\r\n          dataSource={resultsData}\r\n          showColumnLines={true}\r\n          columnAutoWidth={true}\r\n          showBorders={true}\r\n          width=\"100%\"\r\n          height=\"100%\"\r\n        />\r\n      </DialogContent>\r\n    </Dialog>\r\n  );\r\n}\r\n\r\nexport default ResultsPreviewModal;","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport ResultsPreviewModal from '../../components/results-preview-modal';\r\nimport { DocumentState } from '../../state/reducers/document';\r\n\r\ninterface Props {\r\n  isPreviewModalOpen: boolean;\r\n  handleClosePreview: any;\r\n  document: DocumentState;\r\n}\r\n\r\nconst ResultsPreviewModalContainer = ({\r\n  isPreviewModalOpen,\r\n  handleClosePreview,\r\n  document\r\n}: Props) => {\r\n  return (\r\n    <ResultsPreviewModal\r\n      isPreviewModalOpen={isPreviewModalOpen}\r\n      handleClosePreview={handleClosePreview}\r\n      document={document}\r\n    />\r\n  );\r\n}\r\n\r\nconst mapStateToProps = (state: any) => ({\r\n  document: state.document\r\n});\r\n\r\nexport default connect(mapStateToProps)(ResultsPreviewModalContainer);","export const UPDATE_USER = 'UPDATE_USER';\r\n\r\nexport const updateUser = (user: any) => ({\r\n  type: UPDATE_USER,\r\n  payload: user\r\n});","import { UPDATE_USER } from '../../actions/user';\r\nimport { PIN_FILE_SUCCESS } from '../../actions/document';\r\n\r\nexport const FREE = 'FREE';\r\nexport const FREE_DESCRIPTION = 'Free: Sign up now to be able to compare 10 lists';\r\nexport const PREMIUM = 'PREMIUM';\r\nexport const PREMIUM_DESCRIPTION = 'Premium: You can compare an unlimited amount of lists per month';\r\nexport const FREE_COMPARISONS_LIMIT: number = 3;\r\n\r\nexport interface UserState {\r\n  firstname: string;\r\n  lastname: string;\r\n  email: string;\r\n  company: string;\r\n  pinnedFileName: string;\r\n  pinnedFileId: string;\r\n  activeSubscription: boolean;\r\n  subscriptionType: string;\r\n  freeComparisons: number;\r\n}\r\n\r\nexport const initialState: UserState = {\r\n  firstname: '',\r\n  lastname: '',\r\n  email: '',\r\n  company: '',\r\n  pinnedFileName: '',\r\n  pinnedFileId: '',\r\n  activeSubscription: false,\r\n  subscriptionType: '',\r\n  freeComparisons: 0\r\n}\r\n\r\nexport const userReducer = (state = initialState, action: any) => {\r\n  switch (action.type) {\r\n    case UPDATE_USER:\r\n      return {\r\n        ...state,\r\n        email: action.payload.email || state.email,\r\n        firstname: action.payload.firstname || state.firstname,\r\n        lastname: action.payload.lastname || state.lastname,\r\n        company: action.payload.company || state.company,\r\n        pinnedFileName: action.payload.pinned_filename || state.pinnedFileName,\r\n        pinnedFileId: action.payload.pinned_file_id || state.pinnedFileId,\r\n        activeSubscription: action.payload.active_subscription || state.activeSubscription,\r\n        subscriptionType: action.payload.subscription_type || state.subscriptionType,\r\n        freeComparisons: action.payload.free_comparisons || state.freeComparisons\r\n      };\r\n    case PIN_FILE_SUCCESS:\r\n      return {\r\n        ...state,\r\n        pinnedFileName: action.payload.pinned_filename,\r\n        pinnedFileId: action.payload.pinned_file_id\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n}","import { FORMATTED_DATA, UNFORMATTED_DATA } from \"../state/actions/document\"\r\nimport { SelectedDocument } from \"../state/reducers/document\";\r\nimport { FREE, FREE_COMPARISONS_LIMIT, UserState } from \"../state/reducers/user\";\r\n\r\nexport const isSubmitButtonEnabled = (\r\n  fileStructure1: string,\r\n  fileStructure2: string,\r\n  comparisonColumns1: Array<string>,\r\n  comparisonColumns2: Array<string>,\r\n  unformattedData1: string,\r\n  unformattedData2: string,\r\n  selectedDocument1: SelectedDocument,\r\n  selectedDocument2: SelectedDocument,\r\n  userFreeComparisons: number,\r\n  userSubscriptionType: string\r\n): boolean => {\r\n  const isUserAccountDataValid = checkOnePersonsAccountData(\r\n    fileStructure1,\r\n    selectedDocument1,\r\n    comparisonColumns1,\r\n    unformattedData1\r\n  );\r\n  const isPartnerAccountDataValid = checkOnePersonsAccountData(\r\n    fileStructure2,\r\n    selectedDocument2,\r\n    comparisonColumns2,\r\n    unformattedData2\r\n  );\r\n\r\n  if (fileStructure1 === FORMATTED_DATA && fileStructure2 === FORMATTED_DATA) {\r\n    if (comparisonColumns1.length !== comparisonColumns2.length) {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  const userCanMakeComparisons: boolean = !isUserOutOfFreeComparisons(userFreeComparisons, userSubscriptionType);\r\n\r\n  return isUserAccountDataValid && isPartnerAccountDataValid && userCanMakeComparisons;\r\n}\r\n\r\nexport const checkOnePersonsAccountData = (\r\n  fileStructure: string,\r\n  selectedDocument: SelectedDocument,\r\n  comparisonColumns: Array<string>,\r\n  unformattedData: string\r\n) => {\r\n  if (fileStructure === FORMATTED_DATA) {\r\n    if (!selectedDocument || !selectedDocument.data || !selectedDocument.data.length) {\r\n      return false;\r\n    }\r\n    if (!comparisonColumns || !comparisonColumns.length) {\r\n      return false;\r\n    }\r\n  } else if (fileStructure === UNFORMATTED_DATA) {\r\n    if (!unformattedData || !unformattedData.length) {\r\n      return false;\r\n    }\r\n  }\r\n  return true;\r\n}\r\n\r\nexport const createCapitalizedPartnerName = (partnerName: string) => {\r\n  if (partnerName) {\r\n    return capitalizeFirstLetterOfWord(partnerName);\r\n  }\r\n  return '';\r\n}\r\n\r\nexport const createCapitalizedPartnerCompany = (partnerCompany: string) => {\r\n  if (partnerCompany) {\r\n    const words: Array<string> = partnerCompany.split(\" \");\r\n    return words.map((word: string) => capitalizeFirstLetterOfWord(word)).join(\" \");\r\n  }\r\n  return '';\r\n}\r\n\r\nexport const createCapitalizedUserName = (user: UserState) => {\r\n  if (user && user.firstname && user.lastname) {\r\n    const capitalizedFirstName = capitalizeFirstLetterOfWord(user.firstname);\r\n    const capitalizedLastName = capitalizeFirstLetterOfWord(user.lastname);\r\n    return `${capitalizedFirstName} ${capitalizedLastName}`;\r\n  }\r\n  return '';\r\n}\r\n\r\nexport const capitalizeFirstLetterOfWord = (word: string) => word[0].toUpperCase() + word.substring(1);\r\n\r\nexport const isUserOutOfFreeComparisons = (userFreeComparisons: number, userSubscriptionType: string) => {\r\n  if (userSubscriptionType === FREE && userFreeComparisons >= FREE_COMPARISONS_LIMIT) {\r\n    return true;\r\n  }\r\n  return false;\r\n}","import React from 'react';\r\nimport { styled, Tooltip, tooltipClasses, TooltipProps } from '@mui/material';\r\n\r\nconst InfoTooltip = styled(({ className, ...props }: TooltipProps) => (\r\n  <Tooltip {...props} classes={{ popper: className }} />\r\n))(({ theme }) => ({\r\n  [`& .${tooltipClasses.tooltip}`]: {\r\n    fontSize: theme.typography.pxToRem(18),\r\n  },\r\n}));\r\n\r\nexport default InfoTooltip;","import React, { useState } from 'react';\r\nimport UploadDocumentColumnContainer from '../../containers/upload-document-column';\r\nimport ResultsPreviewModalContainer from '../../containers/results-preview-modal';\r\nimport { Grid, Fab, Divider } from '@mui/material';\r\nimport { Upload, Preview } from '@mui/icons-material';\r\nimport { DocumentState } from '../../state/reducers/document';\r\nimport { isSubmitButtonEnabled } from '../../utils/duplicates-table.utils';\r\nimport { FREE_COMPARISONS_LIMIT, PREMIUM } from '../../state/reducers/user';\r\nimport InfoTooltip from '../info-tooltip';\r\n\r\ninterface UploadDocumentFormProps {\r\n  document: DocumentState;\r\n  setAllColumns: any;\r\n  handleColumnClick: any;\r\n  handleUploadAndCompare: any;\r\n  userFreeComparisons: number;\r\n  userSubscriptionType: string;\r\n}\r\n\r\nconst UploadDocumentForm = ({\r\n  document,\r\n  setAllColumns,\r\n  handleColumnClick,\r\n  handleUploadAndCompare,\r\n  userFreeComparisons,\r\n  userSubscriptionType\r\n}: UploadDocumentFormProps): any => {\r\n  /* For the preview modal, we use local state because we don't need its open state to be\r\n  persisted when a user goes to another step */\r\n  const [isPreviewModalOpen, setIsPreviewModalOpen] = useState(false);\r\n\r\n  const {\r\n    selectedDocument1,\r\n    selectedDocument2,\r\n    comparisonColumns1,\r\n    comparisonColumns2,\r\n    comparisonColumns1Error,\r\n    comparisonColumns2Error,\r\n    fileSource1,\r\n    fileSource2,\r\n    fileStructure1,\r\n    fileStructure2,\r\n    unformattedData1,\r\n    unformattedData2\r\n  } = document;\r\n\r\n  const handleOpenPreview = () => {\r\n    setIsPreviewModalOpen(true);\r\n  }\r\n\r\n  const handleClosePreview = () => {\r\n    setIsPreviewModalOpen(false);\r\n  }\r\n\r\n  /* Validation for whether the Submit button should be enabled or disabled. If documents\r\n  and columns haven't been selected, the button should be disabled. */\r\n  const isSubmitBtnEnabled: boolean = isSubmitButtonEnabled(\r\n    fileStructure1,\r\n    fileStructure2,\r\n    comparisonColumns1,\r\n    comparisonColumns2,\r\n    unformattedData1,\r\n    unformattedData2,\r\n    selectedDocument1,\r\n    selectedDocument2,\r\n    userFreeComparisons,\r\n    userSubscriptionType\r\n  );\r\n\r\n  return (\r\n    <>\r\n      <Grid\r\n        container\r\n        spacing={2}\r\n        direction=\"row\"\r\n        justifyContent=\"center\"\r\n        alignItems=\"start\"\r\n      >\r\n        <Grid\r\n          item\r\n          container\r\n          xs={8}\r\n          p={0}\r\n          sx={{ height: '100%' }}\r\n          direction=\"column\"\r\n          justifyContent=\"start\"\r\n          alignItems=\"center\"\r\n        >\r\n          <UploadDocumentColumnContainer\r\n            comparisonColumns={comparisonColumns1}\r\n            comparisonColumnsError={comparisonColumns1Error}\r\n            selectedDocument={selectedDocument1}\r\n            fileSource={fileSource1}\r\n            index={0}\r\n            setAllColumns={setAllColumns}\r\n            handleColumnClick={handleColumnClick}\r\n            fileStructure={fileStructure1}\r\n            unformattedData={unformattedData1}\r\n          />\r\n          <Divider sx={{ marginTop: '3rem', width: '100%', borderColor: '#1976D2' }} variant=\"middle\" />\r\n          <UploadDocumentColumnContainer\r\n            comparisonColumns={comparisonColumns2}\r\n            comparisonColumnsError={comparisonColumns2Error}\r\n            selectedDocument={selectedDocument2}\r\n            fileSource={fileSource2}\r\n            index={1}\r\n            setAllColumns={setAllColumns}\r\n            handleColumnClick={handleColumnClick}\r\n            fileStructure={fileStructure2}\r\n            unformattedData={unformattedData2}\r\n          />\r\n        </Grid>\r\n      </Grid>\r\n      <Grid\r\n        container\r\n        justifyContent=\"space-around\"\r\n        alignItems=\"center\"\r\n        sx={{ marginBottom: '4.5rem' }}\r\n      >\r\n        <Grid\r\n          item\r\n          container\r\n          xs={4}\r\n          direction=\"column\"\r\n          justifyContent=\"center\"\r\n          alignItems=\"center\"\r\n        >\r\n          <Fab\r\n            variant=\"extended\"\r\n            aria-label=\"add\"\r\n            sx={{ marginTop: '2rem', marginBottom: '1.5rem' }}\r\n            onClick={handleOpenPreview}\r\n          >\r\n            <Preview sx={{ mr: 1 }} />\r\n            Preview Results\r\n          </Fab>\r\n          <InfoTooltip\r\n            arrow\r\n            open={userSubscriptionType !== PREMIUM && userFreeComparisons >= FREE_COMPARISONS_LIMIT}\r\n            title={`You've used the ${FREE_COMPARISONS_LIMIT} free comparisons.\r\n            For an unlimited amount of comparisons, upgrade your subscription in your profile page.`}\r\n          >\r\n            <Fab\r\n              variant=\"extended\"\r\n              color=\"primary\"\r\n              aria-label=\"add\"\r\n              disabled={!isSubmitBtnEnabled}\r\n              onClick={handleUploadAndCompare}\r\n            >\r\n              <Upload sx={{ mr: 1 }} />\r\n              Upload and Compare\r\n            </Fab>\r\n          </InfoTooltip>\r\n        </Grid>\r\n      </Grid>\r\n      {isPreviewModalOpen && <ResultsPreviewModalContainer\r\n        isPreviewModalOpen={isPreviewModalOpen}\r\n        handleClosePreview={handleClosePreview}\r\n      />}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default UploadDocumentForm;","export const CHANGE_STEP = 'CHANGE_STEP';\r\n\r\nexport const changeStep = (newStep: number) => ({\r\n  type: CHANGE_STEP,\r\n  payload: newStep\r\n});","export const updateComparisonColumns = (comparisonColumns: Array<string>, updatedCol: string) => {\r\n  let newValue: Array<string> = [];\r\n  const indexOfCol = comparisonColumns.indexOf(updatedCol);\r\n  if (indexOfCol === -1) {\r\n    newValue = [...comparisonColumns, updatedCol];\r\n  } else {\r\n    newValue = [...comparisonColumns];\r\n    newValue.splice(indexOfCol, 1);\r\n  }\r\n  return newValue;\r\n}\r\n\r\nexport const addMessageToErrorList = (\r\n  errorList: Array<string>,\r\n  errorMessage: string,\r\n) => {\r\n  const errMsgIndex = errorList.indexOf(errorMessage);\r\n  if (errMsgIndex === -1) errorList.push(errorMessage);\r\n}\r\n\r\nexport const removeMessageFromErrorList = (\r\n  errorList: Array<string>,\r\n  errorMessage: string,\r\n) => {\r\n  const errMsgIndex = errorList.indexOf(errorMessage);\r\n  if (errMsgIndex > -1) errorList.splice(errMsgIndex, 1);\r\n}","import React from 'react';\r\nimport axios from 'axios';\r\nimport { connect } from 'react-redux';\r\nimport UploadDocumentForm from '../../components/upload-document-form';\r\nimport { DocumentState } from '../../state/reducers/document';\r\nimport { uploadDocumentSuccess, setAllColumns, changeComparisonColumn } from '../../state/actions/document';\r\nimport { changeStep } from '../../state/actions/step-progress';\r\nimport { showError, hideError } from '../../state/actions/alert';\r\nimport { setIsLoading } from '../../state/actions/loading';\r\nimport { updateComparisonColumns } from '../../utils/update-comparison-columns';\r\nimport { getAccessToken } from '../../utils/access-token.utils';\r\nimport { updateUser } from '../../state/actions/user';\r\nimport { FREE, UserState } from '../../state/reducers/user';\r\n\r\ninterface Props {\r\n  activeStep: number;\r\n  document: DocumentState;\r\n  showError: any;\r\n  hideError: any;\r\n  uploadDocumentSuccess: any;\r\n  setIsLoading: any;\r\n  changeStep: any;\r\n  setAllColumns: any;\r\n  changeComparisonColumn: any;\r\n  user: UserState;\r\n  updateUser: any;\r\n}\r\n\r\nconst UploadDocumentFormContainer = ({\r\n  activeStep,\r\n  document,\r\n  showError,\r\n  hideError,\r\n  uploadDocumentSuccess,\r\n  setIsLoading,\r\n  changeStep,\r\n  setAllColumns,\r\n  changeComparisonColumn,\r\n  user,\r\n  updateUser\r\n}: Props) => {\r\n  /**\r\n   * When the user selects a column (by clicking a checkbox next to the column name in the data grid\r\n   * or using the autocomplete), this function updates the array of column names\r\n   * @param col Column in the selected file. Is represented in the DataGrid and\r\n   * can be selected by clicking the checkbox next to the column name\r\n   * @param index Number that indicates which file is the user selecting columns for\r\n   */\r\n  const handleColumnClick = (col: any, index: number) => {\r\n    const { comparisonColumns1, comparisonColumns2 } = document;\r\n    let newValue: Array<string> = [];\r\n    if (index === 0) {\r\n      newValue = updateComparisonColumns(comparisonColumns1, col);\r\n    } else {\r\n      newValue = updateComparisonColumns(comparisonColumns2, col);\r\n    }\r\n\r\n    changeComparisonColumn(newValue, index);\r\n  };\r\n\r\n  /**\r\n   * Puts the selected file and column name into a FormData instance,\r\n   * sends it to the server, and then changes to the next step where\r\n   * the duplicates will be displayed\r\n   */\r\n  const handleUploadAndCompare = () => {\r\n    const {\r\n      selectedDocument1,\r\n      selectedDocument2,\r\n      comparisonColumns1,\r\n      comparisonColumns2,\r\n      fileStructure1,\r\n      fileStructure2,\r\n      unformattedData1,\r\n      unformattedData2\r\n    } = document;\r\n    setIsLoading(true);\r\n    const formData = new FormData();\r\n    if (selectedDocument1 && selectedDocument1.name) {\r\n      const docBlob1 = new Blob([JSON.stringify(selectedDocument1.data)], { type: 'application/json' });\r\n      formData.append(\"sales_file1\", docBlob1, selectedDocument1.name);\r\n    }\r\n\r\n    if (selectedDocument2 && selectedDocument2.name) {\r\n      const docBlob2 = new Blob([JSON.stringify(selectedDocument2.data)], { type: 'application/json' });\r\n      formData.append(\"sales_file2\", docBlob2, selectedDocument2.name);\r\n    }\r\n\r\n    formData.append('comparisonColumns1', comparisonColumns1.join());\r\n    formData.append('comparisonColumns2', comparisonColumns2.join());\r\n    formData.append('fileStructure1', fileStructure1);\r\n    formData.append('fileStructure2', fileStructure2);\r\n    formData.append('unformattedData1', unformattedData1);\r\n    formData.append('unformattedData2', unformattedData2);\r\n    formData.append('userSubscriptionType', user.subscriptionType);\r\n    formData.append('userFreeComparisons', `${user.freeComparisons}`);\r\n    formData.append('userEmail', user.email);\r\n\r\n    axios.post('/api/v1/uploadfile', formData, {\r\n      headers: {\r\n        Authorization: `Bearer ${getAccessToken()}`\r\n      }\r\n    })\r\n      .then((res: any) => {\r\n        hideError();\r\n        uploadDocumentSuccess(res.data);\r\n        if (user.subscriptionType === FREE) {\r\n          updateUser({ ...user, freeComparisons: user.freeComparisons + 1 });\r\n        }\r\n        setIsLoading(false);\r\n        changeStep(activeStep += 1);\r\n      })\r\n      .catch((err: any) => {\r\n        console.log('err', err);\r\n        setIsLoading(false);\r\n        showError('File upload and comparison failed.');\r\n        setTimeout(() => {\r\n          hideError();\r\n        }, 5000)\r\n      });\r\n  };\r\n\r\n  return (\r\n    <UploadDocumentForm\r\n      document={document}\r\n      setAllColumns={setAllColumns}\r\n      handleColumnClick={handleColumnClick}\r\n      handleUploadAndCompare={handleUploadAndCompare}\r\n      userFreeComparisons={user.freeComparisons}\r\n      userSubscriptionType={user.subscriptionType}\r\n    />\r\n  );\r\n}\r\n\r\nconst mapStateToProps = (state: any) => ({\r\n  activeStep: state.stepProgress.step,\r\n  document: state.document,\r\n  user: state.user\r\n});\r\n\r\nconst mapDispatchToProps = (dispatch: any) => ({\r\n  showError: (message: string) => dispatch(showError(message)),\r\n  hideError: () => dispatch(hideError()),\r\n  uploadDocumentSuccess: (data: any) => dispatch(uploadDocumentSuccess(data)),\r\n  setIsLoading: (isLoading: boolean) => dispatch(setIsLoading(isLoading)),\r\n  changeStep: (activeStep: number) => dispatch(changeStep(activeStep)),\r\n  setAllColumns: (columns: Array<string>, index: number) => dispatch(setAllColumns(columns, index)),\r\n  changeComparisonColumn: (newValue: Array<string>, index: number) => dispatch(changeComparisonColumn(newValue, index)),\r\n  updateUser: (user: any) => dispatch(updateUser(user))\r\n});\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(UploadDocumentFormContainer);","import React, { useRef } from 'react';\r\nimport DataGrid, { Paging, Pager, Column, ColumnChooser, Toolbar, Item } from 'devextreme-react/data-grid';\r\nimport { Button, Grid } from '@mui/material';\r\nimport { UserState } from '../../state/reducers/user';\r\nimport { updateColumnsForDocument } from '../../utils/results-preview.utils';\r\nimport { FORMATTED_DATA } from '../../state/actions/document';\r\nimport { createCapitalizedPartnerCompany, createCapitalizedPartnerName, createCapitalizedUserName } from '../../utils/duplicates-table.utils';\r\n\r\ninterface Props {\r\n  duplicatesData: Array<any>;\r\n  comparisonColumns1: Array<string>;\r\n  comparisonColumns2: Array<string>;\r\n  fileStructure1: string;\r\n  fileStructure2: string;\r\n  partnerName: string;\r\n  partnerCompany: string;\r\n  user: UserState;\r\n}\r\n\r\n/* Handles the pressence of the 2 accuracy columns. Other columns start after those 2. */\r\nconst COLUMN_OFFSET = 2;\r\n\r\nconst DuplicatesTable = ({\r\n  duplicatesData,\r\n  comparisonColumns1,\r\n  comparisonColumns2,\r\n  fileStructure1,\r\n  fileStructure2,\r\n  partnerName,\r\n  partnerCompany,\r\n  user\r\n}: Props) => {\r\n  const dataGridRef: any = useRef<any>(null);\r\n\r\n  const customizeColumns = (columns: Array<any>) => {\r\n    /* Capitalize names that will be used in column captions */\r\n    let capitalizedUserName: string = createCapitalizedUserName(user);\r\n    let capitalizedPartnerCompany: string = createCapitalizedPartnerCompany(partnerCompany);\r\n    let capitalizedPartnerName: string = createCapitalizedPartnerName(partnerName);\r\n\r\n    columns.push({\r\n        caption: `My accounts${capitalizedUserName ? ` (${capitalizedUserName})` : ''}`,\r\n        isBand: true,\r\n        cssClass: 'my-accounts'\r\n    });\r\n    columns.push({\r\n      caption: `${capitalizedPartnerCompany ? `${capitalizedPartnerCompany}` : 'Partner'} accounts${capitalizedPartnerName ? ` (${capitalizedPartnerName})` : ''}`,\r\n      isBand: true,\r\n      cssClass: 'their-accounts'\r\n    });\r\n\r\n    /* Create a list of column names */\r\n    let comparisonColumns: Array<string> = [];\r\n    comparisonColumns = updateColumnsForDocument(fileStructure1, comparisonColumns1, 1);\r\n    comparisonColumns = [...comparisonColumns, ...updateColumnsForDocument(fileStructure2, comparisonColumns2, 2)];\r\n\r\n    /* userAccountColumnCount is for determining how many columns should have the my-accounts css class\r\n    and belong to the ownerBand */\r\n    let userAccountColumnCount = fileStructure1 === FORMATTED_DATA ?\r\n      comparisonColumns1.length : 1;\r\n\r\n    /* Assign the columns belonging to the user to one owner band and CSS class, and the columns belonging to\r\n    their partner's accounts into another owner band and CSS class */\r\n    for (let i = COLUMN_OFFSET; i < columns.length - 1; i++) {\r\n      if (comparisonColumns[i - COLUMN_OFFSET] === columns[i].caption && i < userAccountColumnCount + COLUMN_OFFSET) {\r\n        columns[i].ownerBand = columns.length - 2;\r\n        columns[i].cssClass = 'my-accounts'\r\n      } else if (comparisonColumns[i - COLUMN_OFFSET] === columns[i].caption) {\r\n        columns[i].ownerBand = columns.length - 1;\r\n        columns[i].cssClass = 'their-accounts'\r\n      }\r\n    }\r\n  }\r\n\r\n  const calculateGroupCell = (options: any) => {\r\n    let column = options.column;\r\n    let displayValue: string = options.value.split(\";\")[1];\r\n    return (\r\n        <div>{column.caption + \": \" + displayValue}</div>\r\n    );\r\n  }\r\n\r\n  const calculateAccuracyLevel = (rowData: any) => {\r\n    switch (rowData.accuracy) {\r\n      case 1:\r\n        // if (comparisonColumns1.length > 1 && comparisonColumns2.length > 1) {\r\n        return `aaa;Low`;\r\n      case 2:\r\n        return `bbb;Medium`;\r\n      case 3:\r\n        return `ccc;High`;\r\n    }\r\n  }\r\n\r\n  const handleColumnChooserOpen = () => {\r\n    dataGridRef.current.instance.showColumnChooser();\r\n  }\r\n\r\n  const renderColChooserBtn = () => {\r\n    return (\r\n      <Button variant=\"outlined\" onClick={handleColumnChooserOpen}>\r\n        edit view\r\n      </Button>\r\n    );\r\n  }\r\n\r\n  const renderLabel = () => {\r\n    return <div className=\"toolbar-label\"><b>{duplicatesData.length} Matches</b></div>;\r\n  }\r\n\r\n  return (\r\n    <Grid\r\n      container\r\n      justifyContent=\"center\"\r\n      alignItems=\"center\"\r\n      sx={{ height: '100%', margin: '3rem 0 4.5rem 0', padding: '0 1rem' }}\r\n    >\r\n      <Grid\r\n        item\r\n        container\r\n        xs={12}\r\n        md={12}\r\n        p={0}\r\n        sx={{ height: '100%', width: '100%' }}\r\n        direction=\"column\"\r\n        justifyContent=\"start\"\r\n        alignItems=\"center\"\r\n      >\r\n        <DataGrid\r\n          id=\"gridContainer\"\r\n          dataSource={duplicatesData}\r\n          customizeColumns={customizeColumns}\r\n          showColumnLines={true}\r\n          allowColumnReordering={true}\r\n          allowColumnResizing={true}\r\n          columnAutoWidth={true}\r\n          showBorders={true}\r\n          width=\"100%\"\r\n          height=\"100%\"\r\n          ref={dataGridRef}\r\n        >\r\n          <ColumnChooser\r\n            mode=\"select\"\r\n            title=\"Edit View\"\r\n            enabled={true}\r\n            allowSearch={true}\r\n            height={500}\r\n            width={350}\r\n          />\r\n          <Column\r\n            dataField=\"accuracy\"\r\n            groupIndex={0}\r\n            name=\"Accuracy Level\"\r\n            calculateGroupValue={calculateAccuracyLevel}\r\n            groupCellRender={calculateGroupCell}\r\n            showInColumnChooser={false}\r\n            sortOrder=\"desc\"\r\n            visible={false}\r\n          />\r\n          {duplicatesData && duplicatesData[0] && Array.from(Object.keys(duplicatesData[0]))\r\n            .map((colName: string, colIndex: number) => (\r\n              <Column\r\n                dataField={colName}\r\n                key={colIndex}\r\n                caption={colName.replace('--2', '')}\r\n                visible={colIndex !== 0}\r\n                showInColumnChooser={colName !== 'accuracy' ? true : false}\r\n              />\r\n            ))}\r\n          <Paging defaultPageSize={25} />\r\n          <Pager\r\n            visible={true}\r\n            displayMode={\"full\"}\r\n            showPageSizeSelector={false}\r\n            showInfo={true}\r\n            showNavigationButtons={true}\r\n          />\r\n          <Toolbar>\r\n            <Item location=\"center\"\r\n              locateInMenu=\"never\"\r\n              render={renderLabel}\r\n            />\r\n            <Item name=\"columnChooserButton\" component={renderColChooserBtn}></Item>\r\n          </Toolbar>\r\n        </DataGrid>\r\n      </Grid>\r\n    </Grid>\r\n  );\r\n}\r\n\r\nexport default DuplicatesTable;","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport DuplicatesTable from '../../components/duplicates-table';\r\nimport { UserState } from '../../state/reducers/user';\r\n\r\ninterface Props {\r\n  duplicatesData: Array<any>;\r\n  comparisonColumns1: Array<string>;\r\n  comparisonColumns2: Array<string>;\r\n  fileStructure1: string;\r\n  fileStructure2: string;\r\n  partnerName: string;\r\n  partnerCompany: string;\r\n  user: UserState;\r\n}\r\n\r\nconst DuplicatesTableContainer = ({\r\n  duplicatesData,\r\n  comparisonColumns1,\r\n  comparisonColumns2,\r\n  fileStructure1,\r\n  fileStructure2,\r\n  partnerName,\r\n  partnerCompany,\r\n  user\r\n}: Props) => {\r\n  return (\r\n    <DuplicatesTable\r\n      duplicatesData={duplicatesData}\r\n      comparisonColumns1={comparisonColumns1}\r\n      comparisonColumns2={comparisonColumns2}\r\n      fileStructure1={fileStructure1}\r\n      fileStructure2={fileStructure2}\r\n      partnerName={partnerName}\r\n      partnerCompany={partnerCompany}\r\n      user={user}\r\n    />\r\n  );\r\n}\r\n\r\nconst mapStateToProps = (state: any) => ({\r\n  duplicatesData: state.document.duplicatesData,\r\n  comparisonColumns1: state.document.comparisonColumns1,\r\n  comparisonColumns2: state.document.comparisonColumns2,\r\n  fileStructure1: state.document.fileStructure1,\r\n  fileStructure2: state.document.fileStructure2,\r\n  partnerName: state.document.partnerName,\r\n  partnerCompany: state.document.partnerCompany,\r\n  user: state.user\r\n});\r\n\r\nexport default connect(mapStateToProps)(DuplicatesTableContainer);","import React, { useRef } from 'react';\r\nimport {\r\n  Grid,\r\n  TextField,\r\n  Fab\r\n} from '@mui/material';\r\nimport { Download, ContentCopy } from '@mui/icons-material';\r\nimport { downloadSpreadsheetFromJSON } from '../../utils/spreadsheet.utils';\r\n\r\ninterface Props {\r\n  duplicatesData: Array<any>;\r\n  template: string;\r\n  handleTemplateChange: any;\r\n  handleCopyEmailTemplate: any;\r\n}\r\n\r\nconst EmailTemplate = ({\r\n  duplicatesData,\r\n  template,\r\n  handleTemplateChange,\r\n  handleCopyEmailTemplate\r\n}: Props) => {\r\n  const textAreaRef = useRef<any>(null);\r\n\r\n  const handleResultsDownload = () => {\r\n    downloadSpreadsheetFromJSON(duplicatesData);\r\n  }\r\n\r\n  return (\r\n    <Grid\r\n      container\r\n      spacing={2}\r\n      justifyContent=\"center\"\r\n      alignItems=\"center\"\r\n      sx={{ height: '100%', width: '100%', marginTop: '3.5rem' }}\r\n    >\r\n      <Grid\r\n        item\r\n        container\r\n        xs={8}\r\n        sx={{ height: '100%', width: '100%' }}\r\n        direction=\"column\"\r\n        justifyContent=\"start\"\r\n        alignItems=\"center\"\r\n      >\r\n        <TextField\r\n          id=\"email-template-multiline\"\r\n          label=\"Modify and then Copy/Paste this email template\"\r\n          multiline\r\n          ref={textAreaRef}\r\n          rows={9}\r\n          defaultValue={template}\r\n          variant=\"filled\"\r\n          sx={{ width: '100%' }}\r\n          onChange={handleTemplateChange}\r\n        />\r\n        <Fab\r\n          variant=\"extended\"\r\n          aria-label=\"add\"\r\n          sx={{ marginTop: '2.5rem' }}\r\n          onClick={handleCopyEmailTemplate}\r\n        >\r\n          <ContentCopy sx={{ mr: 1 }} />\r\n          Copy Template\r\n        </Fab>\r\n        <Fab\r\n          variant=\"extended\"\r\n          aria-label=\"add\"\r\n          sx={{ marginTop: '2.5rem' }}\r\n          onClick={handleResultsDownload}\r\n        >\r\n          <Download sx={{ mr: 1 }} />\r\n          Download Results\r\n        </Fab>\r\n      </Grid>\r\n    </Grid>\r\n  );\r\n}\r\n\r\nexport default EmailTemplate;","export const UPDATE_EMAIL_TEMPLATE = 'UPDATE_EMAIL_TEMPLATE';\r\n\r\nexport const updateEmailTemplate = (updatedTemplate: string) => ({\r\n  type: UPDATE_EMAIL_TEMPLATE,\r\n  payload: updatedTemplate\r\n});","import React, { ChangeEvent } from 'react';\r\nimport EmailTemplate from '../../components/email-template';\r\nimport { connect } from 'react-redux';\r\nimport { updateEmailTemplate } from '../../state/actions/email-template';\r\nimport { showSuccess, showError, hideError, hideSuccess } from '../../state/actions/alert';\r\n\r\ninterface Props {\r\n  duplicatesData: Array<any>;\r\n  template: string;\r\n  updateEmailTemplate: any;\r\n  showSuccess: any;\r\n  hideSuccess: any;\r\n  showError: any;\r\n  hideError: any;\r\n}\r\n\r\nconst EmailTemplateContainer = ({\r\n  duplicatesData,\r\n  template,\r\n  updateEmailTemplate,\r\n  showSuccess,\r\n  hideSuccess,\r\n  showError,\r\n  hideError\r\n}: Props) => {\r\n  const handleTemplateChange = (event: ChangeEvent<HTMLInputElement>) => {\r\n    updateEmailTemplate(event.target.value);\r\n  }\r\n\r\n  const handleCopyEmailTemplate = async () => {\r\n    try {\r\n      await navigator.clipboard.writeText(template);\r\n      hideError();\r\n      showSuccess('Copied email template');\r\n      setTimeout(() => {\r\n        hideSuccess();\r\n      }, 5000);\r\n    } catch (err) {\r\n      showError('Failed to copy email template');\r\n      setTimeout(() => {\r\n        hideError();\r\n      }, 5000);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <EmailTemplate\r\n      duplicatesData={duplicatesData}\r\n      template={template}\r\n      handleTemplateChange={handleTemplateChange}\r\n      handleCopyEmailTemplate={handleCopyEmailTemplate}\r\n    />\r\n  );\r\n}\r\n\r\nconst mapStateToProps = (state: any) => ({\r\n  duplicatesData: state.document.duplicatesData,\r\n  template: state.emailTemplate.template\r\n});\r\n\r\nconst mapDispatchToProps = (dispatch: any) => ({\r\n  updateEmailTemplate: (value: string) => dispatch(updateEmailTemplate(value)),\r\n  showSuccess: (successMsg: string) => dispatch(showSuccess(successMsg)),\r\n  hideSuccess: () => dispatch(hideSuccess()),\r\n  showError: (message: string) => dispatch(showError(message)),\r\n  hideError: () => dispatch(hideError()),\r\n});\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(EmailTemplateContainer);","import React from 'react';\r\nimport {\r\n  Box,\r\n  Button,\r\n  Paper\r\n} from '@mui/material';\r\n\r\ninterface StepperFooterProps {\r\n  steps: Array<string>;\r\n  handleNext: any;\r\n  handleBack: any;\r\n  activeStep: number;\r\n}\r\n\r\nconst StepperFooter = ({\r\n  steps,\r\n  activeStep,\r\n  handleBack,\r\n  handleNext\r\n}: StepperFooterProps) => {\r\n  return (\r\n    <Paper sx={{\r\n      position: 'fixed',\r\n      bottom: 0,\r\n      left: 0,\r\n      right: 0,\r\n      zIndex: 1510,\r\n      display: 'flex',\r\n      flexDirection: 'row',\r\n      padding: '0.75rem'\r\n    }} elevation={3}>\r\n      <Button\r\n        disabled={activeStep === 0}\r\n        onClick={handleBack}\r\n        sx={{ mr: 1 }}\r\n      >\r\n        Back\r\n      </Button>\r\n      <Box sx={{ flex: '1 1 auto' }} />\r\n      <Button\r\n        disabled={activeStep === steps.length - 1}\r\n        onClick={handleNext}\r\n      >\r\n        Next\r\n      </Button>\r\n    </Paper>\r\n  );\r\n}\r\n\r\nexport default StepperFooter;","import React from 'react';\r\nimport StepperFooter from '../../components/stepper-footer';\r\nimport { connect } from 'react-redux';\r\nimport { changeStep } from '../../state/actions/step-progress';\r\n\r\ninterface Props {\r\n  steps: Array<string>;\r\n  activeStep: number;\r\n  changeStep: any;\r\n}\r\n\r\nconst StepperFooterContainer = ({ steps, activeStep, changeStep }: Props) => {\r\n  const handleNext = () => {\r\n    changeStep(activeStep += 1);\r\n  };\r\n\r\n  const handleBack = () => {\r\n    changeStep(activeStep -= 1);\r\n  };\r\n\r\n  return (\r\n    <StepperFooter\r\n      activeStep={activeStep}\r\n      steps={steps}\r\n      handleNext={handleNext}\r\n      handleBack={handleBack}\r\n    />\r\n  );\r\n}\r\n\r\nconst mapStateToProps = (state: any) => ({\r\n  activeStep: state.stepProgress.step\r\n});\r\n\r\nconst mapDispatchToProps = (dispatch: any) => ({\r\n  changeStep: (newStep: number) => dispatch(changeStep(newStep))\r\n});\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(StepperFooterContainer);","import React from 'react';\r\nimport {\r\n  Box,\r\n  Stepper,\r\n  Step,\r\n  StepButton,\r\n  Container,\r\n} from '@mui/material';\r\n\r\nimport UploadDocumentFormContainer from '../../containers/upload-document-form';\r\nimport DuplicatesTableContainer from '../../containers/duplicates-table';\r\nimport EmailTemplateContainer from '../../containers/email-template';\r\nimport StepperFooterContainer from '../../containers/stepper-footer';\r\n\r\nconst steps: Array<string> = ['Upload document', 'View results', 'Email customers'];\r\n\r\ninterface Props {\r\n  activeStep: number;\r\n  changeStep: any;\r\n  user: any;\r\n}\r\n\r\nconst Home = ({ activeStep, changeStep, user }: Props) => {\r\n  return (\r\n    <>\r\n      <Box sx={{ width: '100%', height: '100%', marginTop: '3.5vh' }}>\r\n        <Stepper nonLinear={true} activeStep={activeStep} sx={{ marginLeft: '25%', marginRight: '25%'}}>\r\n          {steps.map((label: string, index: number) => {\r\n            const stepProps: { completed?: boolean } = {};\r\n            const labelProps: {\r\n              optional?: React.ReactNode;\r\n            } = {};\r\n            return (\r\n              <Step key={label} {...stepProps}>\r\n                <StepButton onClick={() => changeStep(index)} {...labelProps}>{label}</StepButton>\r\n              </Step>\r\n            );\r\n          })}\r\n        </Stepper>\r\n        {activeStep === 0 &&\r\n          <React.Fragment>\r\n            <Container sx={{ height: '100%', paddingBottom: '2rem' }}>\r\n              <UploadDocumentFormContainer />\r\n            </Container>\r\n          </React.Fragment>\r\n        }\r\n        {activeStep === 1 &&\r\n          <React.Fragment>\r\n            <Container sx={{ height: '100%', width: '100%', maxWidth: '100%' }} maxWidth={false}>\r\n              <DuplicatesTableContainer />\r\n            </Container>\r\n          </React.Fragment>\r\n        }\r\n        {activeStep === 2 &&\r\n          <React.Fragment>\r\n            <Container sx={{ height: '100%', width: '100%' }}>\r\n              <EmailTemplateContainer />\r\n            </Container>\r\n          </React.Fragment>\r\n        }\r\n      </Box>\r\n      <StepperFooterContainer steps={steps} />\r\n    </>\r\n  );\r\n}\r\n\r\nexport default Home;","import React from 'react';\r\nimport Home from '../../pages/home';\r\nimport { connect } from 'react-redux';\r\nimport { changeStep } from '../../state/actions/step-progress';\r\nimport { UserState } from '../../state/reducers/user';\r\n\r\ninterface Props {\r\n  activeStep: number;\r\n  changeStep: any;\r\n  user: UserState;\r\n}\r\n\r\nconst HomeContainer = ({ activeStep, changeStep, user }: Props) => {\r\n  return (\r\n    <Home activeStep={activeStep} changeStep={changeStep} user={user} />\r\n  );\r\n}\r\n\r\nconst mapStateToProps = (state: any) => ({\r\n  activeStep: state.stepProgress.step,\r\n  user: state.user\r\n});\r\n\r\nconst mapDispatchToProps = (dispatch: any) => ({\r\n  changeStep: (newStep: number) => dispatch(changeStep(newStep))\r\n});\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(HomeContainer);","import React from 'react';\r\nimport { Fab } from '@mui/material';\r\nimport { Payment as PaymentIcon } from '@mui/icons-material';\r\n\r\nconst Payment = () => {\r\n  return (\r\n    <Fab variant=\"extended\" color=\"primary\" type=\"submit\">\r\n      <PaymentIcon sx={{ mr: 1 }} />\r\n      Checkout\r\n    </Fab>\r\n  );\r\n}\r\n\r\nexport default Payment;","import React from 'react';\r\nimport {\r\n  Box,\r\n  Fab,\r\n  TextField,\r\n  Grid,\r\n  Typography,\r\n  FormControl,\r\n  FormLabel,\r\n  RadioGroup,\r\n  FormControlLabel,\r\n  Radio,\r\n} from '@mui/material';\r\nimport { Link } from 'react-router-dom';\r\nimport { useFormik } from 'formik';\r\n// import PaymentButton from '../../components/payment-button';\r\nimport Payment from '../payment';\r\n\r\nconst FREE = 'FREE';\r\nconst FREE_DESCRIPTION = 'Free: Sign up now to be able to compare 10 lists';\r\nconst PREMIUM = 'PREMIUM';\r\nconst PREMIUM_DESCRIPTION = 'Premium: You can compare an unlimited amount of lists per month';\r\n// const ENTERPRISE = 'ENTERPRISE';\r\n// const ENTERPRISE_DESCRIPTION = 'Enterprise: Talk to a Salesdap advisor in order to create an account for your organization';\r\n\r\n\r\ninterface Props {\r\n  onSubmit: any;\r\n}\r\n\r\nconst Register = ({ onSubmit }: Props) => {\r\n\r\n  const validate = (values: any) => {\r\n    const errors: any = {};\r\n    if (!values.password) {\r\n      errors.password = 'Required';\r\n    } else if (values.password.length < 8) {\r\n      errors.password = 'Must be 8 characters or more';\r\n    }\r\n  \r\n    if (!values.confirmPassword) {\r\n      errors.confirmPassword = 'Required';\r\n    } else if (values.confirmPassword !== values.password) {\r\n      errors.confirmPassword = 'Must match password';\r\n    }\r\n  \r\n    if (!values.email) {\r\n      errors.email = 'Required';\r\n    } else if (!/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,4}$/i.test(values.email)) {\r\n      errors.email = 'Invalid email address';\r\n    }\r\n  \r\n    return errors;\r\n  };\r\n\r\n  const formik = useFormik({\r\n    initialValues: {\r\n      email: '',\r\n      password: '',\r\n      confirmPassword: '',\r\n      firstName: '',\r\n      lastName: '',\r\n      company: '',\r\n      subscriptionType: FREE\r\n    },\r\n    validate,\r\n    onSubmit\r\n  });\r\n\r\n  const { values, errors, touched, handleBlur, handleChange, handleSubmit, setFieldValue } = formik;\r\n\r\n  const isSubmitButtonDisabled = !!errors.email || !!errors.password || !!errors.confirmPassword\r\n    || !values.email || !values.password || !values.confirmPassword;\r\n\r\n  return (\r\n    <>\r\n      <Box sx={{ width: '100%', marginTop: '6.5vh' }}>\r\n        <Grid\r\n          container\r\n          spacing={2}\r\n          justifyContent=\"center\"\r\n          sx={{ height: '100%' }}\r\n        >\r\n          <Grid\r\n            item\r\n            container\r\n            xs={6}\r\n            p={0}\r\n            sx={{ height: '100%' }}\r\n            direction=\"column\"\r\n            alignItems=\"center\"\r\n          >\r\n            <Typography variant=\"h5\" sx={{ marginBottom: '2rem' }}>Register</Typography>\r\n            <form style={{ width: '100%' }} onSubmit={handleSubmit}>\r\n              <TextField\r\n                required\r\n                id=\"standard-basic\"\r\n                label=\"Email\"\r\n                name=\"email\"\r\n                variant=\"standard\"\r\n                sx={{ width: '100%', marginBottom: '1.5rem' }}\r\n                error={touched.email && !!errors.email}\r\n                helperText={touched.email && !!errors.email ? errors.email : null}\r\n                onBlur={handleBlur}\r\n                onChange={handleChange}\r\n                value={values.email}\r\n              />\r\n              <TextField\r\n                required\r\n                id=\"standard-basic\"\r\n                label=\"Password\"\r\n                name=\"password\"\r\n                variant=\"standard\"\r\n                type=\"password\"\r\n                sx={{ width: '100%', marginBottom: '1.5rem' }}\r\n                error={touched.password && !!errors.password}\r\n                helperText={touched.password && !!errors.password ? errors.password : null}\r\n                onBlur={handleBlur}\r\n                onChange={handleChange}\r\n                value={values.password}\r\n              />\r\n              <TextField\r\n                required\r\n                id=\"standard-basic\"\r\n                label=\"Confirm Password\"\r\n                name=\"confirmPassword\"\r\n                variant=\"standard\"\r\n                type=\"password\"\r\n                sx={{ width: '100%', marginBottom: '1.5rem' }}\r\n                error={touched.confirmPassword && !!errors.confirmPassword}\r\n                helperText={touched.confirmPassword && !!errors.confirmPassword ? errors.confirmPassword : null}\r\n                onBlur={handleBlur}\r\n                onChange={handleChange}\r\n                value={values.confirmPassword}\r\n              />\r\n              <TextField\r\n                id=\"standard-basic\"\r\n                label=\"First Name\"\r\n                name=\"firstName\"\r\n                variant=\"standard\"\r\n                sx={{ width: '100%', marginBottom: '1.5rem' }}\r\n                onBlur={handleBlur}\r\n                onChange={handleChange}\r\n                value={values.firstName}\r\n              />\r\n              <TextField\r\n                id=\"standard-basic\"\r\n                label=\"Last Name\"\r\n                name=\"lastName\"\r\n                variant=\"standard\"\r\n                sx={{ width: '100%', marginBottom: '1.5rem' }}\r\n                onBlur={handleBlur}\r\n                onChange={handleChange}\r\n                value={values.lastName}\r\n              />\r\n              <TextField\r\n                id=\"standard-basic\"\r\n                label=\"Company\"\r\n                name=\"company\"\r\n                variant=\"standard\"\r\n                sx={{ width: '100%', marginBottom: '3rem' }}\r\n                onBlur={handleBlur}\r\n                onChange={handleChange}\r\n                value={values.company}\r\n              />\r\n              <FormControl sx={{ marginBottom: '2rem' }}>\r\n                <FormLabel sx={{ marginBottom: '1rem' }}>What type of subscription do you want?</FormLabel>\r\n                <RadioGroup\r\n                  aria-labelledby=\"demo-controlled-radio-buttons-group\"\r\n                  name=\"subscription-radio-buttons-group\"\r\n                  value={values.subscriptionType}\r\n                  onChange={(_, value: string) => setFieldValue('subscriptionType', value)}\r\n                >\r\n                  <FormControlLabel\r\n                    value={FREE}\r\n                    control={<Radio checked={values.subscriptionType === FREE} />}\r\n                    label={FREE_DESCRIPTION}\r\n                    name=\"free\"\r\n                  />\r\n                  <FormControlLabel\r\n                    value={PREMIUM}\r\n                    control={<Radio checked={values.subscriptionType === PREMIUM} />}\r\n                    label={PREMIUM_DESCRIPTION}\r\n                    name=\"premium\"\r\n                  />\r\n                  {/* <FormControlLabel value={ENTERPRISE} control={<Radio />} label=\"Enterprise\" /> */}\r\n                </RadioGroup>\r\n              </FormControl>\r\n              <Grid\r\n                container\r\n                spacing={2}\r\n                justifyContent=\"center\"\r\n                alignItems=\"center\"\r\n              >\r\n                <Grid\r\n                  item\r\n                  container\r\n                  xs={10}\r\n                  p={0}\r\n                  direction=\"column\"\r\n                  justifyContent=\"center\"\r\n                  alignItems=\"center\"\r\n                >\r\n                  {values.subscriptionType === PREMIUM ?\r\n                    <>\r\n                      {/* <PaymentButton\r\n                        disabled={isSubmitButtonDisabled}\r\n                        user={values}\r\n                        handleSubmit={handleSubmit}\r\n                        setIsLoading={setIsLoading}\r\n                      /> */}\r\n                      <Payment\r\n                        // handleSubmit={handleSubmit}\r\n                        // registrationUser={values}\r\n                      />\r\n                    </>\r\n                    :\r\n                    <Fab\r\n                      variant=\"extended\"\r\n                      aria-label=\"add\"\r\n                      sx={{ marginLeft: 'auto', marginRight: 'auto' }}\r\n                      type=\"submit\"\r\n                      disabled={isSubmitButtonDisabled}\r\n                    >\r\n                      sign up\r\n                    </Fab>\r\n                  }\r\n                </Grid>\r\n              </Grid>\r\n            </form>\r\n            <Typography sx={{ marginTop: '2rem', marginBottom: '3rem' }}>\r\n              Already have an account? <Link className=\"auth-page-link\" to=\"/\">Sign in</Link>\r\n            </Typography>\r\n          </Grid>\r\n        </Grid>\r\n      </Box>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Register;","import React from 'react';\r\nimport axios from 'axios';\r\nimport Register from '../../pages/register';\r\nimport { connect } from 'react-redux';\r\nimport { showError, hideError } from '../../state/actions/alert';\r\nimport { setIsLoading } from '../../state/actions/loading';\r\nimport { FREE, PREMIUM } from '../../state/reducers/user';\r\nimport { useHistory } from 'react-router-dom';\r\n\r\ninterface Props {\r\n  setIsLoading: any;\r\n  showError: any;\r\n  hideError: any;\r\n  updateRegistrationUser: any;\r\n}\r\n\r\nconst RegisterContainer = ({\r\n  setIsLoading,\r\n  showError,\r\n  hideError,\r\n}: Props) => {\r\n  const history = useHistory();\r\n\r\n  const handleCreateCheckoutSession = (email: string) => {\r\n    return axios.post('/api/v1/create-checkout-session', {\r\n      customerEmail: email\r\n    })\r\n      .then((res) => {\r\n        if (!!res && !!res.data) {\r\n          window.location.href = res.data.url;\r\n        }\r\n      })\r\n      .catch((err: any) => handleRegistrationFailure(err, 'There was a problem with accessing the payments page'));\r\n  }\r\n\r\n  const onSubmit = (values: any) => {\r\n    setIsLoading(true);\r\n    const formData = new FormData();\r\n    formData.append('email', values.email);\r\n    formData.append('password', values.password);\r\n    formData.append('firstname', values.firstName);\r\n    formData.append('lastname', values.lastName);\r\n    formData.append('company', values.company);\r\n    formData.append('subscriptionType', values.subscriptionType);\r\n    const config = {\r\n      headers: {\r\n        'Content-Type': 'multipart/form-data'\r\n      },\r\n    };\r\n\r\n    axios.post('/api/v1/register', formData, config)\r\n      .then(() => {\r\n        if (values.subscriptionType === PREMIUM) {\r\n          handleCreateCheckoutSession(values.email);\r\n        }\r\n        return;\r\n      })\r\n      .then(() => {\r\n        hideError();\r\n        setIsLoading(false);\r\n        if (values.subscriptionType === FREE) {\r\n          history.push('/profile');\r\n        }\r\n      })\r\n      .catch((err: any) => handleRegistrationFailure(err, 'Registration failed'));\r\n  }\r\n\r\n  const handleRegistrationFailure = (err: any, errorMessage: string) => {\r\n    console.log('err', err);\r\n    setIsLoading(false);\r\n    showError(errorMessage);\r\n    setTimeout(() => {\r\n      hideError();\r\n    }, 5000);\r\n  }\r\n\r\n  return (\r\n    <Register onSubmit={onSubmit} />\r\n  );\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch: any) => ({\r\n  showError: (message: string) => dispatch(showError(message)),\r\n  hideError: () => dispatch(hideError()),\r\n  setIsLoading: (isLoading: boolean) => dispatch(setIsLoading(isLoading)),\r\n});\r\n\r\nexport default connect(null, mapDispatchToProps)(RegisterContainer);","import React from 'react';\r\nimport {\r\n  Box,\r\n  Grid,\r\n  Typography,\r\n  TextField,\r\n  Fab,\r\n  AppBar,\r\n  Toolbar,\r\n  IconButton,\r\n} from '@mui/material';\r\nimport { Close } from '@mui/icons-material';\r\nimport { useFormik } from 'formik';\r\n\r\ninterface Props {\r\n  onClose: any;\r\n  onSubmit: any;\r\n}\r\n\r\nconst EmailCapture = ({ onClose, onSubmit }: Props) => {\r\n\r\n  const validate = (values: any) => {\r\n    const errors: any = {};\r\n\r\n    if (!/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,4}$/i.test(values.email)) {\r\n      errors.email = 'Invalid email address';\r\n    }\r\n  \r\n    return errors;\r\n  };\r\n\r\n  const formik = useFormik({\r\n    initialValues: {\r\n      email: ''\r\n    },\r\n    validate,\r\n    onSubmit\r\n  });\r\n\r\n  const { values, errors, touched, handleBlur, handleChange, handleSubmit } = formik;\r\n\r\n  return (\r\n    <Box sx={{ width: '100%', height: '100%', padding: '0 0 3rem 0' }}>\r\n      <AppBar sx={{ position: 'relative', marginBottom: '3rem' }}>\r\n        <Toolbar>\r\n          <IconButton\r\n            edge=\"end\"\r\n            color=\"inherit\"\r\n            onClick={onClose}\r\n            aria-label=\"close\"\r\n          >\r\n            <Close />\r\n          </IconButton>\r\n        </Toolbar>\r\n      </AppBar>\r\n      <Grid\r\n        container\r\n        spacing={2}\r\n        justifyContent=\"center\"\r\n        alignItems=\"center\"\r\n        sx={{ height: '100%', width: '100%' }}\r\n      >\r\n        <Grid\r\n          item\r\n          container\r\n          xs={10}\r\n          p={0}\r\n          sx={{ height: '100%' }}\r\n          direction=\"column\"\r\n          justifyContent=\"center\"\r\n          alignItems=\"center\"\r\n        >\r\n          <form onSubmit={handleSubmit}>\r\n            <Typography variant=\"h5\" sx={{ marginBottom: '2rem' }}>Join the waitlist for Salesdap</Typography>\r\n            <TextField\r\n              label=\"email address\"\r\n              variant=\"standard\"\r\n              name=\"email\"\r\n              sx={{ width: '100%' }}\r\n              error={touched.email && !!errors.email}\r\n              helperText={errors.email ? errors.email : null}\r\n              onBlur={handleBlur}\r\n              onChange={handleChange}\r\n              value={values.email}\r\n            />\r\n            <Fab\r\n              variant=\"extended\"\r\n              aria-label=\"add\"\r\n              sx={{ marginTop: '2.5rem' }}\r\n              type=\"submit\"\r\n            >\r\n              submit\r\n            </Fab>\r\n          </form>\r\n        </Grid>\r\n      </Grid>\r\n    </Box>\r\n  );\r\n}\r\n\r\nexport default EmailCapture;","import React from 'react';\r\nimport axios from 'axios';\r\nimport { connect } from 'react-redux';\r\nimport { setIsLoading } from '../../state/actions/loading';\r\nimport { showError, hideError, showSuccess, hideSuccess } from '../../state/actions/alert';\r\nimport EmailCapture from '../../pages/email-capture';\r\n\r\ninterface Props {\r\n  onClose: any;\r\n  showError: any;\r\n  hideError: any;\r\n  showSuccess: any;\r\n  hideSuccess: any;\r\n  setIsLoading: any;\r\n}\r\n\r\nconst EmailCaptureContainer = ({\r\n  onClose,\r\n  showError,\r\n  hideError,\r\n  showSuccess,\r\n  hideSuccess,\r\n  setIsLoading\r\n}: Props) => {\r\n  const onSubmit = (values: any) => {\r\n    setIsLoading(true);\r\n    const formData = new FormData();\r\n    formData.append('email', values.email);\r\n    const config = {\r\n      headers: {\r\n        'Content-Type': 'multipart/form-data'\r\n      }\r\n    };\r\n\r\n    axios.post('/api/v1/email', formData, config)\r\n      .then(() => {\r\n        hideError();\r\n        setIsLoading(false);\r\n        onClose();\r\n        showSuccess('Successfully registered to waitlist!');\r\n        setTimeout(() => {\r\n          hideSuccess();\r\n        }, 5000);\r\n      })\r\n      .catch((err: any) => {\r\n        console.log('err', err);\r\n        setIsLoading(false);\r\n        showError('Waitlist registration failed. Please try again.');\r\n        setTimeout(() => {\r\n          hideError();\r\n        }, 5000)\r\n      });\r\n  }\r\n\r\n  return (\r\n    <EmailCapture onSubmit={onSubmit} onClose={onClose} />\r\n  );\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch: any) => ({\r\n  showError: (message: string) => dispatch(showError(message)),\r\n  hideError: () => dispatch(hideError()),\r\n  showSuccess: (successMsg: string) => dispatch(showSuccess(successMsg)),\r\n  hideSuccess: () => dispatch(hideSuccess()),\r\n  setIsLoading: (isLoading: boolean) => dispatch(setIsLoading(isLoading)),\r\n});\r\n\r\nexport default connect(null, mapDispatchToProps)(EmailCaptureContainer);","import React, { useState } from 'react';\r\nimport EmailCaptureContainer from '../../containers/email-capture';\r\nimport {\r\n  Box,\r\n  Fab,\r\n  TextField,\r\n  Grid,\r\n  Typography,\r\n  Dialog\r\n} from '@mui/material';\r\nimport { Link } from 'react-router-dom';\r\nimport { useFormik } from 'formik';\r\n\r\ninterface Props {\r\n  onSubmit: any;\r\n}\r\n\r\nconst Login = ({ onSubmit }: Props) => {\r\n  const [isEmailCaptureModalOpen, setIsEmailCaptureModalOpen] = useState(true);\r\n\r\n  const handleClose = () => {\r\n    setIsEmailCaptureModalOpen(false);\r\n  }\r\n\r\n  const validate = (values: any) => {\r\n    const errors: any = {};\r\n    if (!values.password) {\r\n      errors.password = 'Required';\r\n    }\r\n  \r\n    if (!values.email) {\r\n      errors.email = 'Required';\r\n    } else if (!/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,4}$/i.test(values.email)) {\r\n      errors.email = 'Invalid email address';\r\n    }\r\n  \r\n    return errors;\r\n  };\r\n\r\n  const formik = useFormik({\r\n    initialValues: {\r\n      email: '',\r\n      password: ''\r\n    },\r\n    validate,\r\n    onSubmit\r\n  });\r\n\r\n  const { values, errors, touched, handleBlur, handleChange, handleSubmit } = formik;\r\n\r\n  const isSubmitButtonDisabled = !!errors.email || !!errors.password ||\r\n    !values.email || !values.password;\r\n\r\n  return (\r\n    <>\r\n      <Box sx={{ width: '100%', marginTop: '6.5vh' }}>\r\n        <Grid\r\n          container\r\n          spacing={2}\r\n          justifyContent=\"center\"\r\n          sx={{ height: '100%' }}\r\n        >\r\n          <Grid\r\n            item\r\n            container\r\n            xs={6}\r\n            p={0}\r\n            sx={{ height: '100%' }}\r\n            direction=\"column\"\r\n            alignItems=\"center\"\r\n          >\r\n            <Typography variant=\"h5\" sx={{ marginBottom: '2rem' }}>Login</Typography>\r\n            <form onSubmit={handleSubmit} style={{ width: '100%' }}>\r\n              <TextField\r\n                required\r\n                id=\"standard-basic\"\r\n                label=\"Email\"\r\n                name=\"email\"\r\n                variant=\"standard\"\r\n                sx={{ width: '100%', marginBottom: '1.5rem' }}\r\n                error={touched.email && !!errors.email}\r\n                helperText={touched.email && !!errors.email ? errors.email : null}\r\n                onBlur={handleBlur}\r\n                onChange={handleChange}\r\n                value={values.email}\r\n              />\r\n              <TextField\r\n                required\r\n                id=\"standard-basic\"\r\n                label=\"Password\"\r\n                name=\"password\"\r\n                variant=\"standard\"\r\n                type=\"password\"\r\n                sx={{ width: '100%' }}\r\n                error={touched.password && !!errors.password}\r\n                helperText={touched.password && !!errors.password ? errors.password : null}\r\n                onBlur={handleBlur}\r\n                onChange={handleChange}\r\n                value={values.password}\r\n              />\r\n              <Grid\r\n                container\r\n                spacing={2}\r\n                justifyContent=\"center\"\r\n                alignItems=\"center\"\r\n              >\r\n                <Grid\r\n                  item\r\n                  container\r\n                  xs={6}\r\n                  p={0}\r\n                  direction=\"column\"\r\n                  justifyContent=\"center\"\r\n                  alignItems=\"center\"\r\n                >\r\n                  <Fab\r\n                    variant=\"extended\"\r\n                    aria-label=\"add\"\r\n                    sx={{ marginTop: '2.5rem', marginLeft: 'auto', marginRight: 'auto' }}\r\n                    type=\"submit\"\r\n                    disabled={isSubmitButtonDisabled}\r\n                  >\r\n                    Submit\r\n                  </Fab>\r\n                </Grid>\r\n              </Grid>\r\n            </form>\r\n            <Typography sx={{ marginTop: '2rem' }}>\r\n              Don't have an account?  <Link className=\"auth-page-link\" to=\"/register\">Sign up now!</Link>\r\n            </Typography>\r\n            <Typography sx={{ marginTop: '0.5rem', marginBottom: '3rem' }}>\r\n              Forgot your password?  <Link className=\"auth-page-link\" to=\"/forgot-password\">Reset your password</Link>\r\n            </Typography>\r\n          </Grid>\r\n        </Grid>\r\n      </Box>\r\n\r\n      <Dialog open={isEmailCaptureModalOpen} onClose={handleClose}>\r\n        <EmailCaptureContainer onClose={handleClose} />\r\n      </Dialog>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Login;","import React, { useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport Login from '../../pages/login';\r\nimport { useHistory } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { updateUser } from '../../state/actions/user';\r\nimport { showError, hideError } from '../../state/actions/alert';\r\nimport { setIsLoading } from '../../state/actions/loading';\r\nimport { setAccessToken } from '../../utils/access-token.utils';\r\n\r\naxios.defaults.withCredentials = true; // this fixed the cookie issue\r\n\r\ninterface Props {\r\n  showError: any;\r\n  hideError: any;\r\n  setIsLoading: any;\r\n  updateUser: any;\r\n}\r\n\r\nconst LoginContainer = ({\r\n  showError,\r\n  hideError,\r\n  setIsLoading,\r\n  updateUser\r\n}: Props) => {\r\n  const history = useHistory();\r\n\r\n  const handleLoginSuccess = (res: any) => {\r\n    const { token, email } = res.data;\r\n    setAccessToken(token);\r\n    hideError();\r\n    setIsLoading(false);\r\n    if (res.data && email) {\r\n      updateUser(res.data);\r\n      history.push('/home');\r\n    }\r\n  }\r\n\r\n  const handleLoginFailure = (err: any) => {\r\n    console.log('err', err);\r\n    setIsLoading(false);\r\n    showError('Wrong email or password');\r\n  }\r\n\r\n  useEffect(() => {\r\n    setIsLoading(true);\r\n    axios.post('/api/v1/refresh_token', null, { withCredentials: true })\r\n      .then(handleLoginSuccess)\r\n      .catch(handleLoginFailure);\r\n  }, []);\r\n\r\n  const onSubmit = (values: any) => {\r\n    setIsLoading(true);\r\n    const formData = new FormData();\r\n    formData.append('email', values.email);\r\n    formData.append('password', values.password);\r\n    const config = {\r\n      headers: {\r\n        'Content-Type': 'multipart/form-data'\r\n      },\r\n      withCredentials: true\r\n    };\r\n\r\n    axios.post('/api/v1/login', formData, config)\r\n      .then(handleLoginSuccess)\r\n      .catch(handleLoginFailure);\r\n  };\r\n\r\n  return (\r\n    <Login onSubmit={onSubmit} />\r\n  );\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch: any) => ({\r\n  showError: (message: string) => dispatch(showError(message)),\r\n  hideError: () => dispatch(hideError()),\r\n  setIsLoading: (isLoading: boolean) => dispatch(setIsLoading(isLoading)),\r\n  updateUser: (user: any) => dispatch(updateUser(user))\r\n});\r\n\r\nexport default connect(null, mapDispatchToProps)(LoginContainer);","import React from 'react';\r\nimport {\r\n  TextField,\r\n  Button,\r\n} from '@mui/material';\r\nimport { useFormik } from 'formik';\r\nimport { UserState } from '../../state/reducers/user';\r\n\r\ninterface Props {\r\n  user: UserState;\r\n  onSubmit: any;\r\n}\r\n\r\nconst EditProfileForm = ({\r\n  user,\r\n  onSubmit\r\n}: Props) => {\r\n\r\n  const validate = (values: any) => {\r\n    const errors: any = {};\r\n\r\n    if (!values.email) {\r\n      errors.email = 'Required';\r\n    } else if (!/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,4}$/i.test(values.email)) {\r\n      errors.email = 'Invalid email address';\r\n    }\r\n  \r\n    return errors;\r\n  };\r\n\r\n  const formik = useFormik({\r\n    initialValues: {\r\n      firstName: user.firstname,\r\n      lastName: user.lastname,\r\n      email: user.email,\r\n      company: user.company,\r\n    },\r\n    validate,\r\n    onSubmit,\r\n  });\r\n\r\n  const { values, errors, touched, handleBlur, handleChange, handleSubmit } = formik;\r\n\r\n  return (\r\n    <form style={{ width: '90%' }} onSubmit={(vals: any) => {\r\n      return handleSubmit(vals);\r\n    }}>\r\n      <TextField\r\n        id=\"standard-basic\"\r\n        label=\"First Name\"\r\n        name=\"firstName\"\r\n        variant=\"standard\"\r\n        sx={{ width: '100%', marginBottom: '1.5rem' }}\r\n        onChange={handleChange}\r\n        value={values.firstName}\r\n      />\r\n      <TextField\r\n        id=\"standard-basic\"\r\n        label=\"Last Name\"\r\n        name=\"lastName\"\r\n        variant=\"standard\"\r\n        sx={{ width: '100%', marginBottom: '1.5rem' }}\r\n        onChange={handleChange}\r\n        value={values.lastName}\r\n      />\r\n      <TextField\r\n        id=\"standard-basic\"\r\n        label=\"Email\"\r\n        name=\"email\"\r\n        variant=\"standard\"\r\n        sx={{ width: '100%', marginBottom: '1.5rem' }}\r\n        error={touched.email && !!errors.email}\r\n        helperText={touched.email && !!errors.email ? errors.email : null}\r\n        onBlur={handleBlur}\r\n        onChange={handleChange}\r\n        value={values.email}\r\n      />\r\n      <TextField\r\n        id=\"standard-basic\"\r\n        label=\"Company\"\r\n        name=\"company\"\r\n        variant=\"standard\"\r\n        sx={{ width: '100%', marginBottom: '1.5rem' }}\r\n        onChange={handleChange}\r\n        value={values.company}\r\n      />\r\n      <Button type=\"submit\" variant=\"contained\" sx={{ marginBottom: '2.5rem' }}>Save Changes</Button>\r\n    </form>\r\n  );\r\n}\r\n\r\nexport default EditProfileForm;","import React from 'react';\r\nimport axios from 'axios';\r\nimport EditProfileForm from '../../components/edit-profile-form';\r\nimport { connect } from 'react-redux';\r\nimport { UserState } from '../../state/reducers/user';\r\nimport { showError, hideError } from '../../state/actions/alert';\r\nimport { setIsLoading } from '../../state/actions/loading';\r\nimport { getAccessToken } from '../../utils/access-token.utils';\r\nimport { updateUser } from '../../state/actions/user';\r\n\r\ninterface Props {\r\n  user: UserState;\r\n  setIsLoading: any;\r\n  showError: any;\r\n  hideError: any;\r\n  updateUser: any;\r\n}\r\n\r\nconst EditProfileFormContainer = ({\r\n  user,\r\n  setIsLoading,\r\n  showError,\r\n  hideError,\r\n  updateUser\r\n}: Props) => {\r\n\r\n  const handleProfileActionFailure = (err: any, errorMessage: string) => {\r\n    console.log('err', err);\r\n    setIsLoading(false);\r\n    showError(errorMessage);\r\n    setTimeout(() => {\r\n      hideError();\r\n    }, 7500)\r\n  }\r\n\r\n  const onSubmit = (values: any) => {\r\n    setIsLoading(true);\r\n    const formData = new FormData();\r\n    formData.append('email', values.email);\r\n    formData.append('firstname', values.firstName);\r\n    formData.append('lastname', values.lastName);\r\n    formData.append('company', values.company);\r\n    const config = {\r\n      headers: {\r\n        'Content-Type': 'multipart/form-data',\r\n        Authorization: `Bearer ${getAccessToken()}`\r\n      }\r\n    };\r\n\r\n    return axios.post('/api/v1/edit-profile', formData, config)\r\n    .then((res: any) => {\r\n      updateUser(res.data);\r\n      hideError();\r\n      setIsLoading(false);\r\n    })\r\n    .catch((err: any) => handleProfileActionFailure(err, 'Profile update failed'));\r\n  }\r\n\r\n  return (\r\n    <EditProfileForm\r\n      user={user}\r\n      onSubmit={onSubmit}\r\n    />\r\n  );\r\n}\r\n\r\nconst mapStateToProps = (state: any) => ({\r\n  user: state.user\r\n});\r\n\r\nconst mapDispatchToProps = (dispatch: any) => ({\r\n  showError: (message: string) => dispatch(showError(message)),\r\n  hideError: () => dispatch(hideError()),\r\n  setIsLoading: (isLoading: boolean) => dispatch(setIsLoading(isLoading)),\r\n  updateUser: (user: any) => dispatch(updateUser(user))\r\n});\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(EditProfileFormContainer);","import React, { useEffect, useRef, useState } from 'react';\r\nimport {\r\n  Box,\r\n  Grid,\r\n  Typography,\r\n  Paper,\r\n  Chip,\r\n  Fab,\r\n  IconButton,\r\n} from '@mui/material';\r\nimport { Attachment, Upload, Payment as PaymentIcon, Edit } from '@mui/icons-material';\r\nimport { UserState } from '../../state/reducers/user';\r\nimport InfoTooltip from '../../components/info-tooltip';\r\nimport EditProfileFormContainer from '../../containers/edit-profile-form';\r\n\r\ninterface Props {\r\n  user: UserState;\r\n  validateFileSelection: any;\r\n  handlePinnedFileClick: any;\r\n  handleManageSubscriptionClick: any;\r\n  handleCreateCheckoutSession: any;\r\n}\r\n\r\nconst Profile = ({\r\n  user,\r\n  validateFileSelection,\r\n  handlePinnedFileClick,\r\n  handleManageSubscriptionClick,\r\n  handleCreateCheckoutSession,\r\n}: Props) => {\r\n  const inputFileRef: any = useRef(null);\r\n\r\n  const [isEditing, setIsEditing] = useState(false);\r\n  const [hasActiveSubscription, setHasActiveSubscription] = useState(false);\r\n\r\n  const handleFileSelectionBtnClick = () => {\r\n    /*Collecting node-element and performing click*/\r\n    if (inputFileRef&& inputFileRef.current) {\r\n      inputFileRef.current.click();\r\n    }\r\n  };\r\n\r\n  const handleEditButtonClick = () => {\r\n    setIsEditing(!isEditing);\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (user && user.activeSubscription === true) {\r\n      setHasActiveSubscription(true);\r\n    }\r\n  }, [user, isEditing])\r\n\r\n  return (\r\n    <>\r\n      <Box sx={{ width: '100%', marginTop: '3.5vh' }}>\r\n        <Grid\r\n          container\r\n          spacing={2}\r\n          justifyContent=\"center\"\r\n          alignItems=\"center\"\r\n          sx={{ height: '100%' }}\r\n        >\r\n          <Grid\r\n            item\r\n            container\r\n            xs={8}\r\n            p={0}\r\n            sx={{ height: '100%' }}\r\n            direction=\"column\"\r\n            justifyContent=\"start\"\r\n            alignItems=\"center\"\r\n          >\r\n            <Paper elevation={3} sx={{ width: '100%', padding: '3rem 0 3rem 3rem', margin: '3rem auto 3rem auto' }}>\r\n              <Typography variant=\"h5\" sx={{ marginBottom: '2rem' }}>Profile <IconButton onClick={handleEditButtonClick}><Edit /></IconButton></Typography>\r\n              {isEditing ?\r\n                <EditProfileFormContainer /> :\r\n                <>\r\n                  <Typography variant=\"subtitle1\" sx={{ marginBottom: '2rem' }}>Name: {user.firstname} {user.lastname}</Typography>\r\n                  <Typography variant=\"subtitle1\" sx={{ marginBottom: '2rem' }}>Email: {user.email}</Typography>\r\n                  <Typography variant=\"subtitle1\" sx={{ marginBottom: '2rem' }}>Company: {user.company}</Typography>\r\n                </>\r\n              }\r\n              <Typography variant=\"subtitle1\" sx={{ marginBottom: '2rem' }}>Subscription Type: {user.subscriptionType}</Typography>\r\n              <Typography variant=\"subtitle1\" sx={{ marginBottom: '2rem' }}>Paid Subscription: {user.activeSubscription ? 'Yes' : 'No'}</Typography>\r\n              <Typography variant=\"subtitle1\">Pinned File:</Typography>\r\n              <Chip onClick={handlePinnedFileClick} icon={<Attachment />} label={user.pinnedFileName} />\r\n              <Grid\r\n                item\r\n                container\r\n                xs={6}\r\n                p={0}\r\n                direction=\"column\"\r\n                justifyContent=\"start\"\r\n                alignItems=\"start\"\r\n              >\r\n                <InfoTooltip\r\n                  arrow\r\n                  placement=\"top-start\"\r\n                  open={!user.pinnedFileId}\r\n                  title=\"Upload and 'pin' a list that you will regularly be comparing to partner account lists\"\r\n                >\r\n                  <Fab\r\n                    variant=\"extended\"\r\n                    aria-label=\"add\"\r\n                    sx={{ marginTop: '2.5rem', minWidth: '208px' }}\r\n                    onClick={handleFileSelectionBtnClick}\r\n                  >\r\n                    <Upload sx={{ mr: 1 }} />\r\n                    Select Pinned File\r\n                  </Fab>\r\n                </InfoTooltip>\r\n                <input\r\n                  type=\"file\"\r\n                  ref={inputFileRef}\r\n                  className=\"file-input\"\r\n                  onChange={validateFileSelection}\r\n                  name=\"sales_file\"\r\n                />\r\n                {hasActiveSubscription ?\r\n                  <Fab\r\n                    variant=\"extended\"\r\n                    aria-label=\"add\"\r\n                    sx={{ marginTop: '2.5rem', minWidth: '208px' }}\r\n                    onClick={handleManageSubscriptionClick}\r\n                  >\r\n                    <PaymentIcon sx={{ mr: 1 }} />\r\n                    Manage Subscription\r\n                  </Fab> :\r\n                  <Fab\r\n                    variant=\"extended\"\r\n                    aria-label=\"add\"\r\n                    sx={{ marginTop: '2.5rem', minWidth: '208px' }}\r\n                    onClick={() => handleCreateCheckoutSession(user.email)}\r\n                  >\r\n                    <PaymentIcon sx={{ mr: 1 }} />\r\n                    Upgrade Subscription\r\n                  </Fab>\r\n                }\r\n              </Grid>\r\n            </Paper>\r\n          </Grid>\r\n        </Grid>\r\n      </Box>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default Profile;","import React, { useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport Profile from '../../pages/profile';\r\nimport {\r\n  createFileLink,\r\n  getPinnedFile\r\n} from '../../utils/spreadsheet.utils';\r\nimport { connect } from 'react-redux';\r\nimport { pinFileSuccess } from '../../state/actions/document';\r\nimport { UserState } from '../../state/reducers/user';\r\nimport { checkIsValidFileType } from '../../utils/validate-file-type';\r\nimport { showError, hideError } from '../../state/actions/alert';\r\nimport { setIsLoading } from '../../state/actions/loading';\r\nimport { getAccessToken } from '../../utils/access-token.utils';\r\nimport { updateUser } from '../../state/actions/user';\r\nimport { setAccessToken } from '../../utils/access-token.utils';\r\n\r\ninterface Props {\r\n  user: UserState;\r\n  setIsLoading: any;\r\n  showError: any;\r\n  hideError: any;\r\n  pinFileSuccess: any;\r\n  updateUser: any;\r\n}\r\n\r\nconst ProfileContainer = ({\r\n  user,\r\n  setIsLoading,\r\n  showError,\r\n  hideError,\r\n  pinFileSuccess,\r\n  updateUser\r\n}: Props) => {\r\n  useEffect(() => {\r\n    const checkSubscriptionAndRefreshAuth = async () => {\r\n      if (!user || !user.email) {\r\n        setIsLoading(true);\r\n        const query = new URLSearchParams(window.location.search);\r\n        const sessionId: string | null = query.get('session_id');\r\n        if (sessionId) {\r\n          await updateCustomerSubscriptionInfo(sessionId);\r\n        }\r\n        await refreshUserAuthStatus();\r\n      }\r\n    };\r\n    checkSubscriptionAndRefreshAuth();\r\n  }, []);\r\n\r\n  const handlePinnedFileClick = async () => {\r\n    try {\r\n      setIsLoading(true);\r\n      const pinnedFileData = await getPinnedFile(user.pinnedFileId);\r\n      setIsLoading(false);\r\n      createFileLink(pinnedFileData.data, user.pinnedFileName);\r\n    } catch (err: any) {\r\n      handleProfileActionFailure(err, 'Failed to download pinned file');\r\n    }\r\n  };\r\n\r\n  const handleCreateCheckoutSession = (email: string) => {\r\n    return axios.post('/api/v1/create-checkout-session', {\r\n      customerEmail: email, isComingFromProfilePage: true\r\n    })\r\n      .then((res) => {\r\n        hideError();\r\n        setIsLoading(false);\r\n        if (!!res && !!res.data) {\r\n          window.location.href = res.data.url;\r\n        }\r\n      })\r\n      .catch((err: any) => handleProfileActionFailure(err, 'Failed to create payment session'));\r\n  }\r\n\r\n  const handleManageSubscriptionClick = () => {\r\n    setIsLoading(true);\r\n    axios.post('/api/v1/create-portal-session', { email: user.email, isComingFromProfilePage: true })\r\n      .then((res: any) => {\r\n        setIsLoading(false);\r\n        hideError();\r\n        if (!!res && !!res.data) {\r\n          window.location.href = res.data.url;\r\n        }\r\n      })\r\n      .catch((err) => handleProfileActionFailure(err, 'There was a problem with connecting with the subscription portal'));\r\n  }\r\n\r\n  const validateFileSelection = (event: any) => {\r\n    const document: any = event && event.target && event.target.files ?\r\n      event.target.files[0] :\r\n      null;\r\n    const isValidDocType: boolean = document && document.name ?\r\n      checkIsValidFileType(document.name) : false;\r\n\r\n    if (isValidDocType) {\r\n      hideError();\r\n      handleFilePinning(document);\r\n    } else {\r\n      showError('Invalid file type. Only pin .xls, .xlsx, or .csv');\r\n    }\r\n  };\r\n\r\n  const handleFilePinning = (file: any) => {\r\n    setIsLoading(true);\r\n    const formData = new FormData();\r\n    if (\r\n      file &&\r\n      file.name\r\n    ) {\r\n      formData.append(\r\n        'sales_file',\r\n        file,\r\n        file.name\r\n      );\r\n      formData.append(\r\n        'email',\r\n        user.email\r\n      );\r\n    }\r\n    axios.post('/api/v1/pinfile', formData, {\r\n      headers: {\r\n        Authorization: `Bearer ${getAccessToken()}`\r\n      }\r\n    })\r\n      .then((res: any) => {\r\n        pinFileSuccess(res.data);\r\n        hideError();\r\n        setIsLoading(false);\r\n      })\r\n      .catch((err) => handleProfileActionFailure(err, 'Failed to pin file'));\r\n  }\r\n\r\n  const handleProfileActionFailure = (err: any, errorMessage: string) => {\r\n    console.log('err', err);\r\n    setIsLoading(false);\r\n    showError(errorMessage);\r\n    setTimeout(() => {\r\n      hideError();\r\n    }, 7500)\r\n  }\r\n\r\n  const handleProfileLoginSuccess = (res: any) => {\r\n    const { token, email } = res.data;\r\n    setAccessToken(token);\r\n    hideError();\r\n    setIsLoading(false);\r\n\r\n    if (res.data && email) {\r\n      updateUser(res.data);\r\n    }\r\n  }\r\n\r\n  const updateCustomerSubscriptionInfo = (sessionId: string | null) => {\r\n    return axios.post('/api/v1/order-success', { sessionId })\r\n      .catch(() => {\r\n        showError('Problem with user registration');\r\n      });\r\n  }\r\n\r\n  const refreshUserAuthStatus = () => {\r\n    return axios.post('/api/v1/refresh_token', null, { withCredentials: true })\r\n      .then(handleProfileLoginSuccess)\r\n      .catch((err: any) => handleProfileActionFailure(err, 'failed to load profile'));\r\n  }\r\n\r\n  return (\r\n    <Profile\r\n      user={user}\r\n      validateFileSelection={validateFileSelection}\r\n      handlePinnedFileClick={handlePinnedFileClick}\r\n      handleManageSubscriptionClick={handleManageSubscriptionClick}\r\n      handleCreateCheckoutSession={handleCreateCheckoutSession}\r\n    />\r\n  );\r\n}\r\n\r\nconst mapStateToProps = (state: any) => ({\r\n  user: state.user\r\n});\r\n\r\nconst mapDispatchToProps = (dispatch: any) => ({\r\n  showError: (message: string) => dispatch(showError(message)),\r\n  hideError: () => dispatch(hideError()),\r\n  setIsLoading: (isLoading: boolean) => dispatch(setIsLoading(isLoading)),\r\n  pinFileSuccess: (fileMetadata: any) => dispatch(pinFileSuccess(fileMetadata)),\r\n  updateUser: (user: any) => dispatch(updateUser(user))\r\n});\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ProfileContainer);","import React from 'react';\r\nimport {\r\n  Box,\r\n  Fab,\r\n  TextField,\r\n  Grid,\r\n  Typography,\r\n} from '@mui/material';\r\nimport { useFormik } from 'formik';\r\n\r\ninterface Props {\r\n  onSubmit: any;\r\n}\r\n\r\nconst PasswordReset = ({ onSubmit }: Props) => {\r\n  const validate = (values: any) => {\r\n    const errors: any = {};\r\n    if (!values.email) {\r\n      errors.email = 'Required';\r\n    }\r\n\r\n    if (!values.password) {\r\n      errors.password = 'Required';\r\n    } else if (values.password.length < 8) {\r\n      errors.password = 'Must be 8 characters or more';\r\n    }\r\n  \r\n    if (!values.confirmPassword) {\r\n      errors.confirmPassword = 'Required';\r\n    } else if (values.confirmPassword !== values.password) {\r\n      errors.confirmPassword = 'Must match password';\r\n    }\r\n  \r\n    return errors;\r\n  };\r\n\r\n  const formik = useFormik({\r\n    initialValues: {\r\n      email: '',\r\n      password: '',\r\n      confirmPassword: '',\r\n    },\r\n    validate,\r\n    onSubmit\r\n  });\r\n\r\n  const { values, errors, touched, handleBlur, handleChange, handleSubmit } = formik;\r\n\r\n  const isSubmitButtonDisabled = !!errors.email || !!errors.password || !!errors.confirmPassword\r\n    || !values.email || !values.password || !values.confirmPassword;\r\n\r\n  return (\r\n    <>\r\n      <Box sx={{ width: '100%', marginTop: '6.5vh' }}>\r\n        <Grid\r\n          container\r\n          spacing={2}\r\n          justifyContent=\"center\"\r\n          sx={{ height: '100%' }}\r\n        >\r\n          <Grid\r\n            item\r\n            container\r\n            xs={6}\r\n            p={0}\r\n            sx={{ height: '100%' }}\r\n            direction=\"column\"\r\n            alignItems=\"center\"\r\n          >\r\n            <Typography variant=\"h5\" sx={{ marginBottom: '2rem' }}>Reset your password</Typography>\r\n            <form onSubmit={handleSubmit}  style={{ width: '100%' }}>\r\n              <TextField\r\n                required\r\n                id=\"standard-basic\"\r\n                label=\"Email\"\r\n                name=\"email\"\r\n                variant=\"standard\"\r\n                sx={{ width: '100%', marginBottom: '1.5rem' }}\r\n                error={touched.email && !!errors.email}\r\n                helperText={touched.email && !!errors.email ? errors.email : null}\r\n                onBlur={handleBlur}\r\n                onChange={handleChange}\r\n                value={values.email}\r\n              />\r\n              <TextField\r\n                required\r\n                id=\"standard-basic\"\r\n                label=\"Password\"\r\n                name=\"password\"\r\n                variant=\"standard\"\r\n                type=\"password\"\r\n                sx={{ width: '100%', marginBottom: '1.5rem' }}\r\n                error={touched.password && !!errors.password}\r\n                helperText={touched.password && !!errors.password ? errors.password : null}\r\n                onBlur={handleBlur}\r\n                onChange={handleChange}\r\n                value={values.password}\r\n              />\r\n              <TextField\r\n                required\r\n                id=\"standard-basic\"\r\n                label=\"Confirm Password\"\r\n                name=\"confirmPassword\"\r\n                variant=\"standard\"\r\n                type=\"password\"\r\n                sx={{ width: '100%' }}\r\n                error={touched.confirmPassword && !!errors.confirmPassword}\r\n                helperText={touched.confirmPassword && !!errors.confirmPassword ? errors.confirmPassword : null}\r\n                onBlur={handleBlur}\r\n                onChange={handleChange}\r\n                value={values.confirmPassword}\r\n              />\r\n              <Grid\r\n                container\r\n                spacing={2}\r\n                justifyContent=\"center\"\r\n                alignItems=\"center\"\r\n              >\r\n                <Grid\r\n                  item\r\n                  container\r\n                  xs={8}\r\n                  p={0}\r\n                  direction=\"column\"\r\n                  justifyContent=\"center\"\r\n                  alignItems=\"center\"\r\n                >\r\n                  <Fab\r\n                    variant=\"extended\"\r\n                    aria-label=\"add\"\r\n                    sx={{ margin: '2.5rem auto 3rem auto' }}\r\n                    type=\"submit\"\r\n                    disabled={isSubmitButtonDisabled}\r\n                  >\r\n                    Reset Password\r\n                  </Fab>\r\n                </Grid>\r\n              </Grid>\r\n            </form>\r\n          </Grid>\r\n        </Grid>\r\n      </Box>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default PasswordReset;","import React, { useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport { useHistory, useParams } from 'react-router-dom';\r\nimport PasswordReset from '../../pages/password-reset';\r\nimport { connect } from 'react-redux';\r\nimport { hideError, showError } from '../../state/actions/alert';\r\nimport { setIsLoading } from '../../state/actions/loading';\r\n\r\ninterface Props {\r\n  setIsLoading: any;\r\n  showError: any;\r\n  hideError: any;\r\n}\r\n\r\nconst PasswordResetContainer = ({ setIsLoading, showError, hideError }: Props) => {\r\n  const history = useHistory();\r\n  const params: any = useParams();\r\n\r\n  useEffect(() => {\r\n    axios.post('/api/v1/resetpassword', { token: params.token })\r\n      .catch((err) => {\r\n        history.push('/');\r\n      });\r\n  }, [params, history]);\r\n\r\n  const onSubmit = (values: any) => {\r\n    const formData = new FormData();\r\n    formData.append('email', values.email);\r\n    formData.append('password', values.password);\r\n    const config = {\r\n      headers: {\r\n        'Content-Type': 'multipart/form-data'\r\n      }\r\n    };\r\n    setIsLoading(true);\r\n    axios.post('/api/v1/updatepassword', formData, config)\r\n      .then(() => {\r\n        hideError();\r\n        setIsLoading(false);\r\n        history.push('/');\r\n      })\r\n      .catch((err: any) => {\r\n        console.log('err', err);\r\n        setIsLoading(false);\r\n        showError('Password reset failed. Please try again.');\r\n        setTimeout(() => {\r\n          hideError();\r\n        }, 5000);\r\n      });\r\n  };\r\n\r\n  return (\r\n    <PasswordReset onSubmit={onSubmit} />\r\n  );\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch: any) => ({\r\n  showError: (message: string) => dispatch(showError(message)),\r\n  hideError: () => dispatch(hideError()),\r\n  setIsLoading: (isLoading: boolean) => dispatch(setIsLoading(isLoading)),\r\n});\r\n\r\nexport default connect(null, mapDispatchToProps)(PasswordResetContainer);","import React from 'react';\r\nimport {\r\n  Box,\r\n  Fab,\r\n  TextField,\r\n  Grid,\r\n  Typography,\r\n} from '@mui/material';\r\nimport { useFormik } from 'formik';\r\n\r\ninterface Props {\r\n  onSubmit: any;\r\n}\r\n\r\nconst ForgotPassword = ({ onSubmit }: Props) => {\r\n  const validate = (values: any) => {\r\n    const errors: any = {};\r\n  \r\n    if (!values.email) {\r\n      errors.email = 'Required';\r\n    }\r\n  \r\n    return errors;\r\n  };\r\n\r\n  const formik = useFormik({\r\n    initialValues: {\r\n      email: '',\r\n    },\r\n    validate,\r\n    onSubmit\r\n  });\r\n\r\n  const { values, errors, touched, handleBlur, handleChange, handleSubmit } = formik;\r\n\r\n  const isSubmitButtonDisabled = !!errors.email || !values.email;\r\n\r\n  return (\r\n    <>\r\n      <Box sx={{ width: '100%', marginTop: '6.5vh' }}>\r\n        <Grid\r\n          container\r\n          spacing={2}\r\n          justifyContent=\"center\"\r\n          sx={{ height: '100%' }}\r\n        >\r\n          <Grid\r\n            item\r\n            container\r\n            xs={6}\r\n            p={0}\r\n            sx={{ height: '100%' }}\r\n            direction=\"column\"\r\n            alignItems=\"center\"\r\n          >\r\n            <Typography variant=\"h5\" sx={{ marginBottom: '2rem' }}>Forgot my password</Typography>\r\n            <Typography variant=\"subtitle1\" sx={{ marginBottom: '1.5rem', width: '80%' }}>\r\n              Enter your email, and then you'll receive a verification code at that address. Use that code to reset your password.\r\n            </Typography>\r\n            <form onSubmit={handleSubmit}  style={{ width: '100%' }}>\r\n              <TextField\r\n                required\r\n                id=\"standard-basic\"\r\n                label=\"Email\"\r\n                name=\"email\"\r\n                variant=\"standard\"\r\n                sx={{ width: '100%' }}\r\n                error={touched.email && !!errors.email}\r\n                helperText={errors.email ? errors.email : null}\r\n                onBlur={handleBlur}\r\n                onChange={handleChange}\r\n                value={values.email}\r\n              />\r\n              <Grid\r\n                container\r\n                spacing={2}\r\n                justifyContent=\"center\"\r\n                alignItems=\"center\"\r\n              >\r\n                <Grid\r\n                  item\r\n                  container\r\n                  xs={12}\r\n                  p={0}\r\n                  direction=\"column\"\r\n                  justifyContent=\"center\"\r\n                  alignItems=\"center\"\r\n                >\r\n                  <Fab\r\n                    variant=\"extended\"\r\n                    aria-label=\"add\"\r\n                    sx={{ margin: '2.5rem auto 3rem auto' }}\r\n                    type=\"submit\"\r\n                    disabled={isSubmitButtonDisabled}\r\n                  >\r\n                    Send Password Reset Email\r\n                  </Fab>\r\n                </Grid>\r\n              </Grid>\r\n            </form>\r\n          </Grid>\r\n        </Grid>\r\n      </Box>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default ForgotPassword;","import React from 'react';\r\nimport axios from 'axios';\r\nimport ForgotPassword from '../../pages/forgot-password';\r\nimport { connect } from 'react-redux';\r\nimport { hideError, showError } from '../../state/actions/alert';\r\nimport { setIsLoading } from '../../state/actions/loading';\r\n\r\ninterface Props {\r\n  setIsLoading: any;\r\n  showError: any;\r\n  hideError: any;\r\n}\r\n\r\nconst ForgotPasswordContainer = ({ setIsLoading, showError, hideError }: Props) => {\r\n  const onSubmit = (values: any) => {\r\n    const formData = new FormData();\r\n    formData.append('email', values.email);\r\n    const config = {\r\n      headers: {\r\n        'Content-Type': 'multipart/form-data'\r\n      }\r\n    };\r\n    setIsLoading(true);\r\n    axios.post('/api/v1/forgotpassword', formData, config)\r\n      .then(() => {\r\n        setIsLoading(false);\r\n        hideError();\r\n      })\r\n      .catch((err: any) => {\r\n        console.log('err', err);\r\n        setIsLoading(false);\r\n        showError('Wrong email or password');\r\n      });\r\n  };\r\n\r\n  return (\r\n    <ForgotPassword onSubmit={onSubmit} />\r\n  );\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch: any) => ({\r\n  showError: (message: string) => dispatch(showError(message)),\r\n  hideError: () => dispatch(hideError()),\r\n  setIsLoading: (isLoading: boolean) => dispatch(setIsLoading(isLoading)),\r\n});\r\n\r\nexport default connect(null, mapDispatchToProps)(ForgotPasswordContainer);","import React from 'react';\r\nimport { Route, Redirect, useLocation } from 'react-router-dom';\r\nimport { UserState } from '../../state/reducers/user';\r\n\r\nconst PrivateRoute = (props: any) => {\r\n  const location = useLocation();\r\n  const { user }: { user: UserState } = props;\r\n\r\n  if (\r\n    !user ||\r\n    !user.email\r\n  ) {\r\n    return (\r\n      <Redirect\r\n        to={{\r\n          pathname: \"/\",\r\n          state: { from: location }\r\n        }}\r\n      />\r\n    );\r\n  }\r\n\r\n  // if (path === '/home' && (user.subscriptionType !== FREE && !user.activeSubscription)) {\r\n  //   return (\r\n  //     <Redirect\r\n  //       to={{\r\n  //         pathname: \"/profile\",\r\n  //         state: { from: location }\r\n  //       }}\r\n  //     />\r\n  //   );\r\n  // }\r\n\r\n  return <Route {...props} />;\r\n};\r\n\r\nexport default PrivateRoute;","import * as React from 'react';\r\nimport {\r\n  AppBar,\r\n  Box,\r\n  Toolbar,\r\n  Typography,\r\n  IconButton,\r\n  Menu,\r\n  MenuItem,\r\n  Button\r\n} from '@mui/material';\r\nimport { Handshake, AccountCircle } from '@mui/icons-material';\r\nimport { Link, useHistory } from 'react-router-dom';\r\nimport { UserState } from '../../state/reducers/user';\r\n\r\ninterface Props {\r\n  user: UserState;\r\n  handleLogout: any;\r\n  hideError: any;\r\n}\r\n\r\nconst NavBar = ({ user, handleLogout, hideError }: Props) => {\r\n  const [anchorEl, setAnchorEl] = React.useState<null | HTMLElement>(null);\r\n  const history = useHistory();\r\n\r\n  const handleMenu = (event: React.MouseEvent<HTMLElement>) => {\r\n    setAnchorEl(event.currentTarget);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    hideError();\r\n    setAnchorEl(null);\r\n  };\r\n\r\n  const handleHomeClick = () => {\r\n    hideError();\r\n    history.push('/home');\r\n  }\r\n\r\n  const logoutAndClose = () => {\r\n    handleClose();\r\n    handleLogout();\r\n  }\r\n\r\n  return (\r\n    <Box sx={{ flexGrow: 1 }}>\r\n      <AppBar position=\"static\">\r\n        <Toolbar>\r\n          <IconButton\r\n            size=\"large\"\r\n            edge=\"start\"\r\n            color=\"inherit\"\r\n            aria-label=\"menu\"\r\n            sx={{ mr: 2 }}\r\n            onClick={handleHomeClick}\r\n          >\r\n            <Handshake />\r\n          </IconButton>\r\n          <Button variant=\"text\" onClick={handleHomeClick}>\r\n            <Typography variant=\"h6\" sx={{ flexGrow: 1, color: 'white' }}>\r\n              Salesdap\r\n            </Typography>\r\n          </Button>\r\n\r\n          {user && user.email && <>\r\n            <IconButton\r\n              size=\"large\"\r\n              aria-label=\"account of current user\"\r\n              aria-controls=\"menu-appbar\"\r\n              aria-haspopup=\"true\"\r\n              onClick={handleMenu}\r\n              color=\"inherit\"\r\n              sx={{ marginLeft: 'auto' }}\r\n            >\r\n              <AccountCircle />\r\n            </IconButton>\r\n            <Menu\r\n              id=\"menu-appbar\"\r\n              anchorEl={anchorEl}\r\n              anchorOrigin={{\r\n                vertical: 'top',\r\n                horizontal: 'right',\r\n              }}\r\n              keepMounted\r\n              transformOrigin={{\r\n                vertical: 'top',\r\n                horizontal: 'right',\r\n              }}\r\n              open={Boolean(anchorEl)}\r\n              onClose={handleClose}\r\n            >\r\n              <MenuItem onClick={handleClose}>\r\n                <Link style={{ color: 'black', textDecoration: 'none' }} to=\"/profile\">Profile</Link>\r\n              </MenuItem>\r\n              <MenuItem onClick={handleClose}>\r\n                <Link style={{ color: 'black', textDecoration: 'none' }} to=\"/contact-us\">Contact Us</Link>\r\n              </MenuItem>\r\n              <MenuItem onClick={logoutAndClose}>Logout</MenuItem>\r\n            </Menu>\r\n          </>}\r\n        </Toolbar>\r\n      </AppBar>\r\n    </Box>\r\n  );\r\n}\r\n\r\nexport default NavBar;","import React from 'react';\r\nimport axios from 'axios';\r\nimport NavBar from '../../components/nav-bar';\r\nimport { useHistory } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { updateUser } from '../../state/actions/user';\r\nimport { showError, hideError } from '../../state/actions/alert';\r\nimport { UserState, initialState } from '../../state/reducers/user';\r\nimport { setAccessToken } from '../../utils/access-token.utils';\r\n\r\ninterface Props {\r\n  user: UserState;\r\n  hideError: any;\r\n  updateUser: any;\r\n}\r\n\r\nconst NavBarContainer = ({ user, hideError, updateUser }: Props) => {\r\n  const history = useHistory();\r\n\r\n  const handleLogout = () => {\r\n    axios.post('/api/v1/logout')\r\n      .then(() => {\r\n        hideError();\r\n        updateUser({...initialState});\r\n        setAccessToken('');\r\n        history.push('/');\r\n      })\r\n      .catch((err) => {\r\n        showError('Failed to logout');\r\n        setTimeout(() => {\r\n          hideError();\r\n        }, 5000);\r\n      });\r\n  }\r\n\r\n  return (\r\n    <NavBar user={user} handleLogout={handleLogout} hideError={hideError} />\r\n  );\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch: any) => ({\r\n  showError: (message: string) => dispatch(showError(message)),\r\n  hideError: () => dispatch(hideError()),\r\n  updateUser: (user: any) => dispatch(updateUser(user))\r\n});\r\n\r\nexport default connect(null, mapDispatchToProps)(NavBarContainer);","import React from 'react';\r\nimport { Box, Fab, Grid, Typography } from '@mui/material';\r\nimport { CheckCircle } from '@mui/icons-material';\r\nimport { useHistory } from 'react-router-dom';\r\n\r\nconst SuccessDisplay = ({ handleManageSubscriptionClick }: any) => {\r\n  const history = useHistory();\r\n\r\n  const handleLoginButtonClick = () => {\r\n    history.push('/');\r\n  }\r\n\r\n  return (\r\n    <section>\r\n      <Box sx={{ width: '100%', marginTop: '6.5vh' }}>\r\n        <Grid\r\n          container\r\n          spacing={2}\r\n          justifyContent=\"center\"\r\n          sx={{ height: '100%' }}\r\n        >\r\n          <Grid\r\n            item\r\n            container\r\n            xs={6}\r\n            p={0}\r\n            sx={{ height: '100%' }}\r\n            direction=\"column\"\r\n            alignItems=\"center\"\r\n          >\r\n            <div className=\"product Box-root\">\r\n              <CheckCircle />\r\n              <div className=\"description Box-root\" style={{ display: 'inline-block', marginBottom: '3.5rem'}}>\r\n                <Typography variant=\"h4\">Subscribed to Salesdap!</Typography>\r\n              </div>\r\n            </div>\r\n            <Fab variant=\"extended\" id=\"checkout-and-portal-button\" onClick={handleManageSubscriptionClick}>\r\n              Manage your subscription\r\n            </Fab>\r\n            <Fab variant=\"extended\" color='primary' id=\"login-button\" sx={{ marginTop: '1.5rem'}} onClick={handleLoginButtonClick}>\r\n              Get Started\r\n            </Fab>\r\n          </Grid>\r\n        </Grid>\r\n      </Box>\r\n    </section>\r\n  );\r\n}\r\n\r\nexport default SuccessDisplay;","import React, { useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport SuccessDisplay from '../../pages/payment-success';\r\nimport { connect } from 'react-redux';\r\nimport { hideError, showError } from '../../state/actions/alert';\r\nimport { setIsLoading } from '../../state/actions/loading';\r\n\r\ninterface Props {\r\n  showError: any;\r\n  hideError: any;\r\n  setIsLoading: any;\r\n}\r\n\r\nconst SuccessDisplayContainer = ({\r\n  showError,\r\n  hideError,\r\n  setIsLoading\r\n}: Props) => {\r\n   // Check to see if this is a redirect back from Checkout\r\n   const query = new URLSearchParams(window.location.search);\r\n \r\n   const sessionId = query.get('session_id');\r\n \r\n   useEffect(() => {\r\n    setIsLoading(true);\r\n     axios.post('/api/v1/order-success', { sessionId })\r\n       .then(() => {\r\n         setIsLoading(false);\r\n         hideError();\r\n       })\r\n       .catch(() => {\r\n         setIsLoading(false);\r\n         showError('Problem with user registration');\r\n       });\r\n   }, [])\r\n \r\n  const handleManageSubscriptionClick = () => {\r\n    setIsLoading(true);\r\n    axios.post('/api/v1/create-portal-session', { sessionId })\r\n      .then((res: any) => {\r\n        setIsLoading(false);\r\n        hideError();\r\n        if (!!res && !!res.data) {\r\n          window.location.href = res.data.url;\r\n        }\r\n      })\r\n      .catch((err) => {\r\n        setIsLoading(false);\r\n        console.log('err subscription', err);\r\n        showError('There was a problem with connecting with the subscription portal.');\r\n        setTimeout(() => {\r\n          hideError();\r\n        }, 10000);\r\n      });;\r\n  }\r\n\r\n  return (\r\n    <SuccessDisplay\r\n    handleManageSubscriptionClick={handleManageSubscriptionClick}\r\n    />\r\n  );\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch: any) => ({\r\n  showError: (message: string) => dispatch(showError(message)),\r\n  hideError: () => dispatch(hideError()),\r\n  setIsLoading: (isLoading: boolean) => dispatch(setIsLoading(isLoading)),\r\n});\r\n\r\nexport default connect(null, mapDispatchToProps)(SuccessDisplayContainer);","import React from 'react';\r\nimport { Grid, Paper, Typography, Box } from '@mui/material';\r\n\r\nconst ContactUs = () => {\r\n  return (\r\n    <>\r\n      <Box sx={{ width: '100%', marginTop: '3.5vh' }}>\r\n        <Grid\r\n          container\r\n          spacing={2}\r\n          justifyContent=\"center\"\r\n          alignItems=\"center\"\r\n          sx={{ height: '100%' }}\r\n        >\r\n          <Grid\r\n            item\r\n            container\r\n            xs={8}\r\n            p={0}\r\n            sx={{ height: '100%' }}\r\n            direction=\"column\"\r\n            justifyContent=\"start\"\r\n            alignItems=\"center\"\r\n          >\r\n            <Paper elevation={3} sx={{ width: '100%', padding: '3rem 0 3rem 3rem', margin: '3rem auto 3rem auto' }}>\r\n              <Typography variant=\"h5\">Contact Us</Typography>\r\n              <Typography variant=\"body2\">For assistance with issues, send an email to salesdaphelp@gmail.com</Typography>\r\n            </Paper>\r\n          </Grid>\r\n        </Grid>\r\n      </Box>\r\n    </>\r\n  )\r\n}\r\n\r\nexport default ContactUs;","import HomeContainer from '../../containers/home';\r\nimport RegisterContainer from '../../containers/register';\r\nimport LoginContainer from '../../containers/login';\r\nimport ProfileContainer from '../../containers/profile';\r\nimport PasswordResetContainer from '../../containers/password-reset';\r\nimport ForgotPasswordContainer from '../../containers/forgot-password';\r\nimport PrivateRoute from '../private-route'; // set everything to private after testing\r\nimport NavBarContainer from '../../containers/nav-bar';\r\nimport {\r\n  Alert,\r\n  Backdrop,\r\n  CircularProgress\r\n} from '@mui/material';\r\nimport { BrowserRouter, Route, Switch } from 'react-router-dom';\r\nimport { AlertState } from '../../state/reducers/alert';\r\nimport { UserState } from '../../state/reducers/user';\r\nimport Payment from '../../pages/payment';\r\nimport SuccessDisplayContainer from '../../containers/payment-success';\r\nimport ContactUs from '../../pages/contact-us';\r\n\r\ninterface Props {\r\n  alert: AlertState;\r\n  loading: boolean;\r\n  user: UserState;\r\n  handleAlertClose: any;\r\n}\r\n\r\nconst Routes = ({\r\n  alert,\r\n  loading,\r\n  user,\r\n  handleAlertClose,\r\n}: Props) => {\r\n  return (\r\n    <BrowserRouter>\r\n      <main>\r\n        <NavBarContainer user={user} />\r\n        <Switch>\r\n          <PrivateRoute exact path=\"/home\" component={HomeContainer} user={user} />\r\n          <Route exact path=\"/\" component={LoginContainer} />\r\n          <Route exact path=\"/register\" component={RegisterContainer} />\r\n          <Route path=\"/pay\" component={Payment} />\r\n          <Route path=\"/success\" component={SuccessDisplayContainer} />\r\n          <Route path=\"/profile\" component={ProfileContainer} />\r\n          <Route exact path=\"/forgot-password\" component={ForgotPasswordContainer} />\r\n          <Route path=\"/reset-password/:token\" component={PasswordResetContainer} />\r\n          <Route exact path=\"/contact-us\" component={ContactUs} />\r\n        </Switch>\r\n        {alert.isOpen && <Alert\r\n          variant=\"standard\"\r\n          severity={alert.alertType || \"error\"}\r\n          onClose={handleAlertClose}\r\n          sx={{\r\n            position: 'fixed',\r\n            bottom: '-2%',\r\n            left: '50%',\r\n            transform: 'translate(-50%, -50%)',\r\n            zIndex: 1570,\r\n            borderRadius: '10px',\r\n            width: 'fit-content',\r\n            maxWidth: '33%',\r\n            flexWrap: 'nowrap'\r\n          }}\r\n        >\r\n          {alert.message}\r\n        </Alert>}\r\n        <Backdrop open={loading} sx={{ zIndex: 1550 }}>\r\n          <CircularProgress color=\"inherit\" />\r\n        </Backdrop>\r\n      </main>\r\n    </BrowserRouter>\r\n  );\r\n}\r\n\r\nexport default Routes;\r\n","import Routes from '../../components/routes';\r\nimport { connect } from 'react-redux';\r\nimport { AlertState } from '../../state/reducers/alert';\r\nimport { UserState } from '../../state/reducers/user';\r\nimport { hideError, hideSuccess } from '../../state/actions/alert';\r\n\r\ninterface Props {\r\n  alert: AlertState;\r\n  loading: boolean;\r\n  user: UserState;\r\n  hideError: any;\r\n  hideSuccess: any;\r\n}\r\n\r\nconst RoutesContainer = ({\r\n  alert,\r\n  loading,\r\n  user,\r\n  hideError,\r\n  hideSuccess,\r\n}: Props) => {\r\n\r\n  const handleAlertClose = () => {\r\n    if (alert.alertType === 'error') {\r\n      hideError();\r\n    } else if (alert.alertType === 'success') {\r\n      hideSuccess();\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Routes\r\n      alert={alert}\r\n      loading={loading}\r\n      user={user}\r\n      handleAlertClose={handleAlertClose}\r\n    />\r\n  );\r\n}\r\n\r\nconst mapStateToProps = (state: any) => ({\r\n  alert: state.alert,\r\n  loading: state.loading.isLoading,\r\n  user: state.user\r\n});\r\n\r\nconst mapDispatchToProps = (dispatch: any) => ({\r\n  hideError: () => dispatch(hideError()),\r\n  hideSuccess: () => dispatch(hideSuccess()),\r\n});\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(RoutesContainer);\r\n","import {\r\n  UPLOAD_DOCUMENT_SUCCESS,\r\n  SELECT_DOCUMENT,\r\n  CHANGE_COMPARISON_COLUMN,\r\n  SET_FILE_SOURCE,\r\n  SET_COMPARISON_COLUMNS_ERROR,\r\n  SET_ALL_COLUMNS,\r\n  SET_FILE_STRUCTURE,\r\n  CHANGE_UNFORMATTED_DATA,\r\n  FORMATTED_DATA,\r\n  CHANGE_PARTNER_NAME,\r\n  CHANGE_PARTNER_COMPANY\r\n} from '../../actions/document';\r\nimport { addMessageToErrorList, removeMessageFromErrorList } from '../../../utils/update-comparison-columns';\r\n\r\nexport interface SelectedDocument {\r\n  data: Array<any>;\r\n  name: string;\r\n  allColumns: Array<string>;\r\n  columnChooserGridData: Array<any>;\r\n  fileBlob: any;\r\n}\r\n\r\nexport interface DocumentState {\r\n  duplicatesData: Array<any>;\r\n  selectedDocument1: SelectedDocument;\r\n  selectedDocument2: SelectedDocument;\r\n  comparisonColumns1: Array<string>;\r\n  comparisonColumns2: Array<string>;\r\n  fileSource1: string;\r\n  fileSource2: string;\r\n  comparisonColumns1Error: Array<string>;\r\n  comparisonColumns2Error: Array<string>;\r\n  fileStructure1: string;\r\n  fileStructure2: string;\r\n  unformattedData1: string;\r\n  unformattedData2: string;\r\n  partnerName: string;\r\n  partnerCompany: string;\r\n}\r\n\r\nconst initialState: DocumentState = {\r\n  duplicatesData: [],\r\n  selectedDocument1: {\r\n    data: [],\r\n    name: '',\r\n    allColumns: [],\r\n    columnChooserGridData: [],\r\n    fileBlob: null\r\n  },\r\n  selectedDocument2: {\r\n    data: [],\r\n    name: '',\r\n    allColumns: [],\r\n    columnChooserGridData: [],\r\n    fileBlob: null\r\n  },\r\n  comparisonColumns1: [],\r\n  comparisonColumns2: [],\r\n  fileSource1: 'upload',\r\n  fileSource2: 'upload',\r\n  comparisonColumns1Error: [],\r\n  comparisonColumns2Error: [],\r\n  fileStructure1: FORMATTED_DATA,\r\n  fileStructure2: FORMATTED_DATA,\r\n  unformattedData1: '',\r\n  unformattedData2: '',\r\n  partnerName: '',\r\n  partnerCompany: ''\r\n};\r\n\r\nexport const COMPARISON_COLUMNS_LIMIT: number = 5;\r\nexport const MISMATCHED_COLUMNS_ERR: string = 'The number of selected columns for each file needs to match.';\r\nexport const TOO_MANY_COLUMNS_ERR: string = `Limit of ${COMPARISON_COLUMNS_LIMIT} columns exceeded.`;\r\nexport const REQUIRED_ERR: string = 'At least 1 column is required';\r\n\r\nexport const documentReducer = (state = initialState, action: any) => {\r\n  switch (action.type) {\r\n    case CHANGE_COMPARISON_COLUMN:\r\n      const { payload, index } = action;\r\n      let errorMsg1 = [...state.comparisonColumns1Error];\r\n      let errorMsg2 = [...state.comparisonColumns2Error];\r\n\r\n      if (\r\n        (index === 0 && !!state.comparisonColumns2.length && payload.length !== state.comparisonColumns2.length) ||\r\n        (index === 1 && !!state.comparisonColumns1.length && payload.length !== state.comparisonColumns1.length)\r\n      ) {\r\n        addMessageToErrorList(errorMsg1, MISMATCHED_COLUMNS_ERR);\r\n        addMessageToErrorList(errorMsg2, MISMATCHED_COLUMNS_ERR);\r\n      } else if (\r\n        (index === 0 && payload.length === state.comparisonColumns2.length) ||\r\n        (index === 1 && payload.length === state.comparisonColumns1.length)\r\n      ) {\r\n        removeMessageFromErrorList(errorMsg1, MISMATCHED_COLUMNS_ERR);\r\n        removeMessageFromErrorList(errorMsg2, MISMATCHED_COLUMNS_ERR);\r\n      }\r\n      if (index === 0) {\r\n        if (payload.length > COMPARISON_COLUMNS_LIMIT) {\r\n          addMessageToErrorList(errorMsg1, TOO_MANY_COLUMNS_ERR);\r\n        } else {\r\n          removeMessageFromErrorList(errorMsg1, TOO_MANY_COLUMNS_ERR);\r\n        }\r\n        if (payload.length === 0) {\r\n          addMessageToErrorList(errorMsg1, REQUIRED_ERR);\r\n        } else {\r\n          removeMessageFromErrorList(errorMsg1, REQUIRED_ERR);\r\n        }\r\n      } else if (index === 1) {\r\n        if (payload.length > COMPARISON_COLUMNS_LIMIT) {\r\n          addMessageToErrorList(errorMsg2, TOO_MANY_COLUMNS_ERR);\r\n        } else {\r\n          removeMessageFromErrorList(errorMsg2, TOO_MANY_COLUMNS_ERR);\r\n        }\r\n        if (payload.length === 0) {\r\n          addMessageToErrorList(errorMsg2, REQUIRED_ERR);\r\n        } else {\r\n          removeMessageFromErrorList(errorMsg2, REQUIRED_ERR);\r\n        }\r\n      }\r\n\r\n      if (action.index === 0) {\r\n        return {\r\n          ...state,\r\n          comparisonColumns1: action.payload,\r\n          comparisonColumns1Error: errorMsg1,\r\n          comparisonColumns2Error: errorMsg2\r\n        };\r\n      } else {\r\n        return {\r\n          ...state,\r\n          comparisonColumns2: action.payload,\r\n          comparisonColumns1Error: errorMsg1,\r\n          comparisonColumns2Error: errorMsg2\r\n        };\r\n      }\r\n    case SET_COMPARISON_COLUMNS_ERROR:\r\n      const errorMsg = action.index === 0 ? [...state.comparisonColumns1Error] : [...state.comparisonColumns2Error];\r\n      if (action.payload.length === 0) {\r\n        addMessageToErrorList(errorMsg, REQUIRED_ERR);\r\n      }\r\n      if (action.index === 0) {\r\n        return {\r\n          ...state,\r\n          comparisonColumns1Error: errorMsg\r\n        };\r\n      } else {\r\n        return {\r\n          ...state,\r\n          comparisonColumns2Error: errorMsg\r\n        }\r\n      }\r\n    case SELECT_DOCUMENT:\r\n      if (action.index === 0) {\r\n        return {\r\n          ...state,\r\n          comparisonColumns1: [],\r\n          selectedDocument1: {\r\n            data: action.payload,\r\n            name: action.name,\r\n            columnChooserGridData: action.columnChooserGridData,\r\n            allColumns: [],\r\n            fileBlob: action.fileBlob\r\n          }\r\n        };\r\n      } else {\r\n        return {\r\n          ...state,\r\n          comparisonColumns2: [],\r\n          selectedDocument2: {\r\n            data: action.payload,\r\n            name: action.name,\r\n            columnChooserGridData: action.columnChooserGridData,\r\n            allColumns: [],\r\n            fileBlob: action.fileBlob\r\n          }\r\n        };\r\n      }\r\n    case SET_ALL_COLUMNS:\r\n      if (action.index === 0) {\r\n        return {\r\n          ...state,\r\n          selectedDocument1: {\r\n            ...state.selectedDocument1,\r\n            allColumns: action.payload\r\n          }\r\n        };\r\n      } else {\r\n        return {\r\n          ...state,\r\n          selectedDocument2: {\r\n            ...state.selectedDocument2,\r\n            allColumns: action.payload\r\n          }\r\n        };\r\n      }\r\n    case SET_FILE_SOURCE:\r\n      if (action.index === 0) {\r\n        return {\r\n          ...state,\r\n          fileSource1: action.payload\r\n        };\r\n      } else {\r\n        return {\r\n          ...state,\r\n          fileSource2: action.payload\r\n        };\r\n      }\r\n    case SET_FILE_STRUCTURE:\r\n      if (action.index === 0) {\r\n        if (action.payload === FORMATTED_DATA) {\r\n          return {\r\n            ...state,\r\n            fileStructure1: action.payload,\r\n            unformattedData1: '' \r\n          };\r\n        } else {\r\n          return {\r\n            ...state,\r\n            fileStructure1: action.payload,\r\n            comparisonColumns1: [],\r\n            selectedDocument1: { ...initialState.selectedDocument1 }\r\n          }\r\n        }\r\n      } else {\r\n        if (action.payload === FORMATTED_DATA) {\r\n          return {\r\n            ...state,\r\n            fileStructure2: action.payload,\r\n            unformattedData2: '' \r\n          };\r\n        } else {\r\n          return {\r\n            ...state,\r\n            fileStructure2: action.payload,\r\n            comparisonColumns2: [],\r\n            selectedDocument2: { ...initialState.selectedDocument2 }\r\n          }\r\n        }\r\n      }\r\n    case CHANGE_UNFORMATTED_DATA:\r\n      if (action.index === 0) {\r\n        return {\r\n          ...state,\r\n          unformattedData1: action.payload\r\n        };\r\n      } else {\r\n        return {\r\n          ...state,\r\n          unformattedData2: action.payload\r\n        };\r\n      }\r\n    case UPLOAD_DOCUMENT_SUCCESS:\r\n      return {\r\n        ...state,\r\n        duplicatesData: action.payload\r\n      };\r\n    case CHANGE_PARTNER_NAME:\r\n      return {\r\n        ...state,\r\n        partnerName: action.payload\r\n      }\r\n    case CHANGE_PARTNER_COMPANY:\r\n      return {\r\n        ...state,\r\n        partnerCompany: action.payload\r\n      }\r\n    default:\r\n      return state;\r\n  }\r\n}","import { CHANGE_STEP } from '../../actions/step-progress';\r\n\r\ninterface StepProgressState {\r\n  step: number;\r\n}\r\n\r\nconst initialState: StepProgressState = {\r\n  step: 0\r\n}\r\n\r\nexport const stepProgressReducer = (state = initialState, action: any) => {\r\n  switch (action.type) {\r\n    case CHANGE_STEP:\r\n      return {\r\n        ...state,\r\n        step: action.payload\r\n      }\r\n    default:\r\n      return state;\r\n  }\r\n}","import { UPDATE_EMAIL_TEMPLATE } from '../../actions/email-template';\r\n\r\nconst EMAIL_DEFAULT_TEXT = `[insert name],\r\n\r\nThanks for sending over your account list.\r\n\r\nAttached youll find a list that maps both our account teams to one another. \r\n\r\nRegards,\r\n\r\n[insert your signature]\r\n`;\r\n\r\nconst initialState = {\r\n  template: EMAIL_DEFAULT_TEXT\r\n};\r\n\r\nexport const emailTemplateReducer = (state = initialState, action: any) => {\r\n  switch(action.type) {\r\n    case UPDATE_EMAIL_TEMPLATE:\r\n      return { ...state, template: action.payload };\r\n    default:\r\n      return state;\r\n  }\r\n}","import { SHOW_ERROR, HIDE_ERROR, SHOW_SUCCESS, HIDE_SUCCESS } from '../../actions/alert';\r\nimport { CHANGE_STEP } from '../../actions/step-progress';\r\n\r\nexport interface AlertState {\r\n  isOpen: boolean;\r\n  alertType: any;\r\n  message: string;\r\n};\r\n\r\nconst initialState = {\r\n  isOpen: false,\r\n  alertType: '',\r\n  message: ''\r\n}\r\n\r\nexport const alertReducer = (state: AlertState = initialState, action: any) => {\r\n  switch(action.type) {\r\n    case SHOW_ERROR:\r\n      return {\r\n        ...state,\r\n        isOpen: true,\r\n        alertType: 'error',\r\n        message: action.payload\r\n      };\r\n    case HIDE_ERROR:\r\n    case CHANGE_STEP:\r\n      return {\r\n        ...state,\r\n        isOpen: false,\r\n        alertType: '',\r\n        message: ''\r\n      };\r\n    case SHOW_SUCCESS:\r\n      return {\r\n        ...state,\r\n        isOpen: true,\r\n        alertType: 'success',\r\n        message: action.payload\r\n      };\r\n    case HIDE_SUCCESS:\r\n      return {\r\n        ...state,\r\n        isOpen: false,\r\n        alertType: '',\r\n        message: ''\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n}","import { SET_IS_LOADING } from '../../actions/loading';\r\n\r\nexport interface LoadingState {\r\n  isLoading: boolean;\r\n};\r\n\r\nconst initialState = {\r\n  isLoading: false\r\n}\r\n\r\nexport const loadingReducer = (state: LoadingState = initialState, action: any) => {\r\n  switch(action.type) {\r\n    case SET_IS_LOADING:\r\n      return { ...state, isLoading: action.payload };\r\n    default:\r\n      return state;\r\n  }\r\n}","import { combineReducers } from 'redux';\r\nimport { documentReducer } from './document';\r\nimport { stepProgressReducer } from './step-progress';\r\nimport { userReducer } from './user';\r\nimport { emailTemplateReducer } from './email-template';\r\nimport { alertReducer } from './alert';\r\nimport { loadingReducer } from './loading';\r\n\r\nexport const rootReducer = combineReducers({\r\n  stepProgress: stepProgressReducer,\r\n  document: documentReducer,\r\n  user: userReducer,\r\n  emailTemplate: emailTemplateReducer,\r\n  alert: alertReducer,\r\n  loading: loadingReducer\r\n});","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport logger from 'redux-logger';\r\nimport RoutesContainer from './containers/routes';\r\nimport { applyMiddleware, createStore } from 'redux';\r\nimport { Provider } from 'react-redux';\r\nimport { rootReducer } from './state/reducers';\r\nimport 'devextreme/dist/css/dx.material.blue.light.css';\r\nimport './index.css';\r\nimport './App.css';\r\n\r\nconst store = createStore(rootReducer, applyMiddleware(logger));\r\n\r\nReactDOM.render(\r\n  <Provider store={store}>\r\n    <RoutesContainer />\r\n  </Provider>,\r\n  document.getElementById('root')\r\n);\r\n"],"sourceRoot":""}