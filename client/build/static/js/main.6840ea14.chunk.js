(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{243:function(e,t,n){},244:function(e,t,n){},246:function(e,t,n){"use strict";n.r(t);var a=n(2),r=n(66),o=n.n(r),i=n(157),c=n.n(i),s=n(24),l=n(335),u=n(321),d=n(336),m=n(315),p=n(337),j=n(48),h=n.n(j),b=n(32),f=n(28),x=n(250),O=n(299),g=n(329),C=n(60),v=n(45),w=n.n(v),y=n(288),S=n(326),E=n(1),D=function(e){var t=e.selectedDocument,n=e.validateAndSetFileSelection,r=e.index,o=Object(a.useRef)(null);return Object(E.jsxs)(E.Fragment,{children:[Object(E.jsxs)(S.a,{variant:"extended","aria-label":"add",sx:{margin:"0.5rem auto 0"},onClick:function(){o&&o.current&&o.current.click()},children:[Object(E.jsx)(y.a,{sx:{mr:1}}),"Select File"]}),Object(E.jsx)("input",{type:"file",ref:o,className:"file-input",onChange:function(e){return n(e,r)},name:"sales_file"}),t&&t.name&&Object(E.jsx)(x.a,{variant:"subtitle1",sx:{marginTop:"1rem"},children:t.name})]})},T="UPLOAD_DOCUMENT_SUCCESS",P="SELECT_DOCUMENT",F="CHANGE_COMPARISON_COLUMN",k="PIN_FILE_SUCCESS",I="SET_FILE_SOURCE",N="SET_FILE_STRUCTURE",A="SET_COMPARISON_COLUMNS_ERROR",B="SET_ALL_COLUMNS",R="CHANGE_UNFORMATTED_DATA",U="CHANGE_PARTNER_NAME",L="CHANGE_PARTNER_COMPANY",_="UNFORMATTED_DATA",M="FORMATTED_DATA",H=function(e,t,n){return{type:P,payload:e,index:t,name:n,columnChooserGridData:e.length>2?e.slice(0,2):e}},G=function(e,t){return{type:F,payload:e,index:t}},q="SHOW_ERROR",W="HIDE_ERROR",z="SHOW_SUCCESS",V="HIDE_SUCCESS",Z=function(e){return{type:q,payload:e}},J=function(){return{type:W}},Y=function(e){return{type:z,payload:e}},$=function(){return{type:W}},K="SET_IS_LOADING",Q=function(e){return{type:K,payload:e}},X=["xls","xlsx","csv"],ee=function(e){var t=e.split("."),n=t[t.length-1];return X.includes(n.toLowerCase())},te=n(89),ne=function(){var e=Object(C.a)(w.a.mark((function e(t){var n,a,r,o;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.arrayBuffer();case 2:if(n=e.sent,a=Object(te.a)(n),r=a.SheetNames[0],!(o=a&&a.Sheets?a.Sheets[r]:null)){e.next=8;break}return e.abrupt("return",te.b.sheet_to_json(o));case 8:return e.abrupt("return",[]);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ae=function(){var e=Object(C.a)(w.a.mark((function e(t){var n,a,r,o;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=[],a=[],t.forEach((function(e,t){0===t&&(a=Array.from(Object.keys(e)),n.push(a));var r=a.map((function(t){return e[t]}));n.push(r)})),r=te.b.aoa_to_sheet(n),o=te.b.book_new(),te.b.book_append_sheet(o,r,"Sheet1"),Object(te.c)(o,"account-mapping.xls");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),re=function(e,t){var n=window.URL.createObjectURL(new Blob([e])),a=document.createElement("a");a.href=n,a.setAttribute("download",t),document.body.appendChild(a),a.click()},oe=function(e){return h.a.get("/api/v1/viewpinnedfile",{responseType:"blob",params:{pinnedFileId:e},withCredentials:!0})},ie=Object(b.b)(null,(function(e){return{showError:function(t){return e(Z(t))},hideError:function(){return e(J())},setIsLoading:function(t){return e(Q(t))},selectDocument:function(t,n,a){return e(H(t,n,a))}}}))((function(e){var t=e.selectedDocument,n=e.showError,a=e.hideError,r=e.setIsLoading,o=e.selectDocument,i=e.index,c=function(){var e=Object(C.a)(w.a.mark((function e(t,i){var c,s;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r(!0),c=t&&t.target&&t.target.files?t.target.files[0]:null,!(!(!c||!c.name)&&ee(c.name))){e.next=12;break}return a(),e.next=7,ne(c);case 7:s=e.sent,o(s,i,c.name),r(!1),e.next=13;break;case 12:n("Invalid file type. Only .xls, .xlsx, or .csv files can be processed.");case 13:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return Object(E.jsx)(D,{selectedDocument:t,validateAndSetFileSelection:c,index:i})})),ce=n(323),se=n(290),le=function(e){var t=e.user,n=e.handlePinnedFileClick;return Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)(x.a,{variant:"subtitle1",children:"Pinned File:"}),Object(E.jsx)(ce.a,{onClick:n,icon:Object(E.jsx)(se.a,{}),label:t.pinnedFileName})]})},ue=Object(b.b)((function(e){return{user:e.user}}),(function(e){return{showError:function(t){return e(Z(t))},hideError:function(){return e(J())}}}))((function(e){var t=e.user,n=e.showError,a=(e.hideError,function(){var e=Object(C.a)(w.a.mark((function e(){var a;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,oe(t.pinnedFileId);case 3:a=e.sent,re(a.data,t.pinnedFileName),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.log("err",e.t0),n("Failed to download pinned file.");case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}());return Object(E.jsx)(le,{user:t,handlePinnedFileClick:a})})),de=n(327),me=n(320),pe=n(328),je=n(316),he=function(e){var t=e.fileSource,n=e.handleFileTypeChange,a=e.index;return Object(E.jsx)(de.a,{children:Object(E.jsxs)(me.a,{"aria-labelledby":"demo-controlled-radio-buttons-group",name:"controlled-radio-buttons-group",row:!0,value:t,onChange:function(e){return n(e,a)},sx:{marginBottom:"1rem"},children:[Object(E.jsx)(pe.a,{value:"upload",control:Object(E.jsx)(je.a,{}),label:"Upload a file"}),Object(E.jsx)(pe.a,{value:"pinned",control:Object(E.jsx)(je.a,{}),label:"Use your pinned file"})]})})},be=Object(b.b)((function(e){return{user:e.user}}),(function(e){return{showError:function(t){return e(Z(t))},hideError:function(){return e(J())},setIsLoading:function(t){return e(Q(t))},selectDocument:function(t,n,a){return e(H(t,n,a))},setFileSource:function(t,n){return e(function(e,t){return{type:I,index:e,payload:t}}(t,n))}}}))((function(e){var t=e.showError,n=e.hideError,a=e.setIsLoading,r=e.selectDocument,o=e.setFileSource,i=e.fileSource,c=e.user,s=e.index,l=function(){var e=Object(C.a)(w.a.mark((function e(i,s){var l,u;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o(s,i.target.value),"pinned"!==i.target.value){e.next=23;break}return a(!0),e.prev=3,e.next=6,oe(c.pinnedFileId);case 6:return l=e.sent,e.next=9,ne(l.data);case 9:u=e.sent,r(u,s,c.pinnedFileId),n(),a(!1),e.next=21;break;case 15:e.prev=15,e.t0=e.catch(3),console.log("err",e.t0),t("Failed to get pinned file for user."),a(!1),setTimeout((function(){n()}),5e3);case 21:e.next=24;break;case 23:r([],s,"");case 24:case"end":return e.stop()}}),e,null,[[3,15]])})));return function(t,n){return e.apply(this,arguments)}}();return Object(E.jsx)(he,{handleFileTypeChange:l,fileSource:i,index:s})})),fe=n(312),xe=n(318),Oe=n(313),ge=n(293),Ce=n(294),ve=Object(E.jsx)(ge.a,{fontSize:"small"}),we=Object(E.jsx)(Ce.a,{fontSize:"small"}),ye=function(e){var t=e.selectedDocument,n=e.comparisonColumns,a=e.comparisonColumnsError,r=e.handleComparisonColumnsBlur,o=e.handleComparisonColumnFieldChange,i=t&&t.data&&t.data[0]?Array.from(Object.keys(t.data[0])):[];return Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)(fe.a,{multiple:!0,disableCloseOnSelect:!0,options:i,onChange:o,value:n,sx:{width:"100%"},renderOption:function(e,t,n){var a=n.selected;return Object(E.jsxs)("li",Object(s.a)(Object(s.a)({},e),{},{children:[Object(E.jsx)(xe.a,{icon:ve,checkedIcon:we,style:{marginRight:8},checked:a}),t]}))},renderInput:function(e){return Object(E.jsx)(Oe.a,Object(s.a)(Object(s.a)({},e),{},{variant:"standard",required:!0,error:!!a.length,onBlur:r}))}}),!!a.length&&Object(E.jsx)(x.a,{variant:"caption",sx:{color:"#d32f2f"},children:a.join("\n")})]})},Se=Object(b.b)(null,(function(e){return{changeComparisonColumn:function(t,n){return e(G(t,n))},setComparisonColumnsError:function(t,n){return e(function(e,t){return{type:A,payload:e,index:t}}(t,n))}}}))((function(e){var t=e.selectedDocument,n=e.comparisonColumns,a=e.changeComparisonColumn,r=e.comparisonColumnsError,o=e.setComparisonColumnsError,i=e.index;return Object(E.jsx)(ye,{selectedDocument:t,comparisonColumns:n,comparisonColumnsError:r,handleComparisonColumnsBlur:function(){o(n,i)},handleComparisonColumnFieldChange:function(e,t){a(t,i)},index:i})})),Ee=n(303),De=n(332),Te=n(302),Pe=n(333),Fe=n(334),ke=n(43),Ie=n.n(ke),Ne=[{"Account Name":"Pepsi Co.",Website:"pepsi.com","Account Manager":"Thomas Henry",DUNS:123453},{"Account Name":"Tropicana",Website:"tropicana.com","Account Manager":"Jennifer Shaw",DUNS:345234},{"Account Name":"Gatorade",Website:"gatorade.com","Account Manager":"Kim Yi",DUNS:645345}],Ae=["Pepsi Co.","Tropicana","Gatorade"],Be=function(e){var t=e.isHelpModalOpen,n=e.handleOpenHelpModal;return Object(E.jsx)(E.Fragment,{children:Object(E.jsxs)(De.a,{open:t,onClose:n,children:[Object(E.jsx)(Te.a,{children:"Formatted vs. Unformatted Data"}),Object(E.jsxs)(Pe.a,{dividers:!0,children:[Object(E.jsx)(Fe.a,{children:"Formatted data example:"}),Object(E.jsx)(Ie.a,{id:"formattedGridContainer",dataSource:Ne,showColumnLines:!0,columnAutoWidth:!0,showBorders:!0,width:"100%",height:"100%"}),Object(E.jsx)(x.a,{variant:"body2",children:'Note that "formatted" here is referring to the presence of defined column names.'}),Object(E.jsx)(Fe.a,{sx:{marginTop:"1.5rem"},children:"Unformatted data example:"}),Object(E.jsx)(Ie.a,{id:"unformattedGridContainer",dataSource:Ae,showColumnLines:!0,columnAutoWidth:!0,showBorders:!0,width:"100%",height:"100%",children:Object(E.jsx)(ke.Column,{caption:"",calculateCellValue:function(e){return e}})}),Object(E.jsx)(x.a,{variant:"body2",children:'Note that "unformatted" here is referring to the lack of defined column names. If you\'re uploading an unformatted file, only copy/paste 1 column that you think would lead to the most precise match when mapped to a column from the other file.'})]})]})})},Re=function(e){var t=e.fileStructure,n=e.handleFileStructureChange,r=e.index,o=Object(a.useState)(!1),i=Object(f.a)(o,2),c=i[0],s=i[1],l=function(){s(!c)};return Object(E.jsxs)(E.Fragment,{children:[Object(E.jsxs)(de.a,{children:[Object(E.jsxs)(O.a,{children:["Is your data formatted or unformatted? ",Object(E.jsx)(g.a,{onClick:l,children:Object(E.jsx)(Ee.a,{})})]}),Object(E.jsxs)(me.a,{row:!0,"aria-labelledby":"demo-controlled-radio-buttons-group",name:"controlled-radio-buttons-group",value:t,onChange:function(e){return n(e,r)},children:[Object(E.jsx)(pe.a,{value:M,control:Object(E.jsx)(je.a,{}),label:"Formatted"}),Object(E.jsx)(pe.a,{value:_,control:Object(E.jsx)(je.a,{}),label:"Unformatted"})]})]}),Object(E.jsx)(Be,{isHelpModalOpen:c,handleOpenHelpModal:l})]})},Ue=Object(b.b)(null,(function(e){return{setFileStructure:function(t,n){return e(function(e,t){return{type:N,index:e,payload:t}}(t,n))}}}))((function(e){var t=e.setFileStructure,n=e.fileStructure,a=e.index;return Object(E.jsx)(Re,{handleFileStructureChange:function(e,n){t(n,e.target.value)},fileStructure:n,index:a})})),Le=function(e){var t=e.unformattedData,n=e.handleUnformattedDataChange;return Object(E.jsx)(Oe.a,{multiline:!0,maxRows:5,variant:"standard",sx:{width:"100%"},helperText:"Unformatted data",value:t,onChange:n})},_e=Object(b.b)(null,(function(e){return{changeUnformattedData:function(t,n){return e(function(e,t){return{type:R,index:e,payload:t}}(t,n))}}}))((function(e){var t=e.unformattedData,n=e.index,a=e.changeUnformattedData;return Object(E.jsx)(Le,{handleUnformattedDataChange:function(e){a(n,e.target.value)},unformattedData:t})})),Me=function(e){var t=e.partnerName,n=e.changePartnerName;return Object(E.jsx)(E.Fragment,{children:Object(E.jsx)(Oe.a,{helperText:"Partner Sales Rep Name",variant:"standard",sx:{width:"100%"},value:t,onChange:n})})},He=Object(b.b)((function(e){return{partnerName:e.document.partnerName}}),(function(e){return{changePartnerName:function(t){return e((n=t.target.value,{type:U,payload:n}));var n}}}))((function(e){var t=e.partnerName,n=e.changePartnerName;return Object(E.jsx)(Me,{partnerName:t,changePartnerName:n})})),Ge=function(e){var t=e.partnerCompany,n=e.changePartnerCompany;return Object(E.jsx)(E.Fragment,{children:Object(E.jsx)(Oe.a,{helperText:"Partner Company",variant:"standard",sx:{width:"100%"},value:t,onChange:n})})},qe=Object(b.b)((function(e){return{partnerCompany:e.document.partnerCompany}}),(function(e){return{changePartnerCompany:function(t){return e((n=t.target.value,{type:L,payload:n}));var n}}}))((function(e){var t=e.partnerCompany,n=e.changePartnerCompany;return Object(E.jsx)(Ge,{partnerCompany:t,changePartnerCompany:n})})),We=function(e){var t=e.selectedDocument,n=e.handleColumnClick,a=e.comparisonColumns,r=e.index;return Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)(x.a,{variant:"subtitle1",sx:{margin:"2rem 0 0"}}),Object(E.jsxs)(ke.DataGrid,{id:"gridContainer",dataSource:t.columnChooserGridData,allowColumnReordering:!0,allowColumnResizing:!0,columnAutoWidth:!0,showBorders:!0,children:[t.allColumns?t.allColumns.map((function(e,t){return Object(E.jsx)(ke.Column,{dataField:e,allowSorting:!1,headerCellRender:function(){return function(e,t,n,a){return Object(E.jsxs)("div",{children:[e.column?e.column.dataField:e,Object(E.jsx)(xe.a,{onClick:function(){t(e,a)},checked:n.indexOf(e)>-1})]})}(e,n,a,r)}},"col-".concat(t,"-1"))})):[],Object(E.jsx)(ke.Paging,{defaultPageSize:2}),Object(E.jsx)(ke.Pager,{visible:!0,displayMode:"full",showPageSizeSelector:!1,showInfo:!0,showNavigationButtons:!0})]})]})},ze=function(e){var t=e.isHelpModalOpen,n=e.handleOpenHelpModal;return Object(E.jsx)(E.Fragment,{children:Object(E.jsxs)(De.a,{open:t,onClose:n,children:[Object(E.jsx)(Te.a,{children:"Choose columns to compare/match with the other file's columns"}),Object(E.jsxs)(Pe.a,{dividers:!0,children:[Object(E.jsx)(x.a,{variant:"body2",children:"Columns from file A that will be compared with columns from file B to determine a matching account. Limit: 5 columns. Hint: the more unique a column's value is to a company, the better (DUNS number, company website, etc.)."}),Object(E.jsx)(Fe.a,{sx:{marginTop:"1.5rem"},children:"Using the text input:"}),Object(E.jsx)(x.a,{variant:"body2",children:"Type in a column that you're trying to find. If it appears in the results drop down, click it to select the column. The checkbox next to its label will appear checked. Multiple checkboxes can be selected."}),Object(E.jsx)(Fe.a,{sx:{marginTop:"1.5rem"},children:"Using the data grid:"}),Object(E.jsx)(x.a,{variant:"body2",children:"The grid below shows 2 example rows from the uploaded file. Columns for comparison can also be selected by clicking the column headers."})]})]})})},Ve=function(e){var t=e.isHelpModalOpen,n=e.handleOpenHelpModal;return Object(E.jsx)(E.Fragment,{children:Object(E.jsxs)(De.a,{open:t,onClose:n,children:[Object(E.jsx)(Te.a,{children:"Upload a file from your computer or use a pinned file"}),Object(E.jsxs)(Pe.a,{dividers:!0,children:[Object(E.jsx)(Fe.a,{sx:{marginTop:"1.5rem"},children:"Upload a file from your computer:"}),Object(E.jsx)(x.a,{variant:"body2",children:"Click the Select File button and search for a file."}),Object(E.jsx)(Fe.a,{sx:{marginTop:"1.5rem"},children:"Use a pinned file:"}),Object(E.jsx)(x.a,{variant:"body2",children:'In your profile page, you can save a file as a "pinned file". This would be used when you have a file that you will regularly be compared to partners\' files. Typically, it would be the file that contains all of your accounts.'})]})]})})},Ze=function(e){var t=e.selectedDocument,n=e.comparisonColumns,r=e.comparisonColumnsError,o=e.fileSource,i=e.index,c=e.user,s=e.setAllColumns,l=e.handleColumnClick,u=e.fileStructure,d=e.unformattedData,m=Object(a.useState)(!1),p=Object(f.a)(m,2),j=p[0],h=p[1],b=Object(a.useState)(!1),C=Object(f.a)(b,2),v=C[0],w=C[1];Object(a.useEffect)((function(){t.data&&t.data[0]&&s(Array.from(Object.keys(t.data[0])),i)}),[t.data,s,i]);var y=function(){w(!v)},S=function(){h(!j)};return Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)(x.a,{variant:"h6",sx:{marginTop:"3rem",marginBottom:"1rem"},children:0===i?"MY ACCOUNTS":"PARTNER'S ACCOUNTS"}),Object(E.jsx)(Ue,{index:i,fileStructure:u}),u===M?Object(E.jsxs)(E.Fragment,{children:[Object(E.jsxs)(O.a,{sx:{marginTop:"4rem",marginBottom:"0.25rem"},children:["Select a file ",Object(E.jsx)(g.a,{onClick:y,children:Object(E.jsx)(Ee.a,{})})]}),!!c.pinnedFileName&&0===i&&Object(E.jsx)(be,{fileSource:o,index:i}),Object(E.jsx)("div",{className:"file-selection",children:"upload"===o?Object(E.jsx)(ie,{selectedDocument:t,index:i}):Object(E.jsx)(ue,{})}),Object(E.jsxs)(O.a,{sx:{marginTop:"4.5rem",marginBottom:"0.25rem"},children:["Use autocomplete field or data grid to pick columns ",Object(E.jsx)(g.a,{onClick:S,children:Object(E.jsx)(Ee.a,{})})]}),Object(E.jsx)(Se,{selectedDocument:t,comparisonColumns:n,comparisonColumnsError:r,index:i}),Object(E.jsx)("div",{style:{width:"100%"},children:Object(E.jsx)(We,{selectedDocument:t,handleColumnClick:l,comparisonColumns:n,index:i})})]}):Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)(O.a,{sx:{marginTop:"4.5rem",marginBottom:"0.25rem"},children:"Copy and Paste unformatted data"}),Object(E.jsx)(_e,{unformattedData:d,index:i})]}),1===i&&Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)(O.a,{sx:{marginTop:u===M?"3.5rem":"4rem",marginBottom:"0.5rem"},children:"Enter partner info"}),Object(E.jsx)(He,{}),Object(E.jsx)(qe,{})]}),Object(E.jsx)(ze,{isHelpModalOpen:j,handleOpenHelpModal:S}),Object(E.jsx)(Ve,{isHelpModalOpen:v,handleOpenHelpModal:y})]})},Je=Object(b.b)((function(e){return{user:e.user}}))((function(e){var t=e.user,n=e.selectedDocument,a=e.comparisonColumns,r=e.comparisonColumnsError,o=e.fileSource,i=e.index,c=e.handleColumnClick,s=e.setAllColumns,l=e.fileStructure,u=e.unformattedData;return Object(E.jsx)(Ze,{selectedDocument:n,comparisonColumns:a,comparisonColumnsError:r,fileSource:o,user:t,index:i,handleColumnClick:c,setAllColumns:s,fileStructure:l,unformattedData:u})})),Ye=n(9),$e=n(19),Ke=function(e,t,n){return t===M?e.data.length&&e.data.length>10?e.data.slice(0,10):e.data:n.length&&n.length>10?n.split("\n").slice(0,10):n.split("\n")},Qe=function(e,t,n){var a=[];return e===M?a=a.concat(Object($e.a)(t)):e===_&&a.push("Unformatted Data ".concat(n)),a},Xe=function(e){var t=e.isPreviewModalOpen,n=e.handleClosePreview,r=e.document,o=Object(a.useState)([]),i=Object(f.a)(o,2),c=i[0],l=i[1],u=r.selectedDocument1,d=r.selectedDocument2,m=r.comparisonColumns1,p=r.comparisonColumns2,j=r.fileStructure1,h=r.fileStructure2,b=r.unformattedData1,x=r.unformattedData2;return Object(a.useEffect)((function(){var e=Ke(u,j,b),t=Ke(d,h,x),n=[];n=Qe(j,m,1),n=[].concat(Object($e.a)(n),Object($e.a)(Qe(h,p,2)));for(var a=[],r=function(r){var o=n.reduce((function(n,a,o){return j===M&&m.indexOf(a)>-1&&o<m.length?Object(s.a)(Object(s.a)({},n),{},Object(Ye.a)({},a,e[r][a]||null)):j===_&&0===o?Object(s.a)(Object(s.a)({},n),{},{"Unformatted Data 1":e[r]||null}):h===M&&p.indexOf(a)>-1&&(j===M&&o>=m.length||j===_&&o>0)?Object(s.a)(Object(s.a)({},n),{},Object(Ye.a)({},a,t[r][a]||null)):h===_?Object(s.a)(Object(s.a)({},n),{},{"Unformatted Data 2":t[r]||null}):Object(s.a)({},n)}),{});a.push(o)},o=0;o<5;o++)r(o);l(a)}),[u,j,b,d,h,x,m,p]),Object(E.jsxs)(De.a,{open:t,onClose:n,children:[Object(E.jsx)(Te.a,{children:"Results Preview"}),Object(E.jsxs)(Pe.a,{dividers:!0,children:[Object(E.jsx)(Fe.a,{sx:{marginBottom:"1rem"},children:"Here's what your results will look like based on the columns you've chosen:"}),Object(E.jsx)(Ie.a,{id:"formattedGridContainer",dataSource:c,showColumnLines:!0,columnAutoWidth:!0,showBorders:!0,width:"100%",height:"100%"})]})]})},et=Object(b.b)((function(e){return{document:e.document}}))((function(e){var t=e.isPreviewModalOpen,n=e.handleClosePreview,a=e.document;return Object(E.jsx)(Xe,{isPreviewModalOpen:t,handleClosePreview:n,document:a})})),tt=n(324),nt=n(304),at=n(305),rt=n(306),ot=function(e,t,n,a){if(e===M){if(!t||!t.data||!t.data.length)return!1;if(!n||!n.length)return!1}else if(e===_&&(!a||!a.length))return!1;return!0},it=function(e){return e[0].toUpperCase()+e.substring(1)},ct=function(e){var t=e.document,n=e.setAllColumns,r=e.handleColumnClick,o=e.handleUploadAndCompare,i=Object(a.useState)(!1),c=Object(f.a)(i,2),s=c[0],l=c[1],u=t.selectedDocument1,d=t.selectedDocument2,m=t.comparisonColumns1,p=t.comparisonColumns2,j=t.comparisonColumns1Error,h=t.comparisonColumns2Error,b=t.fileSource1,x=t.fileSource2,O=t.fileStructure1,g=t.fileStructure2,C=t.unformattedData1,v=t.unformattedData2,w=function(e,t,n,a,r,o,i,c){var s=ot(e,i,n,r),l=ot(t,c,a,o);return(e!==M||t!==M||n.length===a.length)&&s&&l}(O,g,m,p,C,v,u,d);return Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)(tt.a,{container:!0,spacing:2,direction:"row",justifyContent:"center",alignItems:"start",children:Object(E.jsxs)(tt.a,{item:!0,container:!0,xs:8,p:0,sx:{height:"100%"},direction:"column",justifyContent:"start",alignItems:"center",children:[Object(E.jsx)(Je,{comparisonColumns:m,comparisonColumnsError:j,selectedDocument:u,fileSource:b,index:0,setAllColumns:n,handleColumnClick:r,fileStructure:O,unformattedData:C}),Object(E.jsx)(nt.a,{sx:{marginTop:"3rem",width:"100%",borderColor:"#1976D2"},variant:"middle"}),Object(E.jsx)(Je,{comparisonColumns:p,comparisonColumnsError:h,selectedDocument:d,fileSource:x,index:1,setAllColumns:n,handleColumnClick:r,fileStructure:g,unformattedData:v})]})}),Object(E.jsx)(tt.a,{container:!0,justifyContent:"space-around",alignItems:"center",sx:{marginBottom:"4.5rem"},children:Object(E.jsxs)(tt.a,{item:!0,container:!0,xs:4,direction:"column",justifyContent:"center",alignItems:"center",children:[Object(E.jsxs)(S.a,{variant:"extended","aria-label":"add",sx:{marginTop:"2rem",marginBottom:"1.5rem"},onClick:function(){l(!0)},children:[Object(E.jsx)(at.a,{sx:{mr:1}}),"Preview Results"]}),Object(E.jsxs)(S.a,{variant:"extended",color:"primary","aria-label":"add",disabled:!w,onClick:o,children:[Object(E.jsx)(rt.a,{sx:{mr:1}}),"Upload and Compare"]})]})}),s&&Object(E.jsx)(et,{isPreviewModalOpen:s,handleClosePreview:function(){l(!1)}})]})},st="CHANGE_STEP",lt=function(e){return{type:st,payload:e}},ut=function(e,t){var n=[],a=e.indexOf(t);return-1===a?n=[].concat(Object($e.a)(e),[t]):(n=Object($e.a)(e)).splice(a,1),n},dt=function(e,t){-1===e.indexOf(t)&&e.push(t)},mt=function(e,t){var n=e.indexOf(t);n>-1&&e.splice(n,1)},pt=Object(b.b)((function(e){return{activeStep:e.stepProgress.step,document:e.document}}),(function(e){return{showError:function(t){return e(Z(t))},hideError:function(){return e(J())},uploadDocumentSuccess:function(t){return e({type:T,payload:t})},setIsLoading:function(t){return e(Q(t))},changeStep:function(t){return e(lt(t))},setAllColumns:function(t,n){return e(function(e,t){return{type:B,payload:e,index:t}}(t,n))},changeComparisonColumn:function(t,n){return e(G(t,n))}}}))((function(e){var t=e.activeStep,n=e.document,a=e.showError,r=e.hideError,o=e.uploadDocumentSuccess,i=e.setIsLoading,c=e.changeStep,s=e.setAllColumns,l=e.changeComparisonColumn;return Object(E.jsx)(ct,{document:n,setAllColumns:s,handleColumnClick:function(e,t){var a=n.comparisonColumns1,r=n.comparisonColumns2,o=[];o=ut(0===t?a:r,e),l(o,t)},handleUploadAndCompare:function(){var e=n.selectedDocument1,s=n.selectedDocument2,l=n.comparisonColumns1,u=n.comparisonColumns2,d=n.fileStructure1,m=n.fileStructure2,p=n.unformattedData1,j=n.unformattedData2;i(!0);var b=new FormData;if(e&&e.name){var f=new Blob([JSON.stringify(e.data)],{type:"application/json"});b.append("sales_file1",f,e.name)}if(s&&s.name){var x=new Blob([JSON.stringify(s.data)],{type:"application/json"});b.append("sales_file2",x,s.name)}b.append("comparisonColumns1",l.join()),b.append("comparisonColumns2",u.join()),b.append("fileStructure1",d),b.append("fileStructure2",m),b.append("unformattedData1",p),b.append("unformattedData2",j),h.a.post("/api/v1/uploadfile",b,{withCredentials:!0}).then((function(e){r(),o(e.data),i(!1),c(t+=1)})).catch((function(e){console.log("err",e),i(!1),a("File upload and comparison failed."),setTimeout((function(){r()}),5e3)}))}})})),jt=n(325),ht=function(e){var t=e.duplicatesData,n=e.comparisonColumns1,r=e.comparisonColumns2,o=e.fileStructure1,i=e.fileStructure2,c=e.partnerName,s=e.partnerCompany,l=e.user,u=Object(a.useRef)(null),d=function(){u.current.instance.showColumnChooser()};return Object(E.jsx)(tt.a,{container:!0,justifyContent:"center",alignItems:"center",sx:{height:"100%",margin:"3rem 0 4.5rem 0",padding:"0 1rem"},children:Object(E.jsx)(tt.a,{item:!0,container:!0,xs:12,md:12,p:0,sx:{height:"100%",width:"100%"},direction:"column",justifyContent:"start",alignItems:"center",children:Object(E.jsxs)(Ie.a,{id:"gridContainer",dataSource:t,customizeColumns:function(e){var t=function(e){if(e&&e.firstname&&e.lastname){var t=it(e.firstname),n=it(e.lastname);return"".concat(t," ").concat(n)}return""}(l),a=function(e){return e?e.split(" ").map((function(e){return it(e)})).join(" "):""}(s),u=function(e){return e?it(e):""}(c);e.push({caption:"My accounts".concat(t?" (".concat(t,")"):""),isBand:!0,cssClass:"my-accounts"}),e.push({caption:"".concat(a?"".concat(a):"Partner"," accounts").concat(u?" (".concat(u,")"):""),isBand:!0,cssClass:"their-accounts"});var d=[];d=Qe(o,n,1),d=[].concat(Object($e.a)(d),Object($e.a)(Qe(i,r,2)));for(var m=o===M?n.length:1,p=2;p<e.length-1;p++)d[p-2]===e[p].caption&&p<m+2?(e[p].ownerBand=e.length-2,e[p].cssClass="my-accounts"):d[p-2]===e[p].caption&&(e[p].ownerBand=e.length-1,e[p].cssClass="their-accounts")},showColumnLines:!0,allowColumnReordering:!0,allowColumnResizing:!0,columnAutoWidth:!0,showBorders:!0,width:"100%",height:"100%",ref:u,children:[Object(E.jsx)(ke.ColumnChooser,{mode:"select",title:"Edit View",enabled:!0,allowSearch:!0,height:500,width:350}),Object(E.jsx)(ke.Column,{dataField:"accuracy",groupIndex:0,name:"Accuracy Level",calculateGroupValue:function(e){switch(e.accuracy){case 1:return"aaa;Low";case 2:return"bbb;Medium";case 3:return"ccc;High"}},groupCellRender:function(e){var t=e.column,n=e.value.split(";")[1];return Object(E.jsx)("div",{children:t.caption+": "+n})},showInColumnChooser:!1,sortOrder:"desc",visible:!1}),t&&t[0]&&Array.from(Object.keys(t[0])).map((function(e,t){return Object(E.jsx)(ke.Column,{dataField:e,caption:e.replace("--2",""),visible:0!==t,showInColumnChooser:"accuracy"!==e},t)})),Object(E.jsx)(ke.Paging,{defaultPageSize:25}),Object(E.jsx)(ke.Pager,{visible:!0,displayMode:"full",showPageSizeSelector:!1,showInfo:!0,showNavigationButtons:!0}),Object(E.jsxs)(ke.Toolbar,{children:[Object(E.jsx)(ke.Item,{location:"center",locateInMenu:"never",render:function(){return Object(E.jsx)("div",{className:"toolbar-label",children:Object(E.jsxs)("b",{children:[t.length," Matches"]})})}}),Object(E.jsx)(ke.Item,{name:"columnChooserButton",component:function(){return Object(E.jsx)(jt.a,{variant:"outlined",onClick:d,children:"edit view"})}})]})]})})})},bt=Object(b.b)((function(e){return{duplicatesData:e.document.duplicatesData,comparisonColumns1:e.document.comparisonColumns1,comparisonColumns2:e.document.comparisonColumns2,fileStructure1:e.document.fileStructure1,fileStructure2:e.document.fileStructure2,partnerName:e.document.partnerName,partnerCompany:e.document.partnerCompany,user:e.user}}))((function(e){var t=e.duplicatesData,n=e.comparisonColumns1,a=e.comparisonColumns2,r=e.fileStructure1,o=e.fileStructure2,i=e.partnerName,c=e.partnerCompany,s=e.user;return Object(E.jsx)(ht,{duplicatesData:t,comparisonColumns1:n,comparisonColumns2:a,fileStructure1:r,fileStructure2:o,partnerName:i,partnerCompany:c,user:s})})),ft=n(307),xt=n(308),Ot=function(e){var t=e.duplicatesData,n=e.template,r=e.handleTemplateChange,o=e.handleCopyEmailTemplate,i=Object(a.useRef)(null);return Object(E.jsx)(tt.a,{container:!0,spacing:2,justifyContent:"center",alignItems:"center",sx:{height:"100%",width:"100%",marginTop:"3.5rem"},children:Object(E.jsxs)(tt.a,{item:!0,container:!0,xs:8,sx:{height:"100%",width:"100%"},direction:"column",justifyContent:"start",alignItems:"center",children:[Object(E.jsx)(Oe.a,{id:"email-template-multiline",label:"Modify and then Copy/Paste this email template",multiline:!0,ref:i,rows:9,defaultValue:n,variant:"filled",sx:{width:"100%"},onChange:r}),Object(E.jsxs)(S.a,{variant:"extended","aria-label":"add",sx:{marginTop:"2.5rem"},onClick:o,children:[Object(E.jsx)(ft.a,{sx:{mr:1}}),"Copy Template"]}),Object(E.jsxs)(S.a,{variant:"extended","aria-label":"add",sx:{marginTop:"2.5rem"},onClick:function(){ae(t)},children:[Object(E.jsx)(xt.a,{sx:{mr:1}}),"Download Results"]})]})})},gt="UPDATE_EMAIL_TEMPLATE",Ct=Object(b.b)((function(e){return{duplicatesData:e.document.duplicatesData,template:e.emailTemplate.template}}),(function(e){return{updateEmailTemplate:function(t){return e({type:gt,payload:t})},showSuccess:function(t){return e(Y(t))},hideSuccess:function(){return e($())},showError:function(t){return e(Z(t))},hideError:function(){return e(J())}}}))((function(e){var t=e.duplicatesData,n=e.template,a=e.updateEmailTemplate,r=e.showSuccess,o=e.hideSuccess,i=e.showError,c=e.hideError,s=function(){var e=Object(C.a)(w.a.mark((function e(){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,navigator.clipboard.writeText(n);case 3:c(),r("Copied email template"),setTimeout((function(){o()}),5e3),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),i("Failed to copy email template"),setTimeout((function(){c()}),5e3);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();return Object(E.jsx)(Ot,{duplicatesData:t,template:n,handleTemplateChange:function(e){a(e.target.value)},handleCopyEmailTemplate:s})})),vt=n(330),wt=function(e){var t=e.steps,n=e.activeStep,a=e.handleBack,r=e.handleNext;return Object(E.jsxs)(vt.a,{sx:{position:"fixed",bottom:0,left:0,right:0,zIndex:1510,display:"flex",flexDirection:"row",padding:"0.75rem"},elevation:3,children:[Object(E.jsx)(jt.a,{disabled:0===n,onClick:a,sx:{mr:1},children:"Back"}),Object(E.jsx)(l.a,{sx:{flex:"1 1 auto"}}),Object(E.jsx)(jt.a,{disabled:n===t.length-1,onClick:r,children:"Next"})]})},yt=Object(b.b)((function(e){return{activeStep:e.stepProgress.step}}),(function(e){return{changeStep:function(t){return e(lt(t))}}}))((function(e){var t=e.steps,n=e.activeStep,a=e.changeStep;return Object(E.jsx)(wt,{activeStep:n,steps:t,handleNext:function(){a(n+=1)},handleBack:function(){a(n-=1)}})})),St=["Upload document","View results","Email customers"],Et=function(e){var t=e.activeStep,n=e.changeStep;return Object(E.jsxs)(E.Fragment,{children:[Object(E.jsxs)(l.a,{sx:{width:"100%",height:"100%",marginTop:"3.5vh"},children:[Object(E.jsx)(u.a,{nonLinear:!0,activeStep:t,sx:{marginLeft:"25%",marginRight:"25%"},children:St.map((function(e,t){return Object(E.jsx)(d.a,Object(s.a)(Object(s.a)({},{}),{},{children:Object(E.jsx)(m.a,Object(s.a)(Object(s.a)({onClick:function(){return n(t)}},{}),{},{children:e}))}),e)}))}),0===t&&Object(E.jsx)(a.Fragment,{children:Object(E.jsx)(p.a,{sx:{height:"100%",paddingBottom:"2rem"},children:Object(E.jsx)(pt,{})})}),1===t&&Object(E.jsx)(a.Fragment,{children:Object(E.jsx)(p.a,{sx:{height:"100%",width:"100%",maxWidth:"100%"},maxWidth:!1,children:Object(E.jsx)(bt,{})})}),2===t&&Object(E.jsx)(a.Fragment,{children:Object(E.jsx)(p.a,{sx:{height:"100%",width:"100%"},children:Object(E.jsx)(Ct,{})})})]}),Object(E.jsx)(yt,{steps:St})]})},Dt=Object(b.b)((function(e){return{activeStep:e.stepProgress.step}}),(function(e){return{changeStep:function(t){return e(lt(t))}}}))((function(e){var t=e.activeStep,n=e.changeStep;return Object(E.jsx)(Et,{activeStep:t,changeStep:n})})),Tt=n(57),Pt=n(71),Ft=function(e){var t=e.onSubmit,n=Object(Pt.a)({initialValues:{email:"",password:"",confirmPassword:"",firstName:"",lastName:"",company:""},validate:function(e){var t={};return e.password?e.password.length<8&&(t.password="Must be 8 characters or more"):t.password="Required",e.confirmPassword?e.confirmPassword!==e.password&&(t.confirmPassword="Must match password"):t.confirmPassword="Required",e.email?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(e.email)||(t.email="Invalid email address"):t.email="Required",t},onSubmit:t}),a=n.values,r=n.errors,o=n.touched,i=n.handleBlur,c=n.handleChange,s=n.handleSubmit,u=!!r.email||!!r.password||!!r.confirmPassword||!a.email||!a.password||!a.confirmPassword;return Object(E.jsx)(E.Fragment,{children:Object(E.jsx)(l.a,{sx:{width:"100%",marginTop:"6.5vh"},children:Object(E.jsx)(tt.a,{container:!0,spacing:2,justifyContent:"center",sx:{height:"100%"},children:Object(E.jsxs)(tt.a,{item:!0,container:!0,xs:6,p:0,sx:{height:"100%"},direction:"column",alignItems:"center",children:[Object(E.jsx)(x.a,{variant:"h5",sx:{marginBottom:"2rem"},children:"Register"}),Object(E.jsxs)("form",{onSubmit:s,style:{width:"100%"},children:[Object(E.jsx)(Oe.a,{required:!0,id:"standard-basic",label:"Email",name:"email",variant:"standard",sx:{width:"100%",marginBottom:"1.5rem"},error:o.email&&!!r.email,helperText:o.email&&r.email?r.email:null,onBlur:i,onChange:c,value:a.email}),Object(E.jsx)(Oe.a,{required:!0,id:"standard-basic",label:"Password",name:"password",variant:"standard",type:"password",sx:{width:"100%",marginBottom:"1.5rem"},error:o.password&&!!r.password,helperText:o.password&&r.password?r.password:null,onBlur:i,onChange:c,value:a.password}),Object(E.jsx)(Oe.a,{required:!0,id:"standard-basic",label:"Confirm Password",name:"confirmPassword",variant:"standard",type:"password",sx:{width:"100%",marginBottom:"1.5rem"},error:o.confirmPassword&&!!r.confirmPassword,helperText:o.confirmPassword&&r.confirmPassword?r.confirmPassword:null,onBlur:i,onChange:c,value:a.confirmPassword}),Object(E.jsx)(Oe.a,{id:"standard-basic",label:"First Name",name:"firstName",variant:"standard",sx:{width:"100%",marginBottom:"1.5rem"},onBlur:i,onChange:c,value:a.firstName}),Object(E.jsx)(Oe.a,{id:"standard-basic",label:"Last Name",name:"lastName",variant:"standard",sx:{width:"100%",marginBottom:"1.5rem"},onBlur:i,onChange:c,value:a.lastName}),Object(E.jsx)(Oe.a,{id:"standard-basic",label:"Company",name:"company",variant:"standard",sx:{width:"100%"},onBlur:i,onChange:c,value:a.company}),Object(E.jsx)(tt.a,{container:!0,spacing:2,justifyContent:"center",alignItems:"center",children:Object(E.jsx)(tt.a,{item:!0,container:!0,xs:4,p:0,direction:"column",justifyContent:"center",alignItems:"center",children:Object(E.jsx)(S.a,{variant:"extended","aria-label":"add",sx:{marginTop:"2.5rem",marginLeft:"auto",marginRight:"auto"},type:"submit",disabled:u,children:"Submit"})})})]}),Object(E.jsxs)(x.a,{sx:{marginTop:"2rem",marginBottom:"3rem"},children:["Already have an account? ",Object(E.jsx)(Tt.b,{className:"auth-page-link",to:"/",children:"Sign in"})]})]})})})})},kt=n(42),It="UPDATE_USER",Nt=function(e){return{type:It,payload:e}},At=Object(b.b)(null,(function(e){return{showError:function(t){return e(Z(t))},hideError:function(){return e(J())},setIsLoading:function(t){return e(Q(t))},updateUser:function(t){return e(Nt(t))}}}))((function(e){var t=e.setIsLoading,n=e.showError,a=e.hideError,r=e.updateUser,o=Object(kt.g)();return Object(E.jsx)(Ft,{onSubmit:function(e){t(!0);var i=new FormData;i.append("email",e.email),i.append("password",e.password),i.append("firstname",e.firstName),i.append("lastname",e.lastName),i.append("company",e.company);h.a.post("/api/v1/register",i,{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){a(),r(e.data),t(!1),o.push("/home")})).catch((function(e){console.log("err",e),t(!1),n("Registration failed."),setTimeout((function(){a()}),5e3)}))}})})),Bt=n(338),Rt=n(339),Ut=n(309),Lt=function(e){var t=e.onClose,n=e.onSubmit,a=Object(Pt.a)({initialValues:{email:""},validate:function(e){var t={};return/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(e.email)||(t.email="Invalid email address"),t},onSubmit:n}),r=a.values,o=a.errors,i=a.touched,c=a.handleBlur,s=a.handleChange,u=a.handleSubmit;return Object(E.jsxs)(l.a,{sx:{width:"100%",height:"100%",padding:"0 0 3rem 0"},children:[Object(E.jsx)(Bt.a,{sx:{position:"relative",marginBottom:"3rem"},children:Object(E.jsx)(Rt.a,{children:Object(E.jsx)(g.a,{edge:"end",color:"inherit",onClick:t,"aria-label":"close",children:Object(E.jsx)(Ut.a,{})})})}),Object(E.jsx)(tt.a,{container:!0,spacing:2,justifyContent:"center",alignItems:"center",sx:{height:"100%",width:"100%"},children:Object(E.jsx)(tt.a,{item:!0,container:!0,xs:10,p:0,sx:{height:"100%"},direction:"column",justifyContent:"center",alignItems:"center",children:Object(E.jsxs)("form",{onSubmit:u,children:[Object(E.jsx)(x.a,{variant:"h5",sx:{marginBottom:"2rem"},children:"Join the waitlist for Salesdap"}),Object(E.jsx)(Oe.a,{label:"email address",variant:"standard",name:"email",sx:{width:"100%"},error:i.email&&!!o.email,helperText:o.email?o.email:null,onBlur:c,onChange:s,value:r.email}),Object(E.jsx)(S.a,{variant:"extended","aria-label":"add",sx:{marginTop:"2.5rem"},type:"submit",children:"submit"})]})})})]})},_t=Object(b.b)(null,(function(e){return{showError:function(t){return e(Z(t))},hideError:function(){return e(J())},showSuccess:function(t){return e(Y(t))},hideSuccess:function(){return e($())},setIsLoading:function(t){return e(Q(t))}}}))((function(e){var t=e.onClose,n=e.showError,a=e.hideError,r=e.showSuccess,o=e.hideSuccess,i=e.setIsLoading;return Object(E.jsx)(Lt,{onSubmit:function(e){i(!0);var c=new FormData;c.append("email",e.email);h.a.post("/api/v1/email",c,{headers:{"Content-Type":"multipart/form-data"}}).then((function(){a(),i(!1),t(),r("Successfully registered to waitlist!"),setTimeout((function(){o()}),5e3)})).catch((function(e){console.log("email err",e),i(!1),n("Waitlist registration failed. Please try again."),setTimeout((function(){a()}),5e3)}))},onClose:t})})),Mt=function(e){var t=e.onSubmit,n=Object(a.useState)(!0),r=Object(f.a)(n,2),o=r[0],i=r[1],c=function(e){i(!1)},s=Object(Pt.a)({initialValues:{email:"",password:""},validate:function(e){var t={};return e.password||(t.password="Required"),e.email?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(e.email)||(t.email="Invalid email address"):t.email="Required",t},onSubmit:t}),u=s.values,d=s.errors,m=s.touched,p=s.handleBlur,j=s.handleChange,h=s.handleSubmit,b=!!d.email||!!d.password||!u.email||!u.password;return Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)(l.a,{sx:{width:"100%",marginTop:"6.5vh"},children:Object(E.jsx)(tt.a,{container:!0,spacing:2,justifyContent:"center",sx:{height:"100%"},children:Object(E.jsxs)(tt.a,{item:!0,container:!0,xs:6,p:0,sx:{height:"100%"},direction:"column",alignItems:"center",children:[Object(E.jsx)(x.a,{variant:"h5",sx:{marginBottom:"2rem"},children:"Login"}),Object(E.jsxs)("form",{onSubmit:h,style:{width:"100%"},children:[Object(E.jsx)(Oe.a,{required:!0,id:"standard-basic",label:"Email",name:"email",variant:"standard",sx:{width:"100%",marginBottom:"1.5rem"},error:m.email&&!!d.email,helperText:m.email&&d.email?d.email:null,onBlur:p,onChange:j,value:u.email}),Object(E.jsx)(Oe.a,{required:!0,id:"standard-basic",label:"Password",name:"password",variant:"standard",type:"password",sx:{width:"100%"},error:m.password&&!!d.password,helperText:m.password&&d.password?d.password:null,onBlur:p,onChange:j,value:u.password}),Object(E.jsx)(tt.a,{container:!0,spacing:2,justifyContent:"center",alignItems:"center",children:Object(E.jsx)(tt.a,{item:!0,container:!0,xs:6,p:0,direction:"column",justifyContent:"center",alignItems:"center",children:Object(E.jsx)(S.a,{variant:"extended","aria-label":"add",sx:{marginTop:"2.5rem",marginLeft:"auto",marginRight:"auto"},type:"submit",disabled:b,children:"Submit"})})})]}),Object(E.jsxs)(x.a,{sx:{marginTop:"2rem"},children:["Don't have an account?  ",Object(E.jsx)(Tt.b,{className:"auth-page-link",to:"/register",children:"Sign up now!"})]}),Object(E.jsxs)(x.a,{sx:{marginTop:"0.5rem",marginBottom:"3rem"},children:["Forgot your password?  ",Object(E.jsx)(Tt.b,{className:"auth-page-link",to:"/forgot-password",children:"Reset your password"})]})]})})}),Object(E.jsx)(De.a,{open:o,onClose:c,children:Object(E.jsx)(_t,{onClose:c})})]})},Ht=Object(b.b)(null,(function(e){return{showError:function(t){return e(Z(t))},hideError:function(){return e(J())},setIsLoading:function(t){return e(Q(t))},updateUser:function(t){return e(Nt(t))}}}))((function(e){var t=e.setIsLoading,n=e.showError,a=e.hideError,r=e.updateUser,o=Object(kt.g)();return Object(E.jsx)(Mt,{onSubmit:function(e){t(!0);var i=new FormData;i.append("email",e.email),i.append("password",e.password);h.a.post("/api/v1/login",i,{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){a(),r(e.data),t(!1),o.push("/home")})).catch((function(e){console.log("err",e),t(!1),n("Wrong email or password")}))}})})),Gt=function(e){var t=e.user,n=e.validateFileSelection,r=e.handlePinnedFileClick,o=Object(a.useRef)(null);return Object(E.jsx)(E.Fragment,{children:Object(E.jsx)(l.a,{sx:{width:"100%",marginTop:"3.5vh"},children:Object(E.jsx)(tt.a,{container:!0,spacing:2,justifyContent:"center",alignItems:"center",sx:{height:"100%"},children:Object(E.jsx)(tt.a,{item:!0,container:!0,xs:8,p:0,sx:{height:"100%"},direction:"column",justifyContent:"start",alignItems:"center",children:Object(E.jsxs)(vt.a,{elevation:3,sx:{width:"100%",padding:"3rem 0 3rem 3rem",margin:"3rem auto 3rem auto"},children:[Object(E.jsx)(x.a,{variant:"h5",sx:{marginBottom:"2rem"},children:"Profile"}),Object(E.jsxs)(x.a,{variant:"subtitle1",sx:{marginBottom:"2rem"},children:["Name: ",t.firstname," ",t.lastname]}),Object(E.jsxs)(x.a,{variant:"subtitle1",sx:{marginBottom:"2rem"},children:["Email: ",t.email]}),Object(E.jsxs)(x.a,{variant:"subtitle1",sx:{marginBottom:"2rem"},children:["Company: ",t.company]}),Object(E.jsx)(x.a,{variant:"subtitle1",children:"Pinned File:"}),Object(E.jsx)(ce.a,{onClick:r,icon:Object(E.jsx)(se.a,{}),label:t.pinnedFileName}),Object(E.jsxs)(tt.a,{item:!0,container:!0,xs:6,p:0,direction:"column",justifyContent:"start",alignItems:"start",children:[Object(E.jsxs)(S.a,{variant:"extended","aria-label":"add",sx:{marginTop:"2.5rem",minWidth:"208px"},onClick:function(){o&&o.current&&o.current.click()},children:[Object(E.jsx)(rt.a,{sx:{mr:1}}),"Select Pinned File"]}),Object(E.jsx)("input",{type:"file",ref:o,className:"file-input",onChange:n,name:"sales_file"})]})]})})})})})},qt=Object(b.b)((function(e){return{user:e.user}}),(function(e){return{showError:function(t){return e(Z(t))},hideError:function(){return e(J())},setIsLoading:function(t){return e(Q(t))},pinFileSuccess:function(t){return e(function(e){return{type:k,payload:e}}(t))}}}))((function(e){var t=e.user,n=e.setIsLoading,a=e.showError,r=e.hideError,o=e.pinFileSuccess,i=function(){var e=Object(C.a)(w.a.mark((function e(){var r;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n(!0),e.next=4,oe(t.pinnedFileId);case 4:r=e.sent,n(!1),re(r.data,t.pinnedFileName),e.next=14;break;case 9:e.prev=9,e.t0=e.catch(0),console.log("err",e.t0),n(!1),a("Failed to download pinned file.");case 14:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),c=function(e){n(!0);var i=new FormData;e&&e.name&&(i.append("sales_file",e,e.name),i.append("email",t.email)),h.a.post("/api/v1/pinfile",i).then((function(e){o(e.data),r(),n(!1)})).catch((function(e){console.log(e),n(!1),a("Failed to pin file."),setTimeout((function(){r()}),5e3)}))};return Object(E.jsx)(Gt,{user:t,validateFileSelection:function(e){var t=e&&e.target&&e.target.files?e.target.files[0]:null;!(!t||!t.name)&&ee(t.name)?(r(),c(t)):a("Invalid file type. Only pin .xls, .xlsx, or .csv")},handlePinnedFileClick:i})})),Wt=function(e){var t=e.onSubmit,n=Object(Pt.a)({initialValues:{email:"",password:"",confirmPassword:""},validate:function(e){var t={};return e.email||(t.email="Required"),e.password?e.password.length<8&&(t.password="Must be 8 characters or more"):t.password="Required",e.confirmPassword?e.confirmPassword!==e.password&&(t.confirmPassword="Must match password"):t.confirmPassword="Required",t},onSubmit:t}),a=n.values,r=n.errors,o=n.touched,i=n.handleBlur,c=n.handleChange,s=n.handleSubmit,u=!!r.email||!!r.password||!!r.confirmPassword||!a.email||!a.password||!a.confirmPassword;return Object(E.jsx)(E.Fragment,{children:Object(E.jsx)(l.a,{sx:{width:"100%",marginTop:"6.5vh"},children:Object(E.jsx)(tt.a,{container:!0,spacing:2,justifyContent:"center",sx:{height:"100%"},children:Object(E.jsxs)(tt.a,{item:!0,container:!0,xs:6,p:0,sx:{height:"100%"},direction:"column",alignItems:"center",children:[Object(E.jsx)(x.a,{variant:"h5",sx:{marginBottom:"2rem"},children:"Reset your password"}),Object(E.jsxs)("form",{onSubmit:s,style:{width:"100%"},children:[Object(E.jsx)(Oe.a,{required:!0,id:"standard-basic",label:"Email",name:"email",variant:"standard",sx:{width:"100%",marginBottom:"1.5rem"},error:o.email&&!!r.email,helperText:o.email&&r.email?r.email:null,onBlur:i,onChange:c,value:a.email}),Object(E.jsx)(Oe.a,{required:!0,id:"standard-basic",label:"Password",name:"password",variant:"standard",type:"password",sx:{width:"100%",marginBottom:"1.5rem"},error:o.password&&!!r.password,helperText:o.password&&r.password?r.password:null,onBlur:i,onChange:c,value:a.password}),Object(E.jsx)(Oe.a,{required:!0,id:"standard-basic",label:"Confirm Password",name:"confirmPassword",variant:"standard",type:"password",sx:{width:"100%"},error:o.confirmPassword&&!!r.confirmPassword,helperText:o.confirmPassword&&r.confirmPassword?r.confirmPassword:null,onBlur:i,onChange:c,value:a.confirmPassword}),Object(E.jsx)(tt.a,{container:!0,spacing:2,justifyContent:"center",alignItems:"center",children:Object(E.jsx)(tt.a,{item:!0,container:!0,xs:8,p:0,direction:"column",justifyContent:"center",alignItems:"center",children:Object(E.jsx)(S.a,{variant:"extended","aria-label":"add",sx:{margin:"2.5rem auto 3rem auto"},type:"submit",disabled:u,children:"Reset Password"})})})]})]})})})})},zt=Object(b.b)(null,(function(e){return{showError:function(t){return e(Z(t))},hideError:function(){return e(J())},setIsLoading:function(t){return e(Q(t))}}}))((function(e){var t=e.setIsLoading,n=e.showError,r=e.hideError,o=Object(kt.g)(),i=Object(kt.i)();Object(a.useEffect)((function(){h.a.post("/api/v1/resetpassword",{token:i.token}).catch((function(e){o.push("/")}))}),[i,o]);return Object(E.jsx)(Wt,{onSubmit:function(e){var a=new FormData;a.append("email",e.email),a.append("password",e.password);t(!0),h.a.post("/api/v1/updatepassword",a,{headers:{"Content-Type":"multipart/form-data"}}).then((function(){r(),t(!1),o.push("/")})).catch((function(e){console.log("err",e),t(!1),n("Password reset failed. Please try again."),setTimeout((function(){r()}),5e3)}))}})})),Vt=function(e){var t=e.onSubmit,n=Object(Pt.a)({initialValues:{email:""},validate:function(e){var t={};return e.email||(t.email="Required"),t},onSubmit:t}),a=n.values,r=n.errors,o=n.touched,i=n.handleBlur,c=n.handleChange,s=n.handleSubmit,u=!!r.email||!a.email;return Object(E.jsx)(E.Fragment,{children:Object(E.jsx)(l.a,{sx:{width:"100%",marginTop:"6.5vh"},children:Object(E.jsx)(tt.a,{container:!0,spacing:2,justifyContent:"center",sx:{height:"100%"},children:Object(E.jsxs)(tt.a,{item:!0,container:!0,xs:6,p:0,sx:{height:"100%"},direction:"column",alignItems:"center",children:[Object(E.jsx)(x.a,{variant:"h5",sx:{marginBottom:"2rem"},children:"Forgot my password"}),Object(E.jsx)(x.a,{variant:"subtitle1",sx:{marginBottom:"1.5rem",width:"80%"},children:"Enter your email, and then you'll receive a verification code at that address. Use that code to reset your password."}),Object(E.jsxs)("form",{onSubmit:s,style:{width:"100%"},children:[Object(E.jsx)(Oe.a,{required:!0,id:"standard-basic",label:"Email",name:"email",variant:"standard",sx:{width:"100%"},error:o.email&&!!r.email,helperText:r.email?r.email:null,onBlur:i,onChange:c,value:a.email}),Object(E.jsx)(tt.a,{container:!0,spacing:2,justifyContent:"center",alignItems:"center",children:Object(E.jsx)(tt.a,{item:!0,container:!0,xs:12,p:0,direction:"column",justifyContent:"center",alignItems:"center",children:Object(E.jsx)(S.a,{variant:"extended","aria-label":"add",sx:{margin:"2.5rem auto 3rem auto"},type:"submit",disabled:u,children:"Send Password Reset Email"})})})]})]})})})})},Zt=Object(b.b)(null,(function(e){return{showError:function(t){return e(Z(t))},hideError:function(){return e(J())},setIsLoading:function(t){return e(Q(t))}}}))((function(e){var t=e.setIsLoading,n=e.showError,a=e.hideError;return Object(E.jsx)(Vt,{onSubmit:function(e){var r=new FormData;r.append("email",e.email);t(!0),h.a.post("/api/v1/forgotpassword",r,{headers:{"Content-Type":"multipart/form-data"}}).then((function(){t(!1),a()})).catch((function(e){console.log("err",e),t(!1),n("Wrong email or password")}))}})})),Jt=function(e){var t=Object(kt.h)();return e.user&&e.user.email?Object(E.jsx)(kt.b,Object(s.a)({},e)):Object(E.jsx)(kt.a,{to:{pathname:"/",state:{from:t}}})},Yt=n(169),$t=n(322),Kt=n(310),Qt=n(311),Xt=function(e){var t=e.user,n=e.handleLogout,r=e.hideError,o=a.useState(null),i=Object(f.a)(o,2),c=i[0],s=i[1],u=Object(kt.g)(),d=function(){r(),s(null)},m=function(){r(),u.push("/home")};return Object(E.jsx)(l.a,{sx:{flexGrow:1},children:Object(E.jsx)(Bt.a,{position:"static",children:Object(E.jsxs)(Rt.a,{children:[Object(E.jsx)(g.a,{size:"large",edge:"start",color:"inherit","aria-label":"menu",sx:{mr:2},onClick:m,children:Object(E.jsx)(Kt.a,{})}),Object(E.jsx)(jt.a,{variant:"text",onClick:m,children:Object(E.jsx)(x.a,{variant:"h6",sx:{flexGrow:1,color:"white"},children:"Salesdap"})}),t&&t.email&&Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)(g.a,{size:"large","aria-label":"account of current user","aria-controls":"menu-appbar","aria-haspopup":"true",onClick:function(e){s(e.currentTarget)},color:"inherit",sx:{marginLeft:"auto"},children:Object(E.jsx)(Qt.a,{})}),Object(E.jsxs)(Yt.a,{id:"menu-appbar",anchorEl:c,anchorOrigin:{vertical:"top",horizontal:"right"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:Boolean(c),onClose:d,children:[Object(E.jsx)($t.a,{onClick:d,children:Object(E.jsx)(Tt.b,{style:{color:"black",textDecoration:"none"},to:"/profile",children:"Profile"})}),Object(E.jsx)($t.a,{onClick:function(){d(),n()},children:"Logout"})]})]})]})})})},en={firstname:"",lastname:"",email:"",company:"",pinnedFileName:"",pinnedFileId:""},tn=Object(b.b)(null,(function(e){return{showError:function(t){return e(Z(t))},hideError:function(){return e(J())},updateUser:function(t){return e(Nt(t))}}}))((function(e){var t=e.user,n=e.hideError,a=e.updateUser,r=Object(kt.g)();return Object(E.jsx)(Xt,{user:t,handleLogout:function(){a(Object(s.a)({},en)),r.push("/")},hideError:n})})),nn=n(317),an=n(331),rn=n(340),on=function(e){var t=e.alert,n=e.loading,a=e.user,r=e.handleAlertClose;return Object(E.jsx)(Tt.a,{children:Object(E.jsxs)("main",{children:[Object(E.jsx)(tn,{user:a}),Object(E.jsxs)(kt.d,{children:[Object(E.jsx)(Jt,{exact:!0,path:"/home",component:Dt,user:a}),Object(E.jsx)(kt.b,{exact:!0,path:"/",component:Ht}),Object(E.jsx)(kt.b,{exact:!0,path:"/register",component:At}),Object(E.jsx)(Jt,{exact:!0,path:"/profile",component:qt,user:a}),Object(E.jsx)(kt.b,{exact:!0,path:"/forgot-password",component:Zt}),Object(E.jsx)(kt.b,{path:"/reset-password/:token",component:zt})]}),t.isOpen&&Object(E.jsx)(nn.a,{variant:"standard",severity:t.alertType||"error",onClose:r,sx:{position:"fixed",bottom:"-2%",left:"50%",transform:"translate(-50%, -50%)",zIndex:1570,borderRadius:"10px",width:"fit-content",maxWidth:"33%",flexWrap:"nowrap"},children:t.message}),Object(E.jsx)(an.a,{open:n,sx:{zIndex:1550},children:Object(E.jsx)(rn.a,{color:"inherit"})})]})})},cn=Object(b.b)((function(e){return{alert:e.alert,loading:e.loading.isLoading,user:e.user}}),(function(e){return{hideError:function(){return e(J())},hideSuccess:function(){return e($())}}}))((function(e){var t=e.alert,n=e.loading,a=e.user,r=e.hideError,o=e.hideSuccess;return Object(E.jsx)(on,{alert:t,loading:n,user:a,handleAlertClose:function(){"error"===t.alertType?r():"success"===t.alertType&&o()}})})),sn=n(110),ln={duplicatesData:[],selectedDocument1:{data:[],name:"",allColumns:[],columnChooserGridData:[]},selectedDocument2:{data:[],name:"",allColumns:[],columnChooserGridData:[]},comparisonColumns1:[],comparisonColumns2:[],fileSource1:"upload",fileSource2:"upload",comparisonColumns1Error:[],comparisonColumns2Error:[],fileStructure1:M,fileStructure2:M,unformattedData1:"",unformattedData2:"",partnerName:"",partnerCompany:""},un="The number of selected columns for each file needs to match.",dn="Limit of ".concat(5," columns exceeded."),mn="At least 1 column is required",pn={step:0},jn={template:"[insert name],\n\nThanks for sending over your account list.\n\nAttached you\u2019ll find a list that maps both our account teams to one another. \n\nRegards,\n\n[insert your signature]\n"},hn={isOpen:!1,alertType:"",message:""},bn={isLoading:!1},fn=Object(sn.b)({stepProgress:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pn,t=arguments.length>1?arguments[1]:void 0;return t.type===st?Object(s.a)(Object(s.a)({},e),{},{step:t.payload}):e},document:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ln,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case F:var n=t.payload,a=t.index,r=Object($e.a)(e.comparisonColumns1Error),o=Object($e.a)(e.comparisonColumns2Error);return 0===a&&e.comparisonColumns2.length&&n.length!==e.comparisonColumns2.length||1===a&&e.comparisonColumns1.length&&n.length!==e.comparisonColumns1.length?(dt(r,un),dt(o,un)):(0===a&&n.length===e.comparisonColumns2.length||1===a&&n.length===e.comparisonColumns1.length)&&(mt(r,un),mt(o,un)),0===a?(n.length>5?dt(r,dn):mt(r,dn),0===n.length?dt(r,mn):mt(r,mn)):1===a&&(n.length>5?dt(o,dn):mt(o,dn),0===n.length?dt(o,mn):mt(o,mn)),0===t.index?Object(s.a)(Object(s.a)({},e),{},{comparisonColumns1:t.payload,comparisonColumns1Error:r,comparisonColumns2Error:o}):Object(s.a)(Object(s.a)({},e),{},{comparisonColumns2:t.payload,comparisonColumns1Error:r,comparisonColumns2Error:o});case A:var i=0===t.index?Object($e.a)(e.comparisonColumns1Error):Object($e.a)(e.comparisonColumns2Error);return 0===t.payload.length&&dt(i,mn),0===t.index?Object(s.a)(Object(s.a)({},e),{},{comparisonColumns1Error:i}):Object(s.a)(Object(s.a)({},e),{},{comparisonColumns2Error:i});case P:return 0===t.index?Object(s.a)(Object(s.a)({},e),{},{comparisonColumns1:[],selectedDocument1:{data:t.payload,name:t.name,columnChooserGridData:t.columnChooserGridData,allColumns:[]}}):Object(s.a)(Object(s.a)({},e),{},{comparisonColumns2:[],selectedDocument2:{data:t.payload,name:t.name,columnChooserGridData:t.columnChooserGridData,allColumns:[]}});case B:return 0===t.index?Object(s.a)(Object(s.a)({},e),{},{selectedDocument1:Object(s.a)(Object(s.a)({},e.selectedDocument1),{},{allColumns:t.payload})}):Object(s.a)(Object(s.a)({},e),{},{selectedDocument2:Object(s.a)(Object(s.a)({},e.selectedDocument2),{},{allColumns:t.payload})});case I:return 0===t.index?Object(s.a)(Object(s.a)({},e),{},{fileSource1:t.payload}):Object(s.a)(Object(s.a)({},e),{},{fileSource2:t.payload});case N:return 0===t.index?t.payload===M?Object(s.a)(Object(s.a)({},e),{},{fileStructure1:t.payload,unformattedData1:""}):Object(s.a)(Object(s.a)({},e),{},{fileStructure1:t.payload,comparisonColumns1:[],selectedDocument1:Object(s.a)({},ln.selectedDocument1)}):t.payload===M?Object(s.a)(Object(s.a)({},e),{},{fileStructure2:t.payload,unformattedData2:""}):Object(s.a)(Object(s.a)({},e),{},{fileStructure2:t.payload,comparisonColumns2:[],selectedDocument2:Object(s.a)({},ln.selectedDocument2)});case R:return 0===t.index?Object(s.a)(Object(s.a)({},e),{},{unformattedData1:t.payload}):Object(s.a)(Object(s.a)({},e),{},{unformattedData2:t.payload});case T:return Object(s.a)(Object(s.a)({},e),{},{duplicatesData:t.payload});case U:return Object(s.a)(Object(s.a)({},e),{},{partnerName:t.payload});case L:return Object(s.a)(Object(s.a)({},e),{},{partnerCompany:t.payload});default:return e}},user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:en,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case It:return Object(s.a)(Object(s.a)({},e),{},{email:t.payload.email,firstname:t.payload.firstname,lastname:t.payload.lastname,company:t.payload.company,pinnedFileName:t.payload.pinned_filename,pinnedFileId:t.payload.pinned_file_id});case k:return console.log("action payload pin",t.payload),Object(s.a)(Object(s.a)({},e),{},{pinnedFileName:t.payload.pinned_filename,pinnedFileId:t.payload.pinned_file_id});default:return e}},emailTemplate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:jn,t=arguments.length>1?arguments[1]:void 0;return t.type===gt?(console.log("updating template?",t.payload),Object(s.a)(Object(s.a)({},e),{},{template:t.payload})):e},alert:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:hn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case q:return Object(s.a)(Object(s.a)({},e),{},{isOpen:!0,alertType:"error",message:t.payload});case W:case st:return Object(s.a)(Object(s.a)({},e),{},{isOpen:!1,alertType:"",message:""});case z:return Object(s.a)(Object(s.a)({},e),{},{isOpen:!0,alertType:"success",message:t.payload});case V:return Object(s.a)(Object(s.a)({},e),{},{isOpen:!1,alertType:"",message:""});default:return e}},loading:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:bn,t=arguments.length>1?arguments[1]:void 0;return t.type===K?Object(s.a)(Object(s.a)({},e),{},{isLoading:t.payload}):e}}),xn=(n(242),n(243),n(244),Object(sn.c)(fn,Object(sn.a)(c.a)));o.a.render(Object(E.jsx)(b.a,{store:xn,children:Object(E.jsx)(cn,{})}),document.getElementById("root"))}},[[246,1,2]]]);
//# sourceMappingURL=main.6840ea14.chunk.js.map